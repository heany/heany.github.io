<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>çŸ¥å¾®</title>
  
  <subtitle>ä¸€ç›ç¯ï¼Œä¸€ä¸ªäººï¼Œäº®ç€çš„å±å¹•ï¼Œæ¸¸èµ°çš„çµé­‚ã€‚!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://heany.github.io/"/>
  <updated>2019-02-02T11:49:17.988Z</updated>
  <id>http://heany.github.io/</id>
  
  <author>
    <name>Heany</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>golangåŸºç¡€å­¦ä¹ </title>
    <link href="http://heany.github.io/2019/02/02/golang%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"/>
    <id>http://heany.github.io/2019/02/02/golangåŸºç¡€å­¦ä¹ /</id>
    <published>2019-02-02T11:40:55.000Z</published>
    <updated>2019-02-02T11:49:17.988Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€-å‰è¨€"><a href="#ä¸€ã€-å‰è¨€" class="headerlink" title="ä¸€ã€ å‰è¨€"></a>ä¸€ã€ å‰è¨€</h2><p><code>golang</code>è¯­è¨€è¿‘å‡ å¹´è¶Šæ¥è¶Šå—æ¬¢è¿ï¼Œå¾ˆå¤šå¤§é¡¹ç›®éƒ½æ˜¯é‡‡ç”¨<code>go</code>æ¥å¼€å‘çš„ï¼Œæœ€è¿‘æ­£å¥½æœ‰ç©ºå°±æ¥å­¦ä¹ å­¦ä¹ ï¼Œæˆ‘å·²ç»å¾ˆé•¿æ—¶é—´æ²¡æœ‰å­¦ä¹ è¿‡æ–°çš„æŠ€æœ¯äº†ï¼Œå†ä¸å­¦å¯èƒ½å°±è¦å‡‰äº†ğŸ˜¢ï½ã€‚ï¼ˆå…ˆå å‘ï¼Œç¨åå†æ¥å¡«ï¼ï¼‰</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä¸€ã€-å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€ å‰è¨€&lt;/h2&gt;&lt;p&gt;&lt;code&gt;golang&lt;/code&gt;è¯­è¨€è¿‘å‡ å¹´è¶Šæ¥è¶Šå—æ¬¢è¿ï¼Œå¾ˆå¤šå¤§é¡¹ç›®éƒ½æ˜¯é‡‡ç”¨&lt;code&gt;go&lt;/code&gt;æ¥å¼€å‘
      
    
    </summary>
    
      <category term="golang" scheme="http://heany.github.io/categories/golang/"/>
    
    
      <category term="golang" scheme="http://heany.github.io/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>Rediså­¦ä¹ ç¬”è®°</title>
    <link href="http://heany.github.io/2019/02/02/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://heany.github.io/2019/02/02/Rediså­¦ä¹ ç¬”è®°/</id>
    <published>2019-02-02T11:33:23.000Z</published>
    <updated>2019-02-02T11:36:05.557Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€-å‰è¨€"><a href="#ä¸€ã€-å‰è¨€" class="headerlink" title="ä¸€ã€ å‰è¨€"></a>ä¸€ã€ å‰è¨€</h2><p>rediså­¦ä¹ ç¬”è®°ï¼Œå…ˆå å‘ï¼Œå¹´ååœ¨å†™</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä¸€ã€-å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€ å‰è¨€&lt;/h2&gt;&lt;p&gt;rediså­¦ä¹ ç¬”è®°ï¼Œå…ˆå å‘ï¼Œå¹´ååœ¨å†™&lt;/p&gt;

      
    
    </summary>
    
      <category term="æ•°æ®åº“" scheme="http://heany.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="redis" scheme="http://heany.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>mysqlæ“ä½œä½¿ç”¨å˜é‡ä½œä¸ºè¡¨å</title>
    <link href="http://heany.github.io/2018/06/08/mysql%E6%93%8D%E4%BD%9C%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%E4%BD%9C%E4%B8%BA%E8%A1%A8%E5%90%8D/"/>
    <id>http://heany.github.io/2018/06/08/mysqlæ“ä½œä½¿ç”¨å˜é‡ä½œä¸ºè¡¨å/</id>
    <published>2018-06-08T02:42:11.000Z</published>
    <updated>2019-01-26T14:47:30.578Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><blockquote><p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œæœªç»åšä¸»å…è®¸ä¸å¾—è½¬è½½ã€‚</p></blockquote><p>ä½¿ç”¨pythonæ“ä½œmysqlæ•°æ®åº“æ—¶æƒ³å®ç°å¦‚ä¸‹æ•ˆæœï¼š<br>å°†sqlè¯­å¥ä¸­çš„è¡¨åç”¨ä¸€ä¸ªå˜é‡ä»£æ›¿ï¼Œå®ç°æ‰¹é‡æ“ä½œè¡¨</p><pre><code>sql = &quot;select * from sets where number = &apos;%s&apos; &quot;</code></pre><p>å°†sqlè¯­å¥ä¸­çš„setså’Œnumberç”¨å˜é‡ä»£æ›¿ï¼Œå®ç°è‡ªåŠ¨æ“ä½œå¤šä¸ªè¡¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">table = <span class="string">"sets"</span></span><br><span class="line">attr = <span class="string">"number"</span></span><br><span class="line">sql = <span class="string">"select * from "</span>+table+<span class="string">" where "</span>+attr+<span class="string">" = '%s'"</span></span><br><span class="line"><span class="comment"># æˆåŠŸè¿è¡Œï¼Œè¾¾åˆ°è¦æ±‚</span></span><br></pre></td></tr></table></figure><blockquote><p>å…¶å®å°±æ˜¯é‡‡ç”¨å­—ç¬¦ä¸²æ“ä½œä¸­çš„è¯­å¥æ‹¼æ¥æŠ€æœ¯</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œæœªç»åšä¸»å…è®¸ä¸å¾—è½¬è½½ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½¿ç”¨pythonæ“ä½œmysqlæ•°æ®åº“æ—¶æƒ³å®ç°å¦‚ä¸‹æ•ˆæœï¼š&lt;br&gt;å°†sqlè¯­å¥ä¸­çš„è¡¨åç”¨ä¸€ä¸ªå˜é‡ä»£æ›¿ï¼Œå®ç°æ‰¹é‡æ“ä½œè¡¨&lt;/
      
    
    </summary>
    
      <category term="MySQL" scheme="http://heany.github.io/categories/MySQL/"/>
    
    
  </entry>
  
  <entry>
    <title>Numpyçš„randomå‡½æ•°æ±‡æ€»</title>
    <link href="http://heany.github.io/2018/06/06/Numpy%E7%9A%84random%E5%87%BD%E6%95%B0%E6%B1%87%E6%80%BB/"/>
    <id>http://heany.github.io/2018/06/06/Numpyçš„randomå‡½æ•°æ±‡æ€»/</id>
    <published>2018-06-06T01:54:44.000Z</published>
    <updated>2019-01-26T14:47:30.577Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>åœ¨<code>python</code>æ•°æ®åˆ†æçš„å­¦ä¹ å’Œæ—¥å¸¸åº”ç”¨è¿‡ç¨‹ä¸­ï¼Œç»å¸¸è¦ç”¨åˆ°<code>numpy</code>åº“çš„éšæœºå‡½æ•°ï¼Œè¿™äº›éšæœºå‡½æ•°åŠŸèƒ½å¾ˆå¤šï¼Œç»å¸¸ä¼šæ··æ·†è®°ä¸ä½ï½ï½ï¼Œæ¯æ¬¡ä½¿ç”¨éƒ½è¦å»<code>Google</code>ï¼Œæ‰€ä»¥æˆ‘å°±æŠŠå¸¸ç”¨çš„éšæœºå‡½æ•°åŠŸèƒ½æ±‡æ€»åœ¨ä¸‹é¢äº†ï¼Œæ–¹ä¾¿è‡ªå·±æŸ¥é˜…ã€‚</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure><h2 id="äºŒã€numpy-random-rand"><a href="#äºŒã€numpy-random-rand" class="headerlink" title="äºŒã€numpy.random.rand()"></a>äºŒã€<code>numpy.random.rand()</code></h2><p>è¯­æ³•ï¼š<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">numpy.random.rand(d0,d1,...,dn)</span><br><span class="line"><span class="meta"># randå‡½æ•°æ ¹æ®ç»™å®šç»´åº¦ç”Ÿæˆ[0,1)ä¹‹é—´çš„æ•°æ®ï¼ŒåŒ…å«0ï¼Œä¸åŒ…å«1</span></span><br><span class="line"><span class="meta"># dnè¡¨æ ¼æ¯ä¸ªç»´åº¦</span></span><br><span class="line"><span class="meta"># è¿”å›å€¼ä¸ºæŒ‡å®šç»´åº¦çš„array</span></span><br></pre></td></tr></table></figure></p><p>ä¾‹å­ï¼š<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">np.random.rand(<span class="number">4</span>,<span class="number">2</span>)</span><br><span class="line"># output</span><br><span class="line">array([[<span class="number">0.44966653</span> <span class="number">0.52431591</span>]</span><br><span class="line">       [<span class="number">0.12117809</span> <span class="number">0.31425446</span>]</span><br><span class="line">       [<span class="number">0.94938082</span> <span class="number">0.78223903</span>]</span><br><span class="line">       [<span class="number">0.98802125</span> <span class="number">0.01795372</span>]])</span><br><span class="line"></span><br><span class="line">np.random.rand(<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>)</span><br><span class="line">#output</span><br><span class="line">array([[[<span class="number">0.4016697</span>  <span class="number">0.41116077</span>]</span><br><span class="line">        [<span class="number">0.81121991</span> <span class="number">0.18433693</span>]</span><br><span class="line">        [<span class="number">0.94307831</span> <span class="number">0.37959419</span>]]</span><br><span class="line"></span><br><span class="line">         [[<span class="number">0.11907587</span> <span class="number">0.97932363</span>]</span><br><span class="line">          [<span class="number">0.20458545</span> <span class="number">0.73305606</span>]</span><br><span class="line">          [<span class="number">0.62938875</span> <span class="number">0.99506056</span>]]</span><br><span class="line"></span><br><span class="line">         [[<span class="number">0.85168379</span> <span class="number">0.76133277</span>]</span><br><span class="line">          [<span class="number">0.868105</span>   <span class="number">0.29375361</span>]</span><br><span class="line">          [<span class="number">0.08666713</span> <span class="number">0.43133631</span>]]</span><br><span class="line"></span><br><span class="line">         [[<span class="number">0.93674358</span> <span class="number">0.50061816</span>]</span><br><span class="line">          [<span class="number">0.58272102</span> <span class="number">0.40495383</span>]</span><br><span class="line">          [<span class="number">0.94631605</span> <span class="number">0.51712061</span>]]])</span><br></pre></td></tr></table></figure></p><h2 id="ä¸‰ã€numpy-random-randn-è¿”å›å€¼å…·æœ‰æ ‡å‡†æ­£å¤ªåˆ†N-0-1"><a href="#ä¸‰ã€numpy-random-randn-è¿”å›å€¼å…·æœ‰æ ‡å‡†æ­£å¤ªåˆ†N-0-1" class="headerlink" title="ä¸‰ã€numpy.random.randn()è¿”å›å€¼å…·æœ‰æ ‡å‡†æ­£å¤ªåˆ†N(0,1)"></a>ä¸‰ã€<code>numpy.random.randn()</code>è¿”å›å€¼å…·æœ‰æ ‡å‡†æ­£å¤ªåˆ†<code>N(0,1)</code></h2><p>è¯­æ³•ï¼š<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">numpy.random.randn(d0,d1,...,dn)</span><br><span class="line"><span class="meta"># randnå‡½æ•°è¿”å›ä¸€ä¸ªæˆ–ä¸€ç»„æ ·æœ¬ï¼Œå…·æœ‰æ ‡å‡†æ­£æ€åˆ†å¸ƒã€‚</span></span><br><span class="line"><span class="meta"># dnè¡¨æ ¼æ¯ä¸ªç»´åº¦</span></span><br><span class="line"><span class="meta"># è¿”å›å€¼ä¸ºæŒ‡å®šç»´åº¦çš„array</span></span><br></pre></td></tr></table></figure></p><p>ä¾‹å­ï¼š<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">np.random.randn() # å½“æ²¡æœ‰å‚æ•°æ—¶ï¼Œè¿”å›å•ä¸ªæ•°æ®</span><br><span class="line"># output</span><br><span class="line"><span class="number">0.10125281554614712</span></span><br><span class="line"></span><br><span class="line">np.random.randn(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line"># output</span><br><span class="line">array([[ <span class="number">0.88550167</span>  <span class="number">0.94488988</span>  <span class="number">0.68380494</span> <span class="number">-2.42685228</span>]</span><br><span class="line"> [<span class="number">-0.12320336</span> <span class="number">-0.21325373</span>  <span class="number">0.07526319</span> <span class="number">-0.59034683</span>]])</span><br><span class="line"></span><br><span class="line">np.random.randn(<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>)</span><br><span class="line"># output</span><br><span class="line">array([[[ <span class="number">1.09663108</span> <span class="number">-0.58652581</span>]</span><br><span class="line">      [<span class="number">-0.94125426</span>  <span class="number">0.01259422</span>]</span><br><span class="line">      [<span class="number">-0.4189963</span>   <span class="number">0.03315681</span>]]</span><br><span class="line"></span><br><span class="line">     [[<span class="number">-0.38388522</span> <span class="number">-0.46672398</span>]</span><br><span class="line">      [ <span class="number">0.35335792</span> <span class="number">-0.92017071</span>]</span><br><span class="line">      [<span class="number">-0.26904716</span>  <span class="number">2.28057168</span>]]</span><br><span class="line"></span><br><span class="line">     [[<span class="number">-0.37893325</span> <span class="number">-0.64560053</span>]</span><br><span class="line">      [ <span class="number">0.93308775</span>  <span class="number">0.68629363</span>]</span><br><span class="line">      [ <span class="number">2.6449362</span>   <span class="number">1.40476443</span>]]</span><br><span class="line"></span><br><span class="line">     [[ <span class="number">1.90709637</span>  <span class="number">0.18952578</span>]</span><br><span class="line">      [<span class="number">-0.09167653</span>  <span class="number">1.95480404</span>]</span><br><span class="line">      [<span class="number">-1.55128951</span> <span class="number">-0.07542736</span>]]])</span><br></pre></td></tr></table></figure></p><h2 id="å››ã€numpy-random-randint"><a href="#å››ã€numpy-random-randint" class="headerlink" title="å››ã€numpy.random.randint()"></a>å››ã€<code>numpy.random.randint()</code></h2><h3 id="4-1ã€-numpy-random-randint"><a href="#4-1ã€-numpy-random-randint" class="headerlink" title="4.1ã€ numpy.random.randint()"></a>4.1ã€ <code>numpy.random.randint()</code></h3><p>è¯­æ³•ï¼š<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">numpy.random.randint(low, <span class="attribute">high</span>=None, <span class="attribute">size</span>=None, <span class="attribute">dtype</span>=â€™lâ€™)</span><br><span class="line"></span><br><span class="line">    è¿”å›éšæœºæ•´æ•°ï¼ŒèŒƒå›´åŒºé—´ä¸º[low,highï¼‰ï¼ŒåŒ…å«lowï¼Œä¸åŒ…å«high</span><br><span class="line">    å‚æ•°ï¼šlowä¸ºæœ€å°å€¼ï¼Œhighä¸ºæœ€å¤§å€¼ï¼Œsizeä¸ºæ•°ç»„ç»´åº¦å¤§å°ï¼Œdtypeä¸ºæ•°æ®ç±»å‹ï¼Œé»˜è®¤çš„æ•°æ®ç±»å‹æ˜¯np.int</span><br><span class="line">    highæ²¡æœ‰å¡«å†™æ—¶ï¼Œé»˜è®¤ç”Ÿæˆéšæœºæ•°çš„èŒƒå›´æ˜¯[0ï¼Œlow)</span><br></pre></td></tr></table></figure></p><p>ä¾‹å­ï¼š<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">np.random.randint(<span class="number">1</span>,size=<span class="number">5</span>) # è¿”å›[<span class="number">0</span>,<span class="number">1</span>)ä¹‹é—´çš„æ•´æ•°ï¼Œæ‰€ä»¥åªæœ‰<span class="number">0</span></span><br><span class="line"># output</span><br><span class="line">array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">np.random.randint(<span class="number">1</span>,<span class="number">5</span>) # è¿”å›<span class="number">1</span>ä¸ª[<span class="number">1</span>,<span class="number">5</span>)æ—¶é—´çš„éšæœºæ•´æ•°</span><br><span class="line"># output</span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line">np.random.randint(<span class="number">-5</span>,<span class="number">5</span>,size=(<span class="number">2</span>,<span class="number">2</span>))</span><br><span class="line"># output</span><br><span class="line">array([[<span class="number">-4</span> <span class="number">-5</span>]</span><br><span class="line">       [<span class="number">-2</span> <span class="number">-2</span>]])</span><br></pre></td></tr></table></figure></p><h3 id="4-2ã€-numpy-random-random-integers"><a href="#4-2ã€-numpy-random-random-integers" class="headerlink" title="4.2ã€ numpy.random.random_integers"></a>4.2ã€ <code>numpy.random.random_integers</code></h3><p>è¯­æ³•ï¼š<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">numpy.random.random_integers(low, high=<span class="keyword">None</span>, <span class="built_in">size</span>=<span class="keyword">None</span>)</span><br><span class="line"></span><br><span class="line">    è¿”å›éšæœºæ•´æ•°ï¼ŒèŒƒå›´åŒºé—´ä¸º[low,high]ï¼ŒåŒ…å«lowå’Œhigh</span><br><span class="line">    å‚æ•°ï¼šlowä¸ºæœ€å°å€¼ï¼Œhighä¸ºæœ€å¤§å€¼ï¼Œ<span class="built_in">size</span>ä¸ºæ•°ç»„ç»´åº¦å¤§å°</span><br><span class="line">    highæ²¡æœ‰å¡«å†™æ—¶ï¼Œé»˜è®¤ç”Ÿæˆéšæœºæ•°çš„èŒƒå›´æ˜¯[<span class="number">1</span>ï¼Œlow]</span><br><span class="line"></span><br><span class="line">è¯¥å‡½æ•°åœ¨æœ€æ–°çš„numpyç‰ˆæœ¬ä¸­å·²è¢«æ›¿ä»£ï¼Œå»ºè®®ä½¿ç”¨randintå‡½æ•°</span><br></pre></td></tr></table></figure></p><h2 id="äº”ã€ç”Ÿæˆ-0-1-ä¹‹é—´çš„æµ®ç‚¹æ•°"><a href="#äº”ã€ç”Ÿæˆ-0-1-ä¹‹é—´çš„æµ®ç‚¹æ•°" class="headerlink" title="äº”ã€ç”Ÿæˆ[0,1)ä¹‹é—´çš„æµ®ç‚¹æ•°"></a>äº”ã€ç”Ÿæˆ<code>[0,1)</code>ä¹‹é—´çš„æµ®ç‚¹æ•°</h2><p>è¯­æ³•ï¼š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">numpy<span class="selector-class">.random</span><span class="selector-class">.random_sample</span>(size=None)</span><br><span class="line">numpy<span class="selector-class">.random</span><span class="selector-class">.random</span>(size=None)</span><br><span class="line">numpy<span class="selector-class">.random</span><span class="selector-class">.ranf</span>(size=None)</span><br><span class="line">numpy<span class="selector-class">.random</span><span class="selector-class">.sample</span>(size=None)</span><br></pre></td></tr></table></figure></p><p>ä¾‹å­ï¼š<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">'-----------random_sample--------------'</span>)</span><br><span class="line"><span class="built_in">print</span>(np.<span class="built_in">random</span>.random_sample(size=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'-----------random--------------'</span>)</span><br><span class="line"><span class="built_in">print</span>(np.<span class="built_in">random</span>.<span class="built_in">random</span>(size=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'-----------ranf--------------'</span>)</span><br><span class="line"><span class="built_in">print</span>(np.<span class="built_in">random</span>.ranf(size=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'-----------sample--------------'</span>)</span><br><span class="line"><span class="built_in">print</span>(np.<span class="built_in">random</span>.sample(size=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line"></span><br><span class="line"># <span class="built_in">output</span></span><br><span class="line"><span class="comment">-----------random_sample--------------</span></span><br><span class="line"><span class="string">[[0.73845538 0.57461322]</span></span><br><span class="line"><span class="string"> [0.50090024 0.12809794]]</span></span><br><span class="line"><span class="comment">-----------random--------------</span></span><br><span class="line"><span class="string">[[0.65293998 0.15751317]</span></span><br><span class="line"><span class="string"> [0.0745293  0.03874293]]</span></span><br><span class="line"><span class="comment">-----------ranf--------------</span></span><br><span class="line"><span class="string">[[0.75927288 0.79548232]</span></span><br><span class="line"><span class="string"> [0.47618339 0.04334719]]</span></span><br><span class="line"><span class="comment">-----------sample--------------</span></span><br><span class="line"><span class="string">[[0.81010338 0.59291716]</span></span><br><span class="line"><span class="string"> [0.58648785 0.1767814 ]]</span></span><br></pre></td></tr></table></figure></p><h2 id="å…­ã€-numpy-random-choice"><a href="#å…­ã€-numpy-random-choice" class="headerlink" title="å…­ã€ numpy.random.choice()"></a>å…­ã€ <code>numpy.random.choice()</code></h2><p>è¯­æ³•ï¼š<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">numpy.random.choice(a, <span class="attribute">size</span>=None, <span class="attribute">replace</span>=<span class="literal">True</span>, <span class="attribute">p</span>=None)</span><br><span class="line"></span><br><span class="line">    ä»ç»™å®šçš„ä¸€ç»´æ•°ç»„ä¸­ç”Ÿæˆéšæœºæ•°</span><br><span class="line">    å‚æ•°ï¼š aä¸ºä¸€ç»´æ•°ç»„ç±»ä¼¼æ•°æ®æˆ–æ•´æ•°ï¼›sizeä¸ºæ•°ç»„ç»´åº¦ï¼›pä¸ºæ•°ç»„ä¸­çš„æ•°æ®å‡ºç°çš„æ¦‚ç‡</span><br><span class="line">    aä¸ºæ•´æ•°æ—¶ï¼Œå¯¹åº”çš„ä¸€ç»´æ•°ç»„ä¸ºnp.arange(a)</span><br></pre></td></tr></table></figure></p><p>ä¾‹å­ï¼š<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">np.<span class="built_in">random</span>.choice(<span class="number">5</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="keyword">array</span>([<span class="number">4</span> <span class="number">4</span> <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">np.<span class="built_in">random</span>.choice(<span class="number">5</span>, <span class="number">3</span>, replace=False)</span><br><span class="line"># å½“replaceä¸ºFalseæ—¶ï¼Œç”Ÿæˆçš„éšæœºæ•°ä¸èƒ½æœ‰é‡å¤çš„æ•°å€¼</span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="keyword">array</span>([<span class="number">4</span> <span class="number">2</span> <span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">np.<span class="built_in">random</span>.choice(<span class="number">5</span>,<span class="built_in">size</span>=(<span class="number">3</span>,<span class="number">2</span>))</span><br><span class="line"><span class="meta"># output</span></span><br><span class="line">[[<span class="number">0</span> <span class="number">0</span>]</span><br><span class="line"> [<span class="number">1</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">0</span> <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line">demo_list = [<span class="string">'lenovo'</span>, <span class="string">'sansumg'</span>,<span class="string">'moto'</span>,<span class="string">'xiaomi'</span>, <span class="string">'iphone'</span>]</span><br><span class="line">np.<span class="built_in">random</span>.choice(demo_list,<span class="built_in">size</span>=(<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="keyword">array</span>([[<span class="string">'sansumg'</span> <span class="string">'iphone'</span> <span class="string">'moto'</span>]</span><br><span class="line">       [<span class="string">'moto'</span> <span class="string">'iphone'</span> <span class="string">'iphone'</span>]</span><br><span class="line">       [<span class="string">'xiaomi'</span> <span class="string">'iphone'</span> <span class="string">'xiaomi'</span>]])</span><br></pre></td></tr></table></figure></p><pre><code>å‚æ•°pçš„é•¿åº¦ä¸å‚æ•°açš„é•¿åº¦éœ€è¦ä¸€è‡´ï¼›å‚æ•°pä¸ºæ¦‚ç‡ï¼Œpé‡Œçš„æ•°æ®ä¹‹å’Œåº”ä¸º1</code></pre><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">demo_list = [<span class="string">'lenovo'</span>, <span class="string">'sansumg'</span>,<span class="string">'moto'</span>,<span class="string">'xiaomi'</span>, <span class="string">'iphone'</span>]</span><br><span class="line">np.random.choice(demo_list,size=(<span class="number">3</span>,<span class="number">3</span>), p=[<span class="number">0.1</span>,<span class="number">0.6</span>,<span class="number">0.1</span>,<span class="number">0.1</span>,<span class="number">0.1</span>])</span><br><span class="line"># output</span><br><span class="line">array([[<span class="string">'moto'</span> <span class="string">'sansumg'</span> <span class="string">'xiaomi'</span>]</span><br><span class="line">       [<span class="string">'lenovo'</span> <span class="string">'moto'</span> <span class="string">'sansumg'</span>]</span><br><span class="line">       [<span class="string">'sansumg'</span> <span class="string">'sansumg'</span> <span class="string">'sansumg'</span>]])</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€numpy-random-seed"><a href="#ä¸ƒã€numpy-random-seed" class="headerlink" title="ä¸ƒã€numpy.random.seed()"></a>ä¸ƒã€<code>numpy.random.seed()</code></h2><p>è¯­æ³•ï¼š</p><pre><code>np.random.seed()çš„ä½œç”¨ï¼šä½¿å¾—éšæœºæ•°æ®å¯é¢„æµ‹ã€‚å½“æˆ‘ä»¬è®¾ç½®ç›¸åŒçš„seedï¼Œæ¯æ¬¡ç”Ÿæˆçš„éšæœºæ•°ç›¸åŒã€‚å¦‚æœä¸è®¾ç½®seedï¼Œåˆ™æ¯æ¬¡ä¼šç”Ÿæˆä¸åŒçš„éšæœºæ•°</code></pre><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line">np.random.rand(<span class="number">5</span>)</span><br><span class="line"># output</span><br><span class="line">array([<span class="number">0.5488135</span> , <span class="number">0.71518937</span>, <span class="number">0.60276338</span>, <span class="number">0.54488318</span>, <span class="number">0.4236548</span> ])</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">1676</span>)</span><br><span class="line">np.random.rand(<span class="number">5</span>)</span><br><span class="line"># output</span><br><span class="line">array([<span class="number">0.39983389</span>, <span class="number">0.29426895</span>, <span class="number">0.89541728</span>, <span class="number">0.71807369</span>, <span class="number">0.3531823</span> ])</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">1676</span>)</span><br><span class="line">np.random.rand(<span class="number">5</span>)</span><br><span class="line"># output</span><br><span class="line">array([<span class="number">0.39983389</span>, <span class="number">0.29426895</span>, <span class="number">0.89541728</span>, <span class="number">0.71807369</span>, <span class="number">0.3531823</span> ])</span><br></pre></td></tr></table></figure><h2 id="å…«ã€ç»“æŸè¯­"><a href="#å…«ã€ç»“æŸè¯­" class="headerlink" title="å…«ã€ç»“æŸè¯­"></a>å…«ã€ç»“æŸè¯­</h2><p>å—¯ï¼Ÿï½ï½</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€å‰è¨€&lt;/h2&gt;&lt;p&gt;åœ¨&lt;code&gt;python&lt;/code&gt;æ•°æ®åˆ†æçš„å­¦ä¹ å’Œæ—¥å¸¸åº”ç”¨è¿‡ç¨‹ä¸­ï¼Œç»å¸¸è¦ç”¨åˆ°&lt;code&gt;numpy&lt;/code&gt;åº“çš„éš
      
    
    </summary>
    
      <category term="Machine Learning" scheme="http://heany.github.io/categories/Machine-Learning/"/>
    
    
      <category term="Numpy Random" scheme="http://heany.github.io/tags/Numpy-Random/"/>
    
  </entry>
  
  <entry>
    <title>Nginx+PHP+MySQLæ­å»ºè¿‡ç¨‹</title>
    <link href="http://heany.github.io/2018/05/15/Nginx-PHP-MySQL%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"/>
    <id>http://heany.github.io/2018/05/15/Nginx-PHP-MySQLæ­å»ºè¿‡ç¨‹/</id>
    <published>2018-05-15T08:43:10.000Z</published>
    <updated>2019-01-26T14:47:30.577Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€-å‰è¨€"><a href="#ä¸€ã€-å‰è¨€" class="headerlink" title="ä¸€ã€ å‰è¨€"></a>ä¸€ã€ å‰è¨€</h2><p>&emsp;æœ€è¿‘è¦å¼€å§‹å¹²æ´»äº†ï½è€æ¿è¦æ±‚è¾¹åšè¾¹å†™å¼€å‘æ–‡æ¡£ï¼Œå•Šå•Šå•Šå•Šï¼Œå°±æŠŠè¿™ä¸€ç³»åˆ—çš„æ–‡æ¡£å‘åœ¨åšå®¢é‡Œé¢å§ï¼Œéœ€è¦çš„æ—¶å€™å†æ¥æ‹¿ï¼Œè¿˜èƒ½å‡‘å‡ ç¯‡åšå®¢ã€‚è¿™æ˜¯ç¬¬ä¸€ç¯‡ï¼Œå…³äºNginx+php+MySQLç¯å¢ƒæ­å»ºçš„ï¼Œå¾ˆç®€å•ç½‘ä¸Šå¾ˆå¤šï½ï½ï½<br><a id="more"></a></p><h2 id="äºŒã€-æœ¬æœºç¯å¢ƒ"><a href="#äºŒã€-æœ¬æœºç¯å¢ƒ" class="headerlink" title="äºŒã€ æœ¬æœºç¯å¢ƒ"></a>äºŒã€ æœ¬æœºç¯å¢ƒ</h2><ul><li>OS: Ubuntu 17.10.1_x64</li><li>Nginx_version: nginx/1.12.1</li><li>PHP_version: PHP-7.1.17</li><li>MySQL_version: mysql5.7.22</li></ul><h2 id="ä¸‰ã€-å®‰è£…æ­¥éª¤"><a href="#ä¸‰ã€-å®‰è£…æ­¥éª¤" class="headerlink" title="ä¸‰ã€ å®‰è£…æ­¥éª¤"></a>ä¸‰ã€ å®‰è£…æ­¥éª¤</h2><h3 id="3-1ã€-å®‰è£…Nginx-Web-Server"><a href="#3-1ã€-å®‰è£…Nginx-Web-Server" class="headerlink" title="3.1ã€ å®‰è£…Nginx Web Server"></a>3.1ã€ å®‰è£…<code>Nginx Web Server</code></h3><p>ç›´æ¥ä½¿ç”¨<code>apt package management</code>æ¥å®Œæˆå®‰è£…ï¼Œå‘½ä»¤å¦‚ä¸‹</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> update</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> upgrade</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä¸€ä¼šå„¿å°±å®‰è£…å¥½äº†ï¼Œä¸‹é¢æ˜¯ä¸€äº›é‡è¦çš„æ–‡ä»¶ç›®å½•</span></span><br><span class="line">nginxçš„é…ç½®æ–‡ä»¶ç›®å½•ï¼š /etc/nginx;</span><br><span class="line">Nginxçš„ç¼“å­˜ç›®å½•ï¼š /var/cache/nginx;</span><br><span class="line">Nginxçš„æ—¥å¿—ç›®å½•ï¼š /var/log/nginx;</span><br></pre></td></tr></table></figure><blockquote><h1 id="å¯åŠ¨nginxæœåŠ¡"><a href="#å¯åŠ¨nginxæœåŠ¡" class="headerlink" title="å¯åŠ¨nginxæœåŠ¡"></a>å¯åŠ¨nginxæœåŠ¡</h1><p>   sudo systemctl start nginx</p><h1 id="test"><a href="#test" class="headerlink" title="test"></a>test</h1><p>   #æ‰“å¼€ç½‘é¡µï¼Œè¾“å…¥<code>http://localhost</code>å¯ä»¥çœ‹åˆ°<code>welcome to nginx</code>å­—æ ·</p></blockquote><h3 id="3-2ã€-å®‰è£…MySQLç®¡ç†ç½‘ç«™æ•°æ®"><a href="#3-2ã€-å®‰è£…MySQLç®¡ç†ç½‘ç«™æ•°æ®" class="headerlink" title="3.2ã€ å®‰è£…MySQLç®¡ç†ç½‘ç«™æ•°æ®"></a>3.2ã€ å®‰è£…MySQLç®¡ç†ç½‘ç«™æ•°æ®</h3><p>åŒæ ·æ˜¯ä½¿ç”¨<code>ubuntu</code>ä¸­çš„<code>apt</code>åŒ…ç®¡ç†å™¨æ¥å®‰è£…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mysql-server</span><br><span class="line"># ä¼šå¼¹æ¡†æé†’è¾“å…¥rootå¯†ç ï¼Œç›´æ¥è¾“å…¥ç„¶åæŒ‰`Enter`ï¼Œç»“æŸã€‚</span><br></pre></td></tr></table></figure></p><h3 id="3-3ã€-å®‰è£…PHPæœåŠ¡"><a href="#3-3ã€-å®‰è£…PHPæœåŠ¡" class="headerlink" title="3.3ã€ å®‰è£…PHPæœåŠ¡"></a>3.3ã€ å®‰è£…<code>PHP</code>æœåŠ¡</h3><p>åŒæ ·æ˜¯ä½¿ç”¨<code>ubuntu</code>ä¸­çš„<code>apt</code>åŒ…ç®¡ç†å™¨æ¥å®‰è£…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># é¡ºä¾¿æŠŠphp-mysqlæ’ä»¶è£…ä¸Š</span></span><br><span class="line">sudo apt-<span class="keyword">get</span> install php-fpm php-mysql</span><br><span class="line"></span><br><span class="line"><span class="meta"># ä¸€äº›é‡è¦çš„æ–‡ä»¶ç›®å½•</span></span><br><span class="line"><span class="meta"># phpé…ç½®æ–‡ä»¶è·¯å¾„ï¼š /etc/php/7.1/fpm/php.ini</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åï¼Œä¿®æ”¹<code>php</code>çš„é…ç½®æ–‡ä»¶ï¼š<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># åˆ‡æ¢åˆ°phpé…ç½®ç›®å½•</span><br><span class="line">cd /etc/php/7.1/fpm</span><br><span class="line"># ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br><span class="line">sudo vim php.ini</span><br><span class="line"><span class="code">+++</span>+</span><br><span class="line">æ‰¾åˆ°è¿™è¡Œï¼Œå–æ¶ˆæ³¨é‡Šï¼Œå°†1æ”¹æˆ0</span><br><span class="line">cgi.fix<span class="emphasis">_pathinfo=0</span></span><br><span class="line"><span class="emphasis">++++</span></span><br></pre></td></tr></table></figure></p><p>æœ€åï¼Œé‡å¯<code>php</code>æœåŠ¡<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">sudo</span> <span class="selector-tag">systemctl</span> <span class="selector-tag">restart</span> <span class="selector-tag">php-7</span><span class="selector-class">.1-fpm</span></span><br></pre></td></tr></table></figure></p><h3 id="3-4ã€-é…ç½®Nginxå»ä½¿ç”¨PHPå¤„ç†å™¨"><a href="#3-4ã€-é…ç½®Nginxå»ä½¿ç”¨PHPå¤„ç†å™¨" class="headerlink" title="3.4ã€ é…ç½®Nginxå»ä½¿ç”¨PHPå¤„ç†å™¨"></a>3.4ã€ é…ç½®<code>Nginx</code>å»ä½¿ç”¨<code>PHP</code>å¤„ç†å™¨</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢åˆ°nginxç½‘ç«™çš„é…ç½®ç›®å½•</span></span><br><span class="line">cd /etc/nginx/sites-available</span><br><span class="line">sudo vim default</span><br><span class="line"><span class="comment"># åšå¦‚ä¸‹ä¿®æ”¹ï¼š</span></span><br><span class="line">++++</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80 default_server;</span><br><span class="line">    listen [::]:80 default_server;</span><br><span class="line"></span><br><span class="line">    root /var/www/html;</span><br><span class="line">    index index.php index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line">    server_name server_domain_or_IP;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        try_files <span class="variable">$uri</span> <span class="variable">$uri</span>/ =404;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ \.php$ &#123;</span><br><span class="line">        include snippets/fastcgi-php.conf;</span><br><span class="line">        fastcgi_pass unix:/run/php/php7.1-fpm.sock;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ /\.ht &#123;</span><br><span class="line">        deny all;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">++++</span><br></pre></td></tr></table></figure><p><b style="color: red">è¿™é‡Œæœ‰ä¸ªå°å‘ï¼Œäº†è§£ä¸€ä¸‹ï¼š</b><b>ç”±äºå®‰è£…çš„phpç‰ˆæœ¬æ˜¯<code>php7.1</code>ï¼Œå®‰è£…<code>nginx</code>é»˜è®¤é…ç½®æ–‡ä»¶é‡Œé¢ä½¿ç”¨çš„æ˜¯<code>/run/php/php7.0-fpm.sock</code>,ä½ åœ¨<code>/run/php</code>ä¸­æ‰¾ä¸åˆ°<code>php7.0</code>çš„sockæ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä»¬è¦æŠŠå®ƒä¿®æ”¹ä¸ºæˆ‘ä»¬å®‰è£…çš„<code>php</code>ç›¸åº”ç‰ˆæœ¬çš„<code>sock</code>æ–‡ä»¶ã€‚å³</b><b style="color: red"><code>/run/php/php7.1-fpm.sock;</code></b></p><p>ç„¶åï¼Œæµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦ç”Ÿæ•ˆã€‚</p><pre><code>sudo nginx -t  #å¦‚æœæ²¡æŠ¥é”™ï¼Œè¯´æ˜é…ç½®æˆåŠŸ</code></pre><p>æœ€åï¼Œé‡æ–°åŠ è½½<code>nginx</code>æœåŠ¡å™¨</p><pre><code>sudo systemctl reload nginx</code></pre><h3 id="3-5ã€-æµ‹è¯•nginxå’ŒPHPé…ç½®æ˜¯å¦ç”Ÿæ•ˆ"><a href="#3-5ã€-æµ‹è¯•nginxå’ŒPHPé…ç½®æ˜¯å¦ç”Ÿæ•ˆ" class="headerlink" title="3.5ã€ æµ‹è¯•nginxå’ŒPHPé…ç½®æ˜¯å¦ç”Ÿæ•ˆ"></a>3.5ã€ æµ‹è¯•<code>nginx</code>å’Œ<code>PHP</code>é…ç½®æ˜¯å¦ç”Ÿæ•ˆ</h3><p>åœ¨ç½‘ç«™çš„æ ¹ç›®å½•<code>/var/www/html</code>ä¸‹æ–°å»ºä¸€ä¸ª<code>info.php</code>æ–‡ä»¶ï¼Œå†™å…¥ä¸€ä¸‹å†…å®¹ï¼š<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// info.php</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">phpinfo();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥<code>localhost/info.php</code>ï¼Œä¼šçœ‹åˆ°è¾“å‡ºäº†ä¹‹å‰å®‰è£…çš„<code>php</code>çš„ç‰ˆæœ¬ä¿¡æ¯å’Œå…¶ä»–æ¨¡å—çš„è¯¦ç»†ä¿¡æ¯ã€‚è¿™ å°± è¡¨ æ˜ <code>Nginx</code> å’Œ<code>PHP</code>éƒ½å®‰è£…å’Œé…ç½®ï½ï½æˆåŠŸäº†ï¼ï¼ï¼</p><h2 id="å››ã€-ç»“æŸè¯­"><a href="#å››ã€-ç»“æŸè¯­" class="headerlink" title="å››ã€ ç»“æŸè¯­"></a>å››ã€ ç»“æŸè¯­</h2><p>è·¯å¾ˆé•¿ï½è¿™æ‰åˆšåˆšå¼€å§‹å•Šï½ï½ï½ï½</p><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-in-ubuntu-16-04" target="_blank" rel="noopener">å‚è€ƒè‡ªåšå®¢</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¸€ã€-å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€ å‰è¨€&lt;/h2&gt;&lt;p&gt;&amp;emsp;æœ€è¿‘è¦å¼€å§‹å¹²æ´»äº†ï½è€æ¿è¦æ±‚è¾¹åšè¾¹å†™å¼€å‘æ–‡æ¡£ï¼Œå•Šå•Šå•Šå•Šï¼Œå°±æŠŠè¿™ä¸€ç³»åˆ—çš„æ–‡æ¡£å‘åœ¨åšå®¢é‡Œé¢å§ï¼Œéœ€è¦çš„æ—¶å€™å†æ¥æ‹¿ï¼Œè¿˜èƒ½å‡‘å‡ ç¯‡åšå®¢ã€‚è¿™æ˜¯ç¬¬ä¸€ç¯‡ï¼Œå…³äºNginx+php+MySQLç¯å¢ƒæ­å»ºçš„ï¼Œå¾ˆç®€å•ç½‘ä¸Šå¾ˆå¤šï½ï½ï½&lt;br&gt;
    
    </summary>
    
      <category term="Website" scheme="http://heany.github.io/categories/Website/"/>
    
    
      <category term="Nginx-php-MySQL" scheme="http://heany.github.io/tags/Nginx-php-MySQL/"/>
    
  </entry>
  
  <entry>
    <title>TF-IDFç†è§£</title>
    <link href="http://heany.github.io/2018/05/14/TF-IDF%E7%90%86%E8%A7%A3/"/>
    <id>http://heany.github.io/2018/05/14/TF-IDFç†è§£/</id>
    <published>2018-05-14T07:38:47.000Z</published>
    <updated>2019-01-26T14:47:30.578Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€-å‰è¨€"><a href="#ä¸€ã€-å‰è¨€" class="headerlink" title="ä¸€ã€ å‰è¨€"></a>ä¸€ã€ å‰è¨€</h2><p>&emsp;æœ€è¿‘åœ¨çœ‹å…³äºç‰¹å¾æŠ½å–çš„è®ºæ–‡ï¼Œå¸Œæœ›èƒ½ä»ä¸­æ‰¾åˆ°ä¸€äº›æ–¹æ³•æ¥åšæ•°æ®æŠ„è¢­æ£€æµ‹ï¼Œçœ‹åˆ°äº†ä¸€ç¯‡å…³äºä¸­æ–‡æ–‡æœ¬å¤åˆ¶æ£€æµ‹çš„æ–‡ç« ï¼Œé‡Œé¢ç”¨åˆ°äº†TF-IDFç®—æ³•ï¼ŒæŸ¥æ‰¾äº†äº›èµ„æ–™ï¼ŒæŠŠå®ƒæ•´ç†äº†ä¸€ä¸‹ï½ï½<br><a id="more"></a></p><h2 id="äºŒã€-TF-IDFçš„ç†è§£"><a href="#äºŒã€-TF-IDFçš„ç†è§£" class="headerlink" title="äºŒã€ TF-IDFçš„ç†è§£"></a>äºŒã€ TF-IDFçš„ç†è§£</h2><p>&emsp;TF-IDFï¼ˆterm frequencyâ€“inverse document frequencyï¼‰æ˜¯ä¸€ç§ç”¨äºèµ„è®¯æ£€ç´¢ä¸èµ„è®¯æ¢å‹˜çš„å¸¸ç”¨åŠ æƒæŠ€æœ¯, TFIDFçš„ä¸»è¦æ€æƒ³æ˜¯ï¼šå¦‚æœæŸä¸ªè¯æˆ–çŸ­è¯­åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°çš„é¢‘ç‡TFé«˜ï¼Œå¹¶ä¸”åœ¨å…¶ä»–æ–‡ç« ä¸­å¾ˆå°‘å‡ºç°ï¼Œåˆ™è®¤ä¸ºæ­¤è¯æˆ–è€…çŸ­è¯­å…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ï¼Œé€‚åˆç”¨æ¥åˆ†ç±»ã€‚TFIDFå®é™…ä¸Šæ˜¯ï¼šTF * IDFï¼ŒTFè¯é¢‘(Term Frequency)ï¼ŒIDFåæ–‡æ¡£é¢‘ç‡(Inverse Document Frequency)ã€‚TFè¡¨ç¤ºè¯æ¡åœ¨æ–‡æ¡£dä¸­å‡ºç°çš„é¢‘ç‡ã€‚IDFçš„ä¸»è¦æ€æƒ³æ˜¯ï¼šå¦‚æœåŒ…å«è¯æ¡tçš„æ–‡æ¡£è¶Šå°‘ï¼Œä¹Ÿå°±æ˜¯nè¶Šå°ï¼ŒIDFè¶Šå¤§ï¼Œåˆ™è¯´æ˜è¯æ¡tå…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ã€‚å¦‚æœæŸä¸€ç±»æ–‡æ¡£Cä¸­åŒ…å«è¯æ¡tçš„æ–‡æ¡£æ•°ä¸ºmï¼Œè€Œå…¶å®ƒç±»åŒ…å«tçš„æ–‡æ¡£æ€»æ•°ä¸ºkï¼Œæ˜¾ç„¶æ‰€æœ‰åŒ…å«tçš„æ–‡æ¡£æ•°n=m + kï¼Œå½“må¤§çš„æ—¶å€™ï¼Œnä¹Ÿå¤§ï¼ŒæŒ‰ç…§IDFå…¬å¼å¾—åˆ°çš„IDFçš„å€¼ä¼šå°ï¼Œå°±è¯´æ˜è¯¥è¯æ¡tç±»åˆ«åŒºåˆ†èƒ½åŠ›ä¸å¼ºã€‚ä½†æ˜¯å®é™…ä¸Šï¼Œå¦‚æœä¸€ä¸ªè¯æ¡åœ¨ä¸€ä¸ªç±»çš„æ–‡æ¡£ä¸­é¢‘ç¹å‡ºç°ï¼Œåˆ™è¯´æ˜è¯¥è¯æ¡èƒ½å¤Ÿå¾ˆå¥½ä»£è¡¨è¿™ä¸ªç±»çš„æ–‡æœ¬çš„ç‰¹å¾ï¼Œè¿™æ ·çš„è¯æ¡åº”è¯¥ç»™å®ƒä»¬èµ‹äºˆè¾ƒé«˜çš„æƒé‡ï¼Œå¹¶é€‰æ¥ä½œä¸ºè¯¥ç±»æ–‡æœ¬çš„ç‰¹å¾è¯ä»¥åŒºåˆ«ä¸å…¶å®ƒç±»æ–‡æ¡£ã€‚è¿™å°±æ˜¯IDFçš„ä¸è¶³ä¹‹å¤„ã€‚</p><p><strong>TFå…¬å¼ï¼š</strong></p><p><img src="https://wx3.sinaimg.cn/mw690/e0db46edgy1fraxzqql9wj20au03i747.jpg" align="center"></p><p>ä»¥ä¸Šå¼å­ä¸­$n_i,j$æ˜¯è¯¥è¯åœ¨æ–‡ä»¶$d_j$ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œè€Œåˆ†æ¯åˆ™æ˜¯åœ¨æ–‡ä»¶$d_j$ä¸­æ‰€æœ‰å­—è¯çš„å‡ºç°æ¬¡æ•°ä¹‹å’Œã€‚</p><p><strong>IDFå…¬å¼ï¼š</strong></p><p><img src="https://wx2.sinaimg.cn/mw690/e0db46edgy1fraxzqr8tdj210p0a20u7.jpg" align="center"></p><h2 id="ä¸‰ã€-ç®€å•æ¡ˆä¾‹ç†è§£"><a href="#ä¸‰ã€-ç®€å•æ¡ˆä¾‹ç†è§£" class="headerlink" title="ä¸‰ã€ ç®€å•æ¡ˆä¾‹ç†è§£"></a>ä¸‰ã€ ç®€å•æ¡ˆä¾‹ç†è§£</h2><p>å‡å¦‚ä¸€ç¯‡æ–‡ä»¶çš„æ€»è¯è¯­æ•°æ˜¯100ä¸ªï¼Œè€Œè¯è¯­â€œæ¯ç‰›â€å‡ºç°äº†3æ¬¡ï¼Œé‚£ä¹ˆâ€œæ¯ç‰›â€ä¸€è¯åœ¨è¯¥æ–‡ä»¶ä¸­çš„è¯é¢‘å°±æ˜¯3/100=0.03ã€‚ä¸€ä¸ªè®¡ç®—æ–‡ä»¶é¢‘ç‡ (DF) çš„æ–¹æ³•æ˜¯æµ‹å®šæœ‰å¤šå°‘ä»½æ–‡ä»¶å‡ºç°è¿‡â€œæ¯ç‰›â€ä¸€è¯ï¼Œç„¶åé™¤ä»¥æ–‡ä»¶é›†é‡ŒåŒ…å«çš„æ–‡ä»¶æ€»æ•°ã€‚æ‰€ä»¥ï¼Œå¦‚æœâ€œæ¯ç‰›â€ä¸€è¯åœ¨1,000ä»½æ–‡ä»¶å‡ºç°è¿‡ï¼Œè€Œæ–‡ä»¶æ€»æ•°æ˜¯10,000,000ä»½çš„è¯ï¼Œå…¶é€†å‘æ–‡ä»¶é¢‘ç‡å°±æ˜¯ lg(10,000,000 / 1,000)=4ã€‚æœ€åçš„TF-IDFçš„åˆ†æ•°ä¸º0.03 * 4=0.12ã€‚</p><h2 id="å››ã€-ç»“æŸè¯­"><a href="#å››ã€-ç»“æŸè¯­" class="headerlink" title="å››ã€ ç»“æŸè¯­"></a>å››ã€ ç»“æŸè¯­</h2><p><code>markdown</code>å†™å…¬å¼æ²¡æœ‰åŠ è½½å‡ºæ¥ï¼Œä¸çŸ¥é“å’‹å›äº‹ï½å¯èƒ½æ¨¡æ¿çš„é”…ã€‚</p><p><code>LaTex</code>å†™å…¬å¼çœŸæ–¹ä¾¿å•Šï½ï½ï½</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¸€ã€-å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€ å‰è¨€&lt;/h2&gt;&lt;p&gt;&amp;emsp;æœ€è¿‘åœ¨çœ‹å…³äºç‰¹å¾æŠ½å–çš„è®ºæ–‡ï¼Œå¸Œæœ›èƒ½ä»ä¸­æ‰¾åˆ°ä¸€äº›æ–¹æ³•æ¥åšæ•°æ®æŠ„è¢­æ£€æµ‹ï¼Œçœ‹åˆ°äº†ä¸€ç¯‡å…³äºä¸­æ–‡æ–‡æœ¬å¤åˆ¶æ£€æµ‹çš„æ–‡ç« ï¼Œé‡Œé¢ç”¨åˆ°äº†TF-IDFç®—æ³•ï¼ŒæŸ¥æ‰¾äº†äº›èµ„æ–™ï¼ŒæŠŠå®ƒæ•´ç†äº†ä¸€ä¸‹ï½ï½&lt;br&gt;
    
    </summary>
    
      <category term="Machine Learning" scheme="http://heany.github.io/categories/Machine-Learning/"/>
    
    
      <category term="TF-IDF-Algorithm" scheme="http://heany.github.io/tags/TF-IDF-Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>åˆ é™¤Github.comä¸Šrepositoryä¸­çš„æŸä¸ªæ–‡ä»¶å¤¹</title>
    <link href="http://heany.github.io/2018/04/18/%E5%88%A0%E9%99%A4Github-com%E4%B8%8Arepository%E4%B8%AD%E7%9A%84%E6%9F%90%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9/"/>
    <id>http://heany.github.io/2018/04/18/åˆ é™¤Github-comä¸Šrepositoryä¸­çš„æŸä¸ªæ–‡ä»¶å¤¹/</id>
    <published>2018-04-18T11:28:46.000Z</published>
    <updated>2019-01-26T14:47:30.579Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€-å‰è¨€"><a href="#ä¸€ã€-å‰è¨€" class="headerlink" title="ä¸€ã€ å‰è¨€"></a>ä¸€ã€ å‰è¨€</h2><p>&emsp;æœ€è¿‘ä¸Šä¼ é¡¹ç›®çš„æ—¶å€™ï¼Œç²—å¿ƒå¤§æ„ï½å¿˜è®°å°†ä¸€äº›éœ€è¦å¿½ç•¥çš„æ–‡ä»¶å¤¹åŠ è¿›<code>.gitignore</code>æ–‡ä»¶ä¸­ï¼ï¼ï¼å¯¼è‡´æŠŠé¡¹ç›®ä¸­æ‰€æœ‰æ–‡ä»¶éƒ½ä¸Šä¼ åˆ°<code>github.com</code>ä¸Šå»äº†ï¼Œå…¶ä¸­æœ‰ä¸€äº›æ–‡ä»¶æˆ‘å¹¶ä¸æƒ³ä¸Šä¼ ä¸Šå»ã€‚<a id="more"></a>æ‰€ä»¥å‘¢ï¼Ÿæˆ‘ç°åœ¨æƒ³è¦æŠŠä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆä¾‹å¦‚<code>bigData</code>ï¼‰åœ¨<code>github</code>åˆ é™¤ï¼Œä½†æ˜¯åˆä¸æƒ³æŠŠæœ¬åœ°çš„<code>bigData</code>æ–‡ä»¶å¤¹åˆ æ‰ï½ä½†æ˜¯ï¼<code>github</code>ä¸Šé¢åªèƒ½åˆ é™¤æ–‡ä»¶ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œå¹¶ä¸æ”¯æŒåˆ é™¤æ–‡ä»¶å¤¹ã€‚</p><p><img src="https://wx1.sinaimg.cn/mw690/e0db46edgy1fqh1t1v3g5j20rk08lmyh.jpg" align="center"></p><h2 id="äºŒã€é‡‡ç”¨gitæŒ‡ä»¤æ¥è¿›è¡Œåˆ é™¤æ“ä½œ"><a href="#äºŒã€é‡‡ç”¨gitæŒ‡ä»¤æ¥è¿›è¡Œåˆ é™¤æ“ä½œ" class="headerlink" title="äºŒã€é‡‡ç”¨gitæŒ‡ä»¤æ¥è¿›è¡Œåˆ é™¤æ“ä½œ"></a>äºŒã€é‡‡ç”¨<code>git</code>æŒ‡ä»¤æ¥è¿›è¡Œåˆ é™¤æ“ä½œ</h2><p><strong>ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼šï¼ˆä»¥åˆ é™¤bigDataæ–‡ä»¶å¤¹ä¸ºä¾‹ï¼‰</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¦–å…ˆåˆ‡æ¢åˆ°æœ¬åœ°å·¥ä½œç›®å½•ï¼Œä¹Ÿå°±æ˜¯ä¸githubä¸Šå¯¹åº”çš„é‚£ä¸ªç›®å½•ã€‚</span></span><br><span class="line"><span class="built_in">cd</span> dir/</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç„¶åæ‰§è¡Œä¸‹é¢çš„gitå‘½ä»¤</span></span><br><span class="line">git rm -r --cached bigData    <span class="comment"># --cachedä¸ä¼šæŠŠæœ¬åœ°çš„bigDataåˆ é™¤</span></span><br><span class="line">git commit -m <span class="string">"delete bigData dir"</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¸€ã€-å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€ å‰è¨€&lt;/h2&gt;&lt;p&gt;&amp;emsp;æœ€è¿‘ä¸Šä¼ é¡¹ç›®çš„æ—¶å€™ï¼Œç²—å¿ƒå¤§æ„ï½å¿˜è®°å°†ä¸€äº›éœ€è¦å¿½ç•¥çš„æ–‡ä»¶å¤¹åŠ è¿›&lt;code&gt;.gitignore&lt;/code&gt;æ–‡ä»¶ä¸­ï¼ï¼ï¼å¯¼è‡´æŠŠé¡¹ç›®ä¸­æ‰€æœ‰æ–‡ä»¶éƒ½ä¸Šä¼ åˆ°&lt;code&gt;github.com&lt;/code&gt;ä¸Šå»äº†ï¼Œå…¶ä¸­æœ‰ä¸€äº›æ–‡ä»¶æˆ‘å¹¶ä¸æƒ³ä¸Šä¼ ä¸Šå»ã€‚
    
    </summary>
    
      <category term="Github" scheme="http://heany.github.io/categories/Github/"/>
    
    
      <category term="git" scheme="http://heany.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>DockeræŠ€æœ¯å­¦ä¹ </title>
    <link href="http://heany.github.io/2018/04/16/Docker%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    <id>http://heany.github.io/2018/04/16/DockeræŠ€æœ¯å­¦ä¹ /</id>
    <published>2018-04-16T07:20:03.000Z</published>
    <updated>2019-01-26T14:47:30.577Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€-å‰è¨€"><a href="#ä¸€ã€-å‰è¨€" class="headerlink" title="ä¸€ã€ å‰è¨€"></a>ä¸€ã€ å‰è¨€</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“è½¯ä»¶å¼€å‘æœ€å¤§çš„éº»çƒ¦äº‹ä¹‹ä¸€ï¼Œå°±æ˜¯ç¯å¢ƒé…ç½®ã€‚ç”¨æˆ·è®¡ç®—æœºçš„ç¯å¢ƒéƒ½ä¸ç›¸åŒï¼Œä½ æ€ä¹ˆçŸ¥é“è‡ªå®¶çš„è½¯ä»¶ï¼Œèƒ½åœ¨é‚£äº›æœºå™¨è·‘èµ·æ¥ï¼Ÿ</p><p>ç”¨æˆ·å¿…é¡»ä¿è¯ä¸¤ä»¶äº‹ï¼šæ“ä½œç³»ç»Ÿçš„è®¾ç½®ï¼Œå„ç§åº“å’Œç»„ä»¶çš„å®‰è£…ã€‚åªæœ‰å®ƒä»¬éƒ½æ­£ç¡®ï¼Œè½¯ä»¶æ‰èƒ½è¿è¡Œã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå®‰è£…ä¸€ä¸ª Python åº”ç”¨ï¼Œè®¡ç®—æœºå¿…é¡»æœ‰ Python å¼•æ“ï¼Œè¿˜å¿…é¡»æœ‰å„ç§ä¾èµ–ï¼Œå¯èƒ½è¿˜è¦é…ç½®ç¯å¢ƒå˜é‡ã€‚</p><p>å¦‚æœæŸäº›è€æ—§çš„æ¨¡å—ä¸å½“å‰ç¯å¢ƒä¸å…¼å®¹ï¼Œé‚£å°±éº»çƒ¦äº†ã€‚å¼€å‘è€…å¸¸å¸¸ä¼šè¯´ï¼šâ€å®ƒåœ¨æˆ‘çš„æœºå™¨å¯ä»¥è·‘äº†â€ï¼ˆIt works on my machineï¼‰ï¼Œè¨€ä¸‹ä¹‹æ„å°±æ˜¯ï¼Œå…¶ä»–æœºå™¨å¾ˆå¯èƒ½è·‘ä¸äº†ã€‚</p><p>ç¯å¢ƒé…ç½®å¦‚æ­¤éº»çƒ¦ï¼Œæ¢ä¸€å°æœºå™¨ï¼Œå°±è¦é‡æ¥ä¸€æ¬¡ï¼Œæ—·æ—¥è´¹æ—¶ã€‚å¾ˆå¤šäººæƒ³åˆ°ï¼Œèƒ½ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ï¼Œè½¯ä»¶å¯ä»¥å¸¦ç¯å¢ƒå®‰è£…ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œå®‰è£…çš„æ—¶å€™ï¼ŒæŠŠåŸå§‹ç¯å¢ƒä¸€æ¨¡ä¸€æ ·åœ°å¤åˆ¶è¿‡æ¥ã€‚</p><p>è™šæ‹Ÿæœºï¼ˆvirtual machineï¼‰å°±æ˜¯å¸¦ç¯å¢ƒå®‰è£…çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚å®ƒå¯ä»¥åœ¨ä¸€ç§æ“ä½œç³»ç»Ÿé‡Œé¢è¿è¡Œå¦ä¸€ç§æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚åœ¨ Windows ç³»ç»Ÿé‡Œé¢è¿è¡Œ Linux ç³»ç»Ÿã€‚åº”ç”¨ç¨‹åºå¯¹æ­¤æ¯«æ— æ„ŸçŸ¥ï¼Œå› ä¸ºè™šæ‹Ÿæœºçœ‹ä¸Šå»è·ŸçœŸå®ç³»ç»Ÿä¸€æ¨¡ä¸€æ ·ï¼Œè€Œå¯¹äºåº•å±‚ç³»ç»Ÿæ¥è¯´ï¼Œè™šæ‹Ÿæœºå°±æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œä¸éœ€è¦äº†å°±åˆ æ‰ï¼Œå¯¹å…¶ä»–éƒ¨åˆ†æ¯«æ— å½±å“ã€‚è™½ç„¶ç”¨æˆ·å¯ä»¥é€šè¿‡è™šæ‹Ÿæœºè¿˜åŸè½¯ä»¶çš„åŸå§‹ç¯å¢ƒï¼Œä½†æ˜¯è™šæ‹Ÿæœºå´æœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œèµ„æºå ç”¨è¾ƒå¤šï¼Œæ‹–æ…¢è®¡ç®—æœºçš„è¿è¡Œé€Ÿåº¦ï¼Œ<br>å†—ä½™æ­¥éª¤å¤š;å¯åŠ¨å¾ˆæ…¢ç­‰ã€‚ç»“æ„å¯¹æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://wx3.sinaimg.cn/mw1024/e0db46edgy1fqek1ao1k6j20kt0e8dhv.jpg" align="center"></p><p>ç”±äºè™šæ‹Ÿæœºå­˜åœ¨è¿™äº›ç¼ºç‚¹ï¼ŒLinux å‘å±•å‡ºäº†å¦ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼šLinux å®¹å™¨ï¼ˆLinux Containersï¼Œç¼©å†™ä¸º LXCï¼‰ã€‚</p><p>Linux å®¹å™¨ä¸æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œè€Œæ˜¯å¯¹è¿›ç¨‹è¿›è¡Œéš”ç¦»ã€‚æˆ–è€…è¯´ï¼Œåœ¨æ­£å¸¸è¿›ç¨‹çš„å¤–é¢å¥—äº†ä¸€ä¸ªä¿æŠ¤å±‚ã€‚å¯¹äºå®¹å™¨é‡Œé¢çš„è¿›ç¨‹æ¥è¯´ï¼Œå®ƒæ¥è§¦åˆ°çš„å„ç§èµ„æºéƒ½æ˜¯è™šæ‹Ÿçš„ï¼Œä»è€Œå®ç°ä¸åº•å±‚ç³»ç»Ÿçš„éš”ç¦»ã€‚ç”±äº<strong>å®¹å™¨</strong>æ˜¯è¿›ç¨‹çº§åˆ«çš„ï¼Œç›¸æ¯”è™šæ‹Ÿæœºæœ‰å¾ˆå¤šä¼˜åŠ¿ã€‚ä¾‹å¦‚ï¼šå¯åŠ¨å¾ˆå¿«ï¼Œèµ„æºå ç”¨å°‘;ä½“ç§¯å¾ˆå°ã€‚å®¹å™¨å°±åƒæ˜¯è½»é‡çº§çš„è™šæ‹Ÿæœºï¼Œèƒ½å¤Ÿæä¾›è™šæ‹ŸåŒ–çš„ç¯å¢ƒï¼Œä½†æ˜¯æˆæœ¬å¼€é”€æ¯”è™šæ‹Ÿæœºè¦å°å¾—å¤šã€‚</p><h2 id="äºŒã€-Dockeræ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#äºŒã€-Dockeræ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="äºŒã€ Dockeræ˜¯ä»€ä¹ˆï¼Ÿ"></a>äºŒã€ Dockeræ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><strong>Dockerå±äºLinuxå®¹å™¨çš„ä¸€ç§å°è£…ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£</strong>ã€‚å®ƒæ˜¯ç›®å‰æœ€æµè¡Œçš„ Linux å®¹å™¨è§£å†³æ–¹æ¡ˆã€‚</p><p>Docker å°†åº”ç”¨ç¨‹åºä¸è¯¥ç¨‹åºçš„ä¾èµ–ï¼Œæ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå®¹å™¨ã€‚ç¨‹åºåœ¨è¿™ä¸ªè™šæ‹Ÿå®¹å™¨é‡Œè¿è¡Œï¼Œå°±å¥½åƒåœ¨çœŸå®çš„ç‰©ç†æœºä¸Šè¿è¡Œä¸€æ ·ã€‚æœ‰äº† Dockerï¼Œå°±ä¸ç”¨æ‹…å¿ƒç¯å¢ƒé—®é¢˜ã€‚</p><p>æ€»ä½“æ¥è¯´ï¼ŒDocker çš„æ¥å£ç›¸å½“ç®€å•ï¼Œç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°åˆ›å»ºå’Œä½¿ç”¨å®¹å™¨ï¼ŒæŠŠè‡ªå·±çš„åº”ç”¨æ”¾å…¥å®¹å™¨ã€‚å®¹å™¨è¿˜å¯ä»¥è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€å¤åˆ¶ã€åˆ†äº«ã€ä¿®æ”¹ï¼Œå°±åƒç®¡ç†æ™®é€šçš„ä»£ç ä¸€æ ·ã€‚</p><h2 id="ä¸‰ã€-åŸºæœ¬æ¦‚å¿µ"><a href="#ä¸‰ã€-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ä¸‰ã€ åŸºæœ¬æ¦‚å¿µ"></a>ä¸‰ã€ åŸºæœ¬æ¦‚å¿µ</h2><p>DockeråŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µï¼š</p><ul><li>é•œåƒï¼ˆImageï¼‰</li><li>å®¹å™¨ï¼ˆContainerï¼‰</li><li>ä»“åº“ï¼ˆRepositoryï¼‰</li></ul><p>ç†è§£äº†è¿™ä¸‰ä¸ªæ¦‚å¿µï¼Œä¹Ÿå°±ç†è§£äº†Dockerçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p><h3 id="3-1ã€-Dockeré•œåƒï¼ˆImageï¼‰"><a href="#3-1ã€-Dockeré•œåƒï¼ˆImageï¼‰" class="headerlink" title="3.1ã€ Dockeré•œåƒï¼ˆImageï¼‰"></a>3.1ã€ <code>Docker</code>é•œåƒï¼ˆImageï¼‰</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“,æ“ä½œç³»ç»Ÿåˆ†ä¸ºå†…æ ¸å’Œç”¨æˆ·ç©ºé—´ã€‚å¯¹äºLinuxè€Œè¨€,å†…æ ¸å¯åŠ¨å,ä¼šæŒ‚è½½rootæ–‡ä»¶ç³»ç»Ÿä¸ºå…¶æä¾›ç”¨æˆ·ç©ºé—´æ”¯æŒã€‚è€Œ Docker é•œåƒ(Image),å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ<code>ubuntu:16.04</code>å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥—<code>Ubuntu 16.04</code>æœ€å°ç³»ç»Ÿçš„<code>root</code>æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>Docker é•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿ,é™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–,è¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°(å¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰)ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®,å…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚</p><h4 id="åˆ†å±‚å­˜å‚¨"><a href="#åˆ†å±‚å­˜å‚¨" class="headerlink" title="åˆ†å±‚å­˜å‚¨"></a>åˆ†å±‚å­˜å‚¨</h4><p>å› ä¸ºé•œåƒåŒ…å«æ“ä½œç³»ç»Ÿå®Œæ•´çš„<code>root</code>æ–‡ä»¶ç³»ç»Ÿ,å…¶ä½“ç§¯å¾€å¾€æ˜¯åºå¤§çš„,å› æ­¤åœ¨<code>Docker</code>è®¾è®¡æ—¶,å°±å……åˆ†åˆ©ç”¨<code>Union FS</code>çš„æŠ€æœ¯,å°†å…¶è®¾è®¡ä¸ºåˆ†å±‚å­˜å‚¨çš„æ¶æ„ã€‚æ‰€ä»¥ä¸¥æ ¼æ¥è¯´,é•œåƒå¹¶éæ˜¯åƒä¸€ä¸ª<code>ISO</code>é‚£æ ·çš„æ‰“åŒ…æ–‡ä»¶,é•œåƒåªæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„æ¦‚å¿µ,å…¶å®é™…ä½“ç°å¹¶éç”±ä¸€ä¸ªæ–‡ä»¶ç»„æˆ,è€Œæ˜¯ç”±ä¸€ç»„æ–‡ä»¶ç³»ç»Ÿç»„æˆ,æˆ–è€…è¯´,ç”±å¤šå±‚æ–‡ä»¶ç³»ç»Ÿè”åˆç»„æˆã€‚</p><p>é•œåƒæ„å»ºæ—¶,ä¼šä¸€å±‚å±‚æ„å»º,å‰ä¸€å±‚æ˜¯åä¸€å±‚çš„åŸºç¡€ã€‚æ¯ä¸€å±‚æ„å»ºå®Œå°±ä¸ä¼šå†å‘ç”Ÿæ”¹å˜,åä¸€å±‚ä¸Šçš„ä»»ä½•æ”¹å˜åªå‘ç”Ÿåœ¨è‡ªå·±è¿™ä¸€å±‚ã€‚æ¯”å¦‚,åˆ é™¤å‰ä¸€å±‚æ–‡ä»¶çš„æ“ä½œ,å®é™…ä¸æ˜¯çœŸçš„åˆ é™¤å‰ä¸€å±‚çš„æ–‡ä»¶,è€Œæ˜¯ä»…åœ¨å½“å‰å±‚æ ‡è®°ä¸ºè¯¥æ–‡ä»¶å·²åˆ é™¤ã€‚åœ¨æœ€ç»ˆå®¹å™¨è¿è¡Œçš„æ—¶å€™,è™½ç„¶ä¸ä¼šçœ‹åˆ°è¿™ä¸ªæ–‡ä»¶,ä½†æ˜¯å®é™…ä¸Šè¯¥æ–‡ä»¶ä¼šä¸€ç›´è·Ÿéšé•œåƒã€‚å› æ­¤,åœ¨æ„å»ºé•œåƒçš„æ—¶å€™,éœ€è¦é¢å¤–å°å¿ƒ,æ¯ä¸€å±‚å°½é‡åªåŒ…å«è¯¥å±‚éœ€è¦æ·»åŠ çš„ä¸œè¥¿,ä»»ä½•é¢å¤–çš„ä¸œè¥¿åº”è¯¥åœ¨è¯¥å±‚æ„å»ºç»“æŸå‰æ¸…ç†æ‰ã€‚</p><p>åˆ†å±‚å­˜å‚¨çš„ç‰¹å¾è¿˜ä½¿å¾—é•œåƒçš„å¤ç”¨ã€å®šåˆ¶å˜çš„æ›´ä¸ºå®¹æ˜“ã€‚ç”šè‡³å¯ä»¥ç”¨ä¹‹å‰æ„å»ºå¥½çš„é•œåƒä½œä¸ºåŸºç¡€å±‚,ç„¶åè¿›ä¸€æ­¥æ·»åŠ æ–°çš„å±‚,ä»¥å®šåˆ¶è‡ªå·±æ‰€éœ€çš„å†…å®¹,æ„å»ºæ–°çš„é•œåƒã€‚</p><h3 id="3-2ã€-Dockerå®¹å™¨"><a href="#3-2ã€-Dockerå®¹å™¨" class="headerlink" title="3.2ã€ Dockerå®¹å™¨"></a>3.2ã€ <code>Docker</code>å®¹å™¨</h3><p>é•œåƒ(Image)å’Œå®¹å™¨(Container)çš„å…³ç³»,å°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€æ ·,é•œåƒæ˜¯é™æ€çš„å®šä¹‰,å®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</p><p>å®¹å™¨çš„å®è´¨æ˜¯è¿›ç¨‹,ä½†ä¸ç›´æ¥åœ¨å®¿ä¸»æ‰§è¡Œçš„è¿›ç¨‹ä¸åŒ,å®¹å™¨è¿›ç¨‹è¿è¡Œäºå±äºè‡ªå·±çš„ç‹¬ç«‹çš„å‘½åç©ºé—´ã€‚å› æ­¤å®¹å™¨å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„<code>root</code>æ–‡ä»¶ç³»ç»Ÿã€è‡ªå·±çš„ç½‘ç»œé…ç½®ã€è‡ªå·±çš„è¿›ç¨‹ç©ºé—´,ç”šè‡³è‡ªå·±çš„ç”¨æˆ·<code>ID</code>ç©ºé—´ã€‚å®¹å™¨å†…çš„è¿›ç¨‹æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒé‡Œ,ä½¿ç”¨èµ·æ¥,å°±å¥½åƒæ˜¯åœ¨ä¸€ä¸ªç‹¬ç«‹äºå®¿ä¸»çš„ç³»ç»Ÿä¸‹æ“ä½œä¸€æ ·ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—å®¹å™¨å°è£…çš„åº”ç”¨æ¯”ç›´æ¥åœ¨å®¿ä¸»è¿è¡Œæ›´åŠ å®‰å…¨ã€‚ä¹Ÿå› ä¸ºè¿™ç§éš”ç¦»çš„ç‰¹æ€§,å¾ˆå¤šäººåˆå­¦<code>Docker</code>æ—¶å¸¸å¸¸ä¼šæ··æ·†å®¹å™¨å’Œè™šæ‹Ÿæœºã€‚</p><p>å‰é¢è®²è¿‡é•œåƒä½¿ç”¨çš„æ˜¯åˆ†å±‚å­˜å‚¨,å®¹å™¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æ¯ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶,æ˜¯ä»¥é•œåƒä¸ºåŸºç¡€å±‚,åœ¨å…¶ä¸Šåˆ›å»ºä¸€ä¸ªå½“å‰å®¹å™¨çš„å­˜å‚¨å±‚,æˆ‘ä»¬å¯ä»¥ç§°è¿™ä¸ª<strong>ä¸ºå®¹å™¨è¿è¡Œæ—¶è¯»å†™è€Œå‡†å¤‡çš„å­˜å‚¨å±‚ä¸ºå®¹å™¨å­˜å‚¨å±‚ã€‚</strong></p><p>å®¹å™¨å­˜å‚¨å±‚çš„ç”Ÿå­˜å‘¨æœŸå’Œå®¹å™¨ä¸€æ ·,å®¹å™¨æ¶ˆäº¡æ—¶,å®¹å™¨å­˜å‚¨å±‚ä¹Ÿéšä¹‹æ¶ˆäº¡ã€‚å› æ­¤,ä»»ä½•ä¿å­˜<br>äºå®¹å™¨å­˜å‚¨å±‚çš„ä¿¡æ¯éƒ½ä¼šéšå®¹å™¨åˆ é™¤è€Œä¸¢å¤±ã€‚</p><p>æŒ‰ç…§ Docker æœ€ä½³å®è·µçš„è¦æ±‚,å®¹å™¨ä¸åº”è¯¥å‘å…¶å­˜å‚¨å±‚å†…å†™å…¥ä»»ä½•æ•°æ®,å®¹å™¨å­˜å‚¨å±‚è¦ä¿æŒæ— <br>çŠ¶æ€åŒ–ã€‚æ‰€æœ‰çš„æ–‡ä»¶å†™å…¥æ“ä½œ,éƒ½åº”è¯¥ä½¿ç”¨æ•°æ®å·(Volume)ã€æˆ–è€…ç»‘å®šå®¿ä¸»ç›®å½•,åœ¨è¿™äº›ä½ç½®çš„è¯»å†™ä¼šè·³è¿‡å®¹å™¨å­˜å‚¨å±‚,ç›´æ¥å¯¹å®¿ä¸»(æˆ–ç½‘ç»œå­˜å‚¨)å‘ç”Ÿè¯»å†™,å…¶æ€§èƒ½å’Œç¨³å®šæ€§æ›´é«˜ã€‚</p><p>æ•°æ®å·çš„ç”Ÿå­˜å‘¨æœŸç‹¬ç«‹äºå®¹å™¨,å®¹å™¨æ¶ˆäº¡,æ•°æ®å·ä¸ä¼šæ¶ˆäº¡ã€‚å› æ­¤,ä½¿ç”¨æ•°æ®å·å,å®¹å™¨åˆ é™¤æˆ–è€…é‡æ–°è¿è¡Œä¹‹å,æ•°æ®å´ä¸ä¼šä¸¢å¤±ã€‚</p><h3 id="3-3ã€-Dockerä»“åº“ï¼ˆRegistryï¼‰"><a href="#3-3ã€-Dockerä»“åº“ï¼ˆRegistryï¼‰" class="headerlink" title="3.3ã€ Dockerä»“åº“ï¼ˆRegistryï¼‰"></a>3.3ã€ <code>Docker</code>ä»“åº“ï¼ˆRegistryï¼‰</h3><p>é•œåƒæ„å»ºå®Œæˆå,å¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨å½“å‰å®¿ä¸»æœºä¸Šè¿è¡Œ,ä½†æ˜¯,å¦‚æœéœ€è¦åœ¨å…¶å®ƒæœåŠ¡å™¨ä¸Šä½¿ç”¨è¿™ä¸ªé•œåƒ,æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªé›†ä¸­çš„å­˜å‚¨ã€åˆ†å‘é•œåƒçš„æœåŠ¡,Docker Registry å°±æ˜¯è¿™æ ·çš„æœåŠ¡ã€‚</p><p>ä¸€ä¸ª<code>Docker Registry</code>ä¸­å¯ä»¥åŒ…å«å¤šä¸ªä»“åº“(<code>Repository</code>);æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ªæ ‡ç­¾(<code>Tag</code>);æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚</p><p>é€šå¸¸,ä¸€ä¸ªä»“åº“ä¼šåŒ…å«åŒä¸€ä¸ªè½¯ä»¶ä¸åŒç‰ˆæœ¬çš„é•œåƒ,è€Œæ ‡ç­¾å°±å¸¸ç”¨äºå¯¹åº”è¯¥è½¯ä»¶çš„å„ä¸ªç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<br><code>&lt;ä»“åº“å&gt;:&lt;æ ‡ç­¾&gt;</code>çš„æ ¼å¼æ¥æŒ‡å®šå…·ä½“æ˜¯è¿™ä¸ªè½¯ä»¶å“ªä¸ªç‰ˆæœ¬çš„é•œåƒã€‚å¦‚æœä¸ç»™å‡ºæ ‡ç­¾,å°†ä»¥<code>latest</code>ä½œä¸ºé»˜è®¤æ ‡ç­¾ã€‚</p><p>ä»¥<code>Ubuntu</code>é•œåƒ ä¸ºä¾‹,<code>ubuntu</code>æ˜¯ä»“åº“çš„åå­—,å…¶å†…åŒ…å«æœ‰ä¸åŒçš„ç‰ˆæœ¬æ ‡ç­¾,å¦‚,<code>14.04</code>,<code>16.04</code>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>ubuntu:14.04</code>,æˆ–è€…<code>ubuntu:16.04</code>æ¥å…·ä½“æŒ‡å®šæ‰€éœ€å“ªä¸ªç‰ˆæœ¬çš„é•œåƒã€‚å¦‚æœå¿½ç•¥äº†æ ‡ç­¾,æ¯”å¦‚<code>ubuntu</code>,é‚£å°†è§†ä¸º<code>ubuntu:latest</code>ã€‚</p><p>ä»“åº“åç»å¸¸ä»¥ä¸¤æ®µå¼è·¯å¾„å½¢å¼å‡ºç°,æ¯”å¦‚<code>jwilder/nginx-proxy</code>,å‰è€…å¾€å¾€æ„å‘³ç€<code>Docker Registry</code>å¤šç”¨æˆ·ç¯å¢ƒä¸‹çš„ç”¨æˆ·å,åè€…åˆ™å¾€å¾€æ˜¯å¯¹åº”çš„è½¯ä»¶åã€‚ä½†è¿™å¹¶éç»å¯¹,å–å†³äºæ‰€ä½¿ç”¨çš„å…·ä½“<code>Docker Registry</code>çš„è½¯ä»¶æˆ–æœåŠ¡ã€‚</p><h4 id="3-3-1ã€-Docker-Registry-å…¬å¼€æœåŠ¡"><a href="#3-3-1ã€-Docker-Registry-å…¬å¼€æœåŠ¡" class="headerlink" title="3.3.1ã€ Docker Registry å…¬å¼€æœåŠ¡"></a>3.3.1ã€ Docker Registry å…¬å¼€æœåŠ¡</h4><p><code>Docker Registry</code>å…¬å¼€æœåŠ¡æ˜¯å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ã€å…è®¸ç”¨æˆ·ç®¡ç†é•œåƒçš„<code>Registry</code>æœåŠ¡ã€‚ä¸€èˆ¬è¿™ç±»<br>å…¬å¼€æœåŠ¡å…è®¸ç”¨æˆ·å…è´¹ä¸Šä¼ ã€ä¸‹è½½å…¬å¼€çš„é•œåƒ,å¹¶å¯èƒ½æä¾›æ”¶è´¹æœåŠ¡ä¾›ç”¨æˆ·ç®¡ç†ç§æœ‰é•œåƒã€‚</p><p>æœ€å¸¸ä½¿ç”¨çš„ <code>Registry</code>å…¬å¼€æœåŠ¡æ˜¯å®˜æ–¹çš„<code>Docker Hub</code>,è¿™ä¹Ÿæ˜¯é»˜è®¤çš„<code>Registry</code>,å¹¶æ‹¥æœ‰å¤§é‡çš„é«˜è´¨é‡çš„å®˜æ–¹é•œåƒã€‚é™¤æ­¤ä»¥å¤–,è¿˜æœ‰<code>CoreOS</code>çš„<code>Quay.io</code>,<code>CoreOS</code>ç›¸å…³çš„é•œåƒå­˜å‚¨åœ¨è¿™é‡Œ;Googleçš„<code>Google Container Registry</code>,<code>Kubernetes</code>çš„é•œåƒä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªæœåŠ¡ã€‚</p><p>ç”±äºæŸäº›åŸå› ,åœ¨å›½å†…è®¿é—®è¿™äº›æœåŠ¡å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ã€‚å›½å†…çš„ä¸€äº›äº‘æœåŠ¡å•†æä¾›äº†é’ˆå¯¹<code>Docker Hub</code>çš„é•œåƒæœåŠ¡(<code>Registry Mirror</code>),è¿™äº›é•œåƒæœåŠ¡è¢«ç§°ä¸ºåŠ é€Ÿå™¨ã€‚å¸¸è§çš„æœ‰é˜¿é‡Œäº‘åŠ é€Ÿå™¨ã€<code>DaoCloud</code>åŠ é€Ÿå™¨ ç­‰ã€‚ä½¿ç”¨åŠ é€Ÿå™¨ä¼šç›´æ¥ä»å›½å†…çš„åœ°å€ä¸‹è½½<code>Docker Hub</code>çš„é•œåƒ,æ¯”ç›´æ¥ä»<code>Docker Hub</code>ä¸‹è½½é€Ÿåº¦ä¼šæé«˜å¾ˆå¤šã€‚</p><p>å›½å†…ä¹Ÿæœ‰ä¸€äº›äº‘æœåŠ¡å•†æä¾›ç±»ä¼¼äº<code>Docker Hub</code>çš„å…¬å¼€æœåŠ¡ã€‚æ¯”å¦‚æ—¶é€Ÿäº‘é•œåƒä»“åº“ã€ç½‘æ˜“äº‘é•œåƒæœåŠ¡ã€<code>DaoCloud</code>åƒå¸‚åœºã€é˜¿é‡Œäº‘é•œåƒåº“ ç­‰ã€‚</p><h4 id="3-3-2ã€-ç§æœ‰-Docker-Registry"><a href="#3-3-2ã€-ç§æœ‰-Docker-Registry" class="headerlink" title="3.3.2ã€ ç§æœ‰ Docker Registry"></a>3.3.2ã€ ç§æœ‰ Docker Registry</h4><p>é™¤äº†ä½¿ç”¨å…¬å¼€æœåŠ¡å¤–,ç”¨æˆ·è¿˜å¯ä»¥åœ¨æœ¬åœ°æ­å»ºç§æœ‰<code>Docker Registry</code>ã€‚<code>Docker</code>å®˜æ–¹æä¾›äº†<code>Docker Registry</code>é•œåƒ,å¯ä»¥ç›´æ¥ä½¿ç”¨åšä¸ºç§æœ‰<code>Registry</code>æœåŠ¡ã€‚</p><p>å¼€æºçš„<code>Docker Registry</code>é•œåƒåªæä¾›äº†<code>Docker Registry API</code>çš„æœåŠ¡ç«¯å®ç°,è¶³ä»¥æ”¯æŒ<code>docker</code>å‘½ä»¤,ä¸å½±å“ä½¿ç”¨ã€‚ä½†ä¸åŒ…å«å›¾å½¢ç•Œé¢,ä»¥åŠé•œåƒç»´æŠ¤ã€ç”¨æˆ·ç®¡ç†ã€è®¿é—®æ§åˆ¶ç­‰é«˜çº§åŠŸèƒ½ã€‚åœ¨å®˜æ–¹çš„å•†ä¸šåŒ–ç‰ˆæœ¬<code>Docker Trusted Registry</code>ä¸­,æä¾›äº†è¿™äº›é«˜çº§åŠŸèƒ½ã€‚</p><p>é™¤äº†å®˜æ–¹çš„<code>Docker Registry</code>å¤–,è¿˜æœ‰ç¬¬ä¸‰æ–¹è½¯ä»¶å®ç°äº†<code>Docker Registry API</code>,ç”šè‡³æä¾›äº†ç”¨<br>æˆ·ç•Œé¢ä»¥åŠä¸€äº›é«˜çº§åŠŸèƒ½ã€‚æ¯”å¦‚,<code>VMWare Harbor</code>å’Œ<code>Sonatype Nexus</code>ã€‚</p><h2 id="å››ã€-Dockerçš„å®‰è£…"><a href="#å››ã€-Dockerçš„å®‰è£…" class="headerlink" title="å››ã€ Dockerçš„å®‰è£…"></a>å››ã€ <code>Docker</code>çš„å®‰è£…</h2><p><code>Docker</code>æ˜¯ä¸€ä¸ªå¼€æºçš„å•†ä¸šäº§å“ã€‚<code>Docker CE</code>ï¼ˆç¤¾åŒºç‰ˆï¼‰å®‰è£…å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p><p><a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">Ubuntu</a></p><p><strong>ä½¿ç”¨äº†å›½å†…æº</strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get <span class="keyword">update</span></span><br><span class="line"></span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> \</span><br><span class="line">apt-transport-https \</span><br><span class="line">ca-certificates \</span><br><span class="line">curl \</span><br><span class="line">software-properties-common</span><br><span class="line"></span><br><span class="line">curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-<span class="keyword">key</span> <span class="keyword">add</span></span><br><span class="line"></span><br><span class="line"> sudo <span class="keyword">add</span>-apt-repository \</span><br><span class="line"><span class="string">"deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu \</span></span><br><span class="line"><span class="string">$(lsb_release -cs) \</span></span><br><span class="line"><span class="string">stable"</span></span><br><span class="line"></span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">update</span></span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> docker-ce</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨docker</span></span><br><span class="line">sudo systemctl <span class="keyword">enable</span> docker</span><br><span class="line">sudo systemctl <span class="keyword">start</span> docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹dockerç”¨æˆ·ç»„</span></span><br><span class="line">sudo groupadd docker</span><br><span class="line">sudo usermod -aG docker $<span class="keyword">USER</span></span><br></pre></td></tr></table></figure></p><p>å®‰è£…å®Œæˆåï¼Œéœ€é…ç½®å›½å†…é•œåƒåŠ é€Ÿ,<a href="https://github.com/yeasy/docker_practice/blob/master/install/mirror.md" target="_blank" rel="noopener">å‚è€ƒè¿™ç¯‡æ–‡ç« </a>ï¼š</p><blockquote><p> åœ¨<code>/etc/docker/daemon.json</code>ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨è¯·æ–°å»ºè¯¥æ–‡ä»¶ï¼‰</p></blockquote><pre><code>{    &quot;registry-mirrors&quot;: [        &quot;https://registry.docker-cn.com&quot;    ]}</code></pre><p>ä¹‹åé‡æ–°å¯åŠ¨dockeræœåŠ¡ï¼š</p><pre><code>sudo systemctl daemon-reloadsudo systemctl restart docker</code></pre><p>æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆï¼š</p><pre><code>sudo docker info# çœ‹åˆ°å¦‚ä¸‹å†…å®¹è¯´æ˜é…ç½®æˆåŠŸ Registry Mirrors:    https://registry.docker-cn.com/</code></pre><p><strong>æµ‹è¯•Dockeræ˜¯å¦å®‰è£…æ­£ç¡®</strong><br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br><span class="line"></span><br><span class="line"># output</span><br><span class="line">Unable <span class="keyword">to</span> <span class="keyword">find</span> image <span class="string">'hello-world:latest'</span> locally</span><br><span class="line">lates<span class="variable">t:</span> Pulling from library/hello-world</span><br><span class="line"><span class="number">9</span>bb5a5d4561<span class="variable">a:</span> Pull <span class="built_in">complete</span> </span><br><span class="line">Diges<span class="variable">t:</span> <span class="built_in">sha256</span>:f5233545e43561214ca4891fd1157e1c3c563316ed8e237750d59bde73361e77</span><br><span class="line">Statu<span class="variable">s:</span> Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears <span class="keyword">to</span> <span class="keyword">be</span> working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following step<span class="variable">s:</span></span><br><span class="line"> <span class="number">1</span>. The Docker client contacted the Docker daemon.</span><br><span class="line">          ...........</span><br></pre></td></tr></table></figure></p><h2 id="äº”ã€-Imageæ–‡ä»¶"><a href="#äº”ã€-Imageæ–‡ä»¶" class="headerlink" title="äº”ã€ Imageæ–‡ä»¶"></a>äº”ã€ <code>Image</code>æ–‡ä»¶</h2><p><strong>DockeræŠŠåº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–ï¼Œæ‰“åŒ…åœ¨ image æ–‡ä»¶é‡Œé¢ã€‚</strong>åªæœ‰é€šè¿‡è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰èƒ½ç”Ÿæˆ Docker å®¹å™¨ã€‚image æ–‡ä»¶å¯ä»¥çœ‹ä½œæ˜¯å®¹å™¨çš„æ¨¡æ¿ã€‚Docker æ ¹æ® image æ–‡ä»¶ç”Ÿæˆå®¹å™¨çš„å®ä¾‹ã€‚åŒä¸€ä¸ª image æ–‡ä»¶ï¼Œå¯ä»¥ç”Ÿæˆå¤šä¸ªåŒæ—¶è¿è¡Œçš„å®¹å™¨å®ä¾‹ã€‚</p><p>image æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å®é™…å¼€å‘ä¸­ï¼Œä¸€ä¸ªimageæ–‡ä»¶å¾€å¾€é€šè¿‡ç»§æ‰¿å¦ä¸€ä¸ªimageæ–‡ä»¶ï¼ŒåŠ ä¸Šä¸€äº›ä¸ªæ€§åŒ–è®¾ç½®è€Œç”Ÿæˆã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä½ å¯ä»¥åœ¨ Ubuntu çš„ image åŸºç¡€ä¸Šï¼Œå¾€é‡Œé¢åŠ å…¥ Apache æœåŠ¡å™¨ï¼Œå½¢æˆä½ çš„imageã€‚<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># åˆ—å‡ºæœ¬æœºæ‰€æœ‰çš„<span class="keyword">image</span>æ–‡ä»¶</span><br><span class="line">docker <span class="keyword">image</span> <span class="keyword">ls</span></span><br><span class="line"></span><br><span class="line"># åˆ é™¤<span class="keyword">image</span>æ–‡ä»¶</span><br><span class="line">docker <span class="keyword">image</span> rm [imageName]</span><br></pre></td></tr></table></figure></p><p><strong>image æ–‡ä»¶æ˜¯é€šç”¨çš„ï¼Œä¸€å°æœºå™¨çš„imageæ–‡ä»¶æ‹·è´åˆ°å¦ä¸€å°æœºå™¨ï¼Œç…§æ ·å¯ä»¥ä½¿ç”¨ã€‚</strong>ä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡ä½¿ç”¨åˆ«äººåˆ¶ä½œå¥½çš„imageæ–‡ä»¶ï¼Œè€Œä¸æ˜¯è‡ªå·±åˆ¶ä½œã€‚å³ä½¿è¦å®šåˆ¶ï¼Œä¹Ÿåº”è¯¥åŸºäºåˆ«äººçš„ image æ–‡ä»¶è¿›è¡ŒåŠ å·¥ï¼Œè€Œä¸æ˜¯ä»é›¶å¼€å§‹åˆ¶ä½œã€‚</p><p>ä¸ºäº†æ–¹ä¾¿å…±äº«ï¼Œimage æ–‡ä»¶åˆ¶ä½œå®Œæˆåï¼Œå¯ä»¥ä¸Šä¼ åˆ°ç½‘ä¸Šçš„ä»“åº“ã€‚Docker çš„å®˜æ–¹ä»“åº“<code>Docker Hub</code> æ˜¯æœ€é‡è¦ã€æœ€å¸¸ç”¨çš„ image ä»“åº“ã€‚æ­¤å¤–ï¼Œå‡ºå”®è‡ªå·±åˆ¶ä½œçš„ image æ–‡ä»¶ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>å°†imageæ–‡ä»¶ä»ä»“åº“æŠ“å–åˆ°æœ¬åœ°ã€‚</p><pre><code>docker image pull library/hello-world# docker image pull æ˜¯æŠ“å–imageçš„å‘½ä»¤ã€‚library/hello-worldæ˜¯imageæ–‡ä»¶åœ¨ä»“åº“é‡Œé¢çš„ä½ç½®ï¼Œå…¶ä¸­libraryæ˜¯imageæ–‡ä»¶æ‰€åœ¨çš„ç»„ï¼Œhello-worldæ˜¯imageçš„åå­—ã€‚</code></pre><p>ç”±äºDockerå®˜æ–¹æä¾›çš„imageæ–‡ä»¶ï¼Œéƒ½æ”¾åœ¨libraryç»„é‡Œé¢ï¼Œæ‰€ä»¥å®ƒæ˜¯é»˜è®¤ç»„ï¼Œå¯ä»¥çœç•¥ï¼Œå› æ­¤ï¼Œä¸Šé¢çš„å‘½ä»¤å¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ï¼š</p><pre><code>docker image pull hello-world</code></pre><p>æŠ“å–æˆåŠŸåï¼Œå°±å¯ä»¥åœ¨æœ¬æœºçœ‹åˆ°è¿™ä¸ªimageæ–‡ä»¶äº†</p><pre><code>docker image ls</code></pre><p>è¿è¡Œ<code>image</code>æ–‡ä»¶å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>docker container run hello-worldæˆ–è€…docker run hello-world</code></pre><blockquote><p> <code>docker container run</code>æˆ–è€…<code>docker run</code>å‘½ä»¤ä¼šä»imageæ–‡ä»¶ï¼Œç”Ÿæˆä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨å®ä¾‹ã€‚å¦‚æœæœ¬åœ°æ²¡æœ‰æ‰¾åˆ°imageæ–‡ä»¶ï¼Œdockerå°±ä¼šä»ä»“åº“è‡ªåŠ¨æŠ“å–imageæ–‡ä»¶ï¼Œå› æ­¤ï¼Œå‰é¢çš„<code>docker image pull</code>å‘½ä»¤ä¸æ˜¯å¿…éœ€çš„æ­¥éª¤ã€‚</p></blockquote><p><b style="color: red">æ³¨æ„:</b>æœ‰äº›å®¹å™¨ä¸ä¼šè‡ªåŠ¨ç»ˆæ­¢ï¼Œå¿…é¡»ä½¿ç”¨<code>docker container kill</code>å‘½ä»¤æ‰‹åŠ¨ç»ˆæ­¢ã€‚<code>docker container kill [containID]</code></p><h2 id="å…­ã€-å®¹å™¨æ–‡ä»¶"><a href="#å…­ã€-å®¹å™¨æ–‡ä»¶" class="headerlink" title="å…­ã€ å®¹å™¨æ–‡ä»¶"></a>å…­ã€ å®¹å™¨æ–‡ä»¶</h2><p><strong> <code>image</code>æ–‡ä»¶ç”Ÿæˆçš„å®¹å™¨å®ä¾‹ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç§°ä¸ºå®¹å™¨æ–‡ä»¶ã€‚</strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦å®¹å™¨ç”Ÿæˆï¼Œå°±ä¼šåŒæ—¶å­˜åœ¨ä¸¤ä¸ªæ–‡ä»¶ï¼šimageæ–‡ä»¶å’Œå®¹å™¨æ–‡ä»¶ã€‚è€Œä¸”å…³é—­å®¹å™¨å¹¶ä¸ä¼šåˆ é™¤å®¹å™¨æ–‡ä»¶ï¼Œåªæ˜¯å®¹å™¨åœæ­¢è¿è¡Œè€Œå·²ã€‚</p><pre><code># åˆ—å‡ºæœ¬æœºæ­£åœ¨è¿è¡Œçš„å®¹å™¨docker container ls## åˆ—å‡ºæœ¬æœºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬ç»ˆæ­¢è¿è¡Œçš„å®¹å™¨docker container ls -all## è¿è¡Œç»ˆæ­¢çš„å®¹å™¨æ–‡ä»¶ï¼Œä¾ç„¶ä¼šå æ®ç¡¬ç›˜ç©ºé—´ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤ã€‚docker container rm [containerID]</code></pre><p>å­¦ä¼šä½¿ç”¨imageæ–‡ä»¶ä»¥åï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ï¼Œå¦‚ä½•å¯ä»¥ç”Ÿæˆimageæ–‡ä»¶ï¼Ÿå¦‚æœä½ è¦æ¨å¹¿è‡ªå·±çš„è½¯ä»¶ï¼ŒåŠ¿å¿…è¦è‡ªå·±åˆ¶ä½œimage æ–‡ä»¶ã€‚è¿™å°±éœ€è¦ç”¨åˆ°<code>Dockerfile</code>æ–‡ä»¶ã€‚å®ƒæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç”¨æ¥é…ç½®imageã€‚Dockeræ ¹æ®è¯¥æ–‡ä»¶ç”ŸæˆäºŒè¿›åˆ¶çš„ image æ–‡ä»¶ã€‚ä¸‹ä¸€ç« å°†é€šè¿‡ä¸€ä¸ªå®ä¾‹æ¥ä»‹ç»å¦‚ä½•ç¼–å†™<code>Dockfile</code>æ–‡ä»¶ã€‚</p><h2 id="ä¸ƒã€-å®ä¾‹ï¼šåˆ¶ä½œè‡ªå·±çš„Dockerå®¹å™¨"><a href="#ä¸ƒã€-å®ä¾‹ï¼šåˆ¶ä½œè‡ªå·±çš„Dockerå®¹å™¨" class="headerlink" title="ä¸ƒã€ å®ä¾‹ï¼šåˆ¶ä½œè‡ªå·±çš„Dockerå®¹å™¨"></a>ä¸ƒã€ å®ä¾‹ï¼šåˆ¶ä½œè‡ªå·±çš„Dockerå®¹å™¨</h2><p>ä¸‹é¢æˆ‘ä»¥<a href="http://www.ruanyifeng.com/blog/2017/08/koa.html" target="_blank" rel="noopener">koa-demos</a>é¡¹ç›®ä¸ºä¾‹ï¼Œä»‹ç»æ€ä¹ˆå†™<code>Dockerfile</code>æ–‡ä»¶ï¼Œå®ç°è®©ç”¨æˆ·åœ¨<code>Docker</code>å®¹å™¨é‡Œé¢è¿è¡Œ<code>Koa</code>æ¡†æ¶ã€‚<br>ä½œä¸ºå‡†å¤‡å·¥ä½œï¼Œè¯·å…ˆ<a href="https://github.com/ruanyf/koa-demos/archive/master.zip" target="_blank" rel="noopener">ä¸‹è½½æºç </a>ï¼Œæˆ–è€…é‡‡ç”¨ä¸‹é¢æ–¹å¼ä¸‹è½½ã€‚</p><pre><code>git clone https://github.com/ruanyf/koa-demos.gitcd koa-demos</code></pre><h3 id="7-1ã€-ç¼–å†™Dockerfileæ–‡ä»¶"><a href="#7-1ã€-ç¼–å†™Dockerfileæ–‡ä»¶" class="headerlink" title="7.1ã€ ç¼–å†™Dockerfileæ–‡ä»¶"></a>7.1ã€ ç¼–å†™<code>Dockerfile</code>æ–‡ä»¶</h3><p>é¦–å…ˆï¼Œåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶<code>.dockerignore</code>,å†™å…¥ä¸‹é¢çš„å†…å®¹ï¼Œ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.git</span></span><br><span class="line"><span class="selector-tag">node_modules</span></span><br><span class="line"><span class="selector-tag">npm-debug</span><span class="selector-class">.log</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç è¡¨ç¤ºï¼Œè¿™ä¸‰ä¸ªè·¯å¾„è¦æ’é™¤ï¼Œä¸è¦æ‰“åŒ…è¿›å…¥imageæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¦æ’é™¤çš„è·¯å¾„ï¼Œå¯ä»¥ä¸å†™ã€‚</p><p>ç„¶åï¼Œåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶Dockerfileã€‚å†™å…¥ä¸‹é¢çš„å†…å®¹ã€‚<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">8.4</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /app</span></span><br><span class="line"><span class="bash">WORKDIR /app</span></span><br><span class="line"><span class="bash">RUN npm install --registry=https://registry.npm.taobao.org</span></span><br><span class="line"><span class="bash">EXPOSE 3000</span></span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢äº”è¡Œä»£ç ï¼Œå«ä¹‰å¦‚ä¸‹ã€‚</p><ul><li><code>FROM node:8.4</code>ï¼šè¯¥imageæ–‡ä»¶ç»§æ‰¿å®˜æ–¹çš„<code>node image</code>ï¼Œå†’å·è¡¨ç¤ºæ ‡ç­¾ï¼Œè¿™é‡Œæ ‡ç­¾æ˜¯8.4ï¼Œå³8.4ç‰ˆæœ¬çš„ nodeã€‚</li><li>COPY . /appï¼šå°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆé™¤äº†.dockerignoreæ’é™¤çš„è·¯å¾„ï¼‰ï¼Œéƒ½æ‹·è´è¿›å…¥ image æ–‡ä»¶çš„/appç›®å½•ã€‚</li><li>WORKDIR /appï¼šæŒ‡å®šæ¥ä¸‹æ¥çš„å·¥ä½œè·¯å¾„ä¸º/appã€‚</li><li>RUN npm installï¼šåœ¨/appç›®å½•ä¸‹ï¼Œè¿è¡Œnpm installå‘½ä»¤å®‰è£…ä¾èµ–ã€‚æ³¨æ„ï¼Œå®‰è£…åæ‰€æœ‰çš„ä¾èµ–ï¼Œéƒ½å°†æ‰“åŒ…è¿›å…¥ image æ–‡ä»¶ã€‚</li><li>EXPOSE 3000ï¼šå°†å®¹å™¨ 3000 ç«¯å£æš´éœ²å‡ºæ¥ï¼Œ å…è®¸å¤–éƒ¨è¿æ¥è¿™ä¸ªç«¯å£ã€‚</li></ul><h3 id="7-2ã€-åˆ›å»ºimageæ–‡ä»¶"><a href="#7-2ã€-åˆ›å»ºimageæ–‡ä»¶" class="headerlink" title="7.2ã€ åˆ›å»ºimageæ–‡ä»¶"></a>7.2ã€ åˆ›å»ºimageæ–‡ä»¶</h3><p>æœ‰äº†Dockerfileæ–‡ä»¶ä»¥åï¼Œå°±å¯ä»¥ä½¿ç”¨<code>docker image build</code>å‘½ä»¤åˆ›å»ºimageæ–‡ä»¶äº†ã€‚</p><pre><code>docker image build -t koa-demo .# æˆ–è€…docker image build -t koa-demo:0.0.1 .</code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>-t</code>å‚æ•°ç”¨æ¥æŒ‡å®šimageæ–‡ä»¶çš„åå­—ï¼Œåé¢è¿˜å¯ä»¥ç”¨å†’å·æŒ‡å®šæ ‡ç­¾ã€‚å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤çš„æ ‡ç­¾å°±æ˜¯<code>latet</code>ã€‚æœ€åçš„é‚£ä¸ªç‚¹<code>.</code>è¡¨ç¤º<code>dockfile</code>æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼Œä¸Šä¾‹æ˜¯å½“å‰è·¯å¾„ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªç‚¹ã€‚å¦‚æœè¿è¡ŒæˆåŠŸå°±å¯ä»¥çœ‹åˆ°æ–°ç”Ÿæˆçš„imageæ–‡ä»¶<code>koa-demo</code>äº†ã€‚</p><pre><code># æŸ¥çœ‹imageæ–‡ä»¶ docker image ls</code></pre><h3 id="7-3ã€-ç”Ÿæˆå®¹å™¨"><a href="#7-3ã€-ç”Ÿæˆå®¹å™¨" class="headerlink" title="7.3ã€ ç”Ÿæˆå®¹å™¨"></a>7.3ã€ ç”Ÿæˆå®¹å™¨</h3><p><code>docker container run</code>å‘½ä»¤ä¼šä»<code>image</code>æ–‡ä»¶ç”Ÿæˆå®¹å™¨ã€‚<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker container <span class="built_in">run</span> -p <span class="number">8000</span>:<span class="number">3000</span> -<span class="keyword">it</span> koa-demo /bin/bash</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">docker container <span class="built_in">run</span> -p <span class="number">8000</span>:<span class="number">3000</span> -<span class="keyword">it</span> kao-demo:<span class="number">0.0</span><span class="number">.1</span> /bin/bash</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢å‘½ä»¤çš„å‚æ•°å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li>-på‚æ•°ï¼šå®¹å™¨çš„3000ç«¯å£æ˜ å°„åˆ°æœ¬æœºçš„8000ç«¯å£</li><li>-itå‚æ•°ï¼šå®¹å™¨çš„ Shell æ˜ å°„åˆ°å½“å‰çš„ Shellï¼Œç„¶åä½ åœ¨æœ¬æœºçª—å£è¾“å…¥çš„å‘½ä»¤ï¼Œå°±ä¼šä¼ å…¥å®¹å™¨ã€‚</li><li>koa-demo:0.0.1ï¼šimage æ–‡ä»¶çš„åå­—ï¼ˆå¦‚æœæœ‰æ ‡ç­¾ï¼Œè¿˜éœ€è¦æä¾›æ ‡ç­¾ï¼Œé»˜è®¤æ˜¯ latest æ ‡ç­¾ï¼‰ã€‚</li><li>/bin/bashï¼šå®¹å™¨å¯åŠ¨ä»¥åï¼Œå†…éƒ¨ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„å‘½ä»¤ã€‚è¿™é‡Œæ˜¯å¯åŠ¨ Bashï¼Œä¿è¯ç”¨æˆ·å¯ä»¥ä½¿ç”¨ Shellã€‚</li></ul><p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œè¿è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªå‘½ä»¤è¡Œæç¤ºç¬¦ã€‚</p><pre><code>root@805724fbb49b:/app# </code></pre><p>è¿™å°±è¡¨ç¤ºä½ å·²ç»åœ¨å®¹å™¨é‡Œé¢äº†ï¼Œè¿”å›çš„æç¤ºç¬¦å°±æ˜¯å®¹å™¨å†…éƒ¨çš„<code>Shell</code>æç¤ºç¬¦ã€‚æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚</p><pre><code>root@805724fbb49b:/app# node demos/01.js</code></pre><p>è¿™æ—¶ï¼ŒKoa æ¡†æ¶å·²ç»è¿è¡Œèµ·æ¥äº†ã€‚æ‰“å¼€æœ¬æœºçš„æµè§ˆå™¨ï¼Œè®¿é—®<code>http://127.0.0.1:8000</code>ï¼Œç½‘é¡µæ˜¾ç¤ºâ€Not Foundâ€ï¼Œè¿™æ˜¯å› ä¸ºè¿™ä¸ª demo æ²¡æœ‰å†™è·¯ç”±ã€‚</p><p>è¿™ä¸ªä¾‹å­ä¸­ï¼ŒNode è¿›ç¨‹è¿è¡Œåœ¨ Docker å®¹å™¨çš„è™šæ‹Ÿç¯å¢ƒé‡Œé¢ï¼Œè¿›ç¨‹æ¥è§¦åˆ°çš„æ–‡ä»¶ç³»ç»Ÿå’Œç½‘ç»œæ¥å£éƒ½æ˜¯è™šæ‹Ÿçš„ï¼Œä¸æœ¬æœºçš„æ–‡ä»¶ç³»ç»Ÿå’Œç½‘ç»œæ¥å£æ˜¯éš”ç¦»çš„ï¼Œå› æ­¤éœ€è¦å®šä¹‰å®¹å™¨ä¸ç‰©ç†æœºçš„ç«¯å£æ˜ å°„ï¼ˆmapï¼‰ã€‚</p><p>ç°åœ¨ï¼Œåœ¨å®¹å™¨çš„å‘½ä»¤è¡Œï¼ŒæŒ‰ä¸‹ Ctrl + c åœæ­¢ Node è¿›ç¨‹ï¼Œç„¶åæŒ‰ä¸‹ Ctrl + d ï¼ˆæˆ–è€…è¾“å…¥ exitï¼‰é€€å‡ºå®¹å™¨ã€‚æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ç”¨<code>docker container kill</code>ç»ˆæ­¢å®¹å™¨è¿è¡Œã€‚</p><pre><code>#åœ¨æœ¬æœºçš„å¦ä¸€ä¸ªç»ˆç«¯çª—å£ï¼ŒæŸ¥å¤„å®¹å™¨çš„IDdocker container ls## åœæ­¢æŒ‡å®šçš„å®¹å™¨è¿è¡Œdocker container kill [containerID]</code></pre><p>å®¹å™¨åœæ­¢è¿è¡Œåä¸ä¼šæ¶ˆå¤±ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤åˆ é™¤å®¹å™¨æ–‡ä»¶ã€‚<br><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥å¤„å®¹å™¨çš„ID</span></span><br><span class="line"><span class="attribute">docker</span> container ls -<span class="literal">all</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æŒ‡å®šå®¹å™¨æ–‡ä»¶</span></span><br><span class="line"><span class="attribute">docker</span> container rm<span class="meta"> [containerID]</span></span><br></pre></td></tr></table></figure></p><blockquote><p> ä¹Ÿå¯ä»¥ä½¿ç”¨<code>docker container run</code>å‘½ä»¤çš„<code>--rm</code>å‚æ•°ï¼Œåœ¨å®¹å™¨ç»ˆæ­¢è¿è¡Œåè‡ªåŠ¨åˆ é™¤å®¹å™¨æ–‡ä»¶ã€‚<br> <code>docker container run --rm -p 8000:3000 -it koa-demo /bin/bash</code></p></blockquote><h3 id="7-4ã€-CMDå‘½ä»¤"><a href="#7-4ã€-CMDå‘½ä»¤" class="headerlink" title="7.4ã€ CMDå‘½ä»¤"></a>7.4ã€ <code>CMD</code>å‘½ä»¤</h3><p>ä¸Šä¸€èŠ‚çš„ä¾‹å­é‡Œé¢ï¼Œå®¹å™¨å¯åŠ¨ä»¥åï¼Œéœ€è¦æ‰‹åŠ¨è¾“å…¥å‘½ä»¤<code>node demos/01.js</code>ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå‘½ä»¤å†™åœ¨<code>Dockerfile</code>é‡Œé¢ï¼Œè¿™æ ·å®¹å™¨å¯åŠ¨ä»¥åï¼Œè¿™ä¸ªå‘½ä»¤å°±å·²ç»æ‰§è¡Œäº†ï¼Œä¸ç”¨å†æ‰‹åŠ¨è¾“å…¥äº†ã€‚<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">8.4</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /app</span></span><br><span class="line"><span class="bash">WORKDIR /app</span></span><br><span class="line"><span class="bash">RUN npm install --registry=https://registry.npm.taobao.org</span></span><br><span class="line"><span class="bash">EXPOSE 3000</span></span><br><span class="line"><span class="bash">CMD node demos/01.js</span></span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢çš„ Dockerfile é‡Œé¢ï¼Œå¤šäº†æœ€åä¸€è¡Œ<code>CMD node demos/01.js</code>ï¼Œå®ƒè¡¨ç¤ºå®¹å™¨å¯åŠ¨åè‡ªåŠ¨æ‰§è¡Œ<code>node demos/01.js</code>ã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œ<code>RUN</code>å‘½ä»¤ä¸<code>CMD</code>å‘½ä»¤çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿç®€å•è¯´ï¼Œ<code>RUN</code>å‘½ä»¤åœ¨<code>image</code>æ–‡ä»¶çš„æ„å»ºé˜¶æ®µæ‰§è¡Œï¼Œæ‰§è¡Œç»“æœéƒ½ä¼šæ‰“åŒ…è¿›å…¥<code>image</code>æ–‡ä»¶ï¼›<code>CMD</code>å‘½ä»¤åˆ™æ˜¯åœ¨å®¹å™¨å¯åŠ¨åæ‰§è¡Œã€‚å¦å¤–ï¼Œä¸€ä¸ª<code>Dockerfile</code>å¯ä»¥åŒ…å«å¤šä¸ª<code>RUN</code>å‘½ä»¤ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ª<code>CMD</code>å‘½ä»¤ã€‚</p><p>æ³¨æ„ï¼ŒæŒ‡å®šäº†<code>CMD</code>å‘½ä»¤ä»¥åï¼Œ<code>docker container run</code>å‘½ä»¤å°±ä¸èƒ½é™„åŠ å‘½ä»¤äº†ï¼ˆæ¯”å¦‚å‰é¢çš„<code>/bin/bash</code>ï¼‰ï¼Œå¦åˆ™å®ƒä¼šè¦†ç›–<code>CMD</code>å‘½ä»¤ã€‚ç°åœ¨ï¼Œå¯åŠ¨å®¹å™¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p><pre><code>docker container run --rm -p 8000:3000 -it koa-demo</code></pre><h3 id="7-5ã€-å‘å¸ƒimageæ–‡ä»¶"><a href="#7-5ã€-å‘å¸ƒimageæ–‡ä»¶" class="headerlink" title="7.5ã€ å‘å¸ƒimageæ–‡ä»¶"></a>7.5ã€ å‘å¸ƒ<code>image</code>æ–‡ä»¶</h3><p>å®¹å™¨è¿è¡ŒæˆåŠŸåï¼Œå°±ç¡®è®¤äº† image æ–‡ä»¶çš„æœ‰æ•ˆæ€§ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘æŠŠ image æ–‡ä»¶åˆ†äº«åˆ°ç½‘ä¸Šï¼Œè®©å…¶ä»–äººä½¿ç”¨ã€‚</p><p>é¦–å…ˆï¼Œå» hub.docker.com æˆ– cloud.docker.com æ³¨å†Œä¸€ä¸ªè´¦æˆ·ã€‚ç„¶åï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤ç™»å½•ã€‚</p><pre><code>docker login</code></pre><p>ç„¶åï¼Œä¸ºæœ¬åœ°çš„imageæ ‡æ³¨ç”¨æˆ·åå’Œç‰ˆæœ¬ã€‚<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker image <span class="keyword">tag</span> <span class="title">[imageName</span>] [username]/[repository]:[<span class="keyword">tag</span>]</span><br><span class="line"><span class="comment"># å®ä¾‹</span></span><br><span class="line">docker image <span class="keyword">tag</span> <span class="title">koa-demos</span>:<span class="number">0.0</span>.<span class="number">1</span> heany/koa-demos:<span class="number">0.0</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå¯ä»¥ä¸ç”¨æ ‡æ³¨ç”¨æˆ·åï¼Œé‡æ–°æ„å»ºä¸€ä¸‹imageæ–‡ä»¶ã€‚</p><pre><code>docker image build -t [username]/[repository]:[tag]</code></pre><p>æœ€åï¼Œå‘å¸ƒimageæ–‡ä»¶ã€‚</p><pre><code>docker image push [username]/[repository]:[tag]</code></pre><p>å‘å¸ƒæˆåŠŸåï¼Œç™»å½•hub.docker.comï¼Œå°±å¯ä»¥çœ‹åˆ°å·²ç»å‘å¸ƒçš„imageæ–‡ä»¶ã€‚<b style="color: red">ç›®å‰å›½å†…é“¾æ¥<code>hub.docker.com</code>éå¸¸æ…¢ï¼Œpushç»å¸¸è¶…æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…çš„<code>daocloud</code>ã€‚</b></p><h2 id="å…«ã€-å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤"><a href="#å…«ã€-å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤" class="headerlink" title="å…«ã€ å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤"></a>å…«ã€ å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤</h2><p><code>docker</code>çš„ä¸»è¦ç”¨æ³•å°±æ˜¯ä¸Šé¢è¿™äº›æ­¤å¤–è¿˜æœ‰å‡ ä¸ªå‘½ä»¤ï¼Œä¹Ÿéå¸¸æœ‰ç”¨ã€‚</p><h3 id="8-1ã€-docker-container-start"><a href="#8-1ã€-docker-container-start" class="headerlink" title="8.1ã€ docker container start"></a>8.1ã€ <code>docker container start</code></h3><p>å‰é¢çš„<code>docker container run</code>å‘½ä»¤æ˜¯æ–°å»ºå®¹å™¨ï¼Œæ¯è¿è¡Œä¸€æ¬¡ï¼Œå°±ä¼šæ–°å»ºä¸€ä¸ªå®¹å™¨ã€‚åŒæ ·çš„å‘½ä»¤è¿è¡Œä¸¤æ¬¡ï¼Œå°±ä¼šç”Ÿæˆä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„å®¹å™¨æ–‡ä»¶ã€‚å¦‚æœå¸Œæœ›é‡å¤ä½¿ç”¨å®¹å™¨ï¼Œå°±è¦ä½¿ç”¨<code>docker container start</code>å‘½ä»¤ï¼Œå®ƒç”¨æ¥å¯åŠ¨å·²ç»ç”Ÿæˆã€å·²ç»åœæ­¢è¿è¡Œçš„å®¹å™¨æ–‡ä»¶ã€‚</p><pre><code>docker container start [containerID]</code></pre><h3 id="8-2ã€-docker-container-stop"><a href="#8-2ã€-docker-container-stop" class="headerlink" title="8.2ã€ docker container stop"></a>8.2ã€ <code>docker container stop</code></h3><p>å‰é¢çš„<code>docker container kill</code>å‘½ä»¤ç»ˆæ­¢å®¹å™¨è¿è¡Œï¼Œç›¸å½“äºå‘å®¹å™¨é‡Œé¢çš„ä¸»è¿›ç¨‹å‘å‡º<code>SIGKILL</code> ä¿¡å·ã€‚è€Œ<code>docker container stop</code>å‘½ä»¤ä¹Ÿæ˜¯ç”¨æ¥ç»ˆæ­¢å®¹å™¨è¿è¡Œï¼Œç›¸å½“äºå‘å®¹å™¨é‡Œé¢çš„ä¸»è¿›ç¨‹å‘å‡º<code>SIGTERM</code>ä¿¡å·ï¼Œç„¶åè¿‡ä¸€æ®µæ—¶é—´å†å‘å‡º SIGKILL ä¿¡å·ã€‚</p><pre><code>bash container stop [containerID]</code></pre><p>è¿™ä¸¤ä¸ªä¿¡å·çš„å·®åˆ«æ˜¯ï¼Œåº”ç”¨ç¨‹åºæ”¶åˆ°<code>SIGTERM</code>ä¿¡å·ä»¥åï¼Œå¯ä»¥è‡ªè¡Œè¿›è¡Œæ”¶å°¾æ¸…ç†å·¥ä½œï¼Œä½†ä¹Ÿå¯ä»¥ä¸ç†ä¼šè¿™ä¸ªä¿¡å·ã€‚å¦‚æœæ”¶åˆ°<code>SIGKILL</code>ä¿¡å·ï¼Œå°±ä¼šå¼ºè¡Œç«‹å³ç»ˆæ­¢ï¼Œé‚£äº›æ­£åœ¨è¿›è¡Œä¸­çš„æ“ä½œä¼šå…¨éƒ¨ä¸¢å¤±ã€‚</p><h3 id="8-3ã€-docker-container-logs"><a href="#8-3ã€-docker-container-logs" class="headerlink" title="8.3ã€ docker container logs"></a>8.3ã€ <code>docker container logs</code></h3><p><code>docker container logs</code>å‘½ä»¤ç”¨æ¥æŸ¥çœ‹<code>docker</code>å®¹å™¨çš„è¾“å‡ºï¼Œå³å®¹å™¨é‡Œé¢<code>Shell</code>çš„æ ‡å‡†è¾“å‡ºã€‚å¦‚æœ<code>docker run</code>å‘½ä»¤è¿è¡Œå®¹å™¨çš„æ—¶å€™ï¼Œæ²¡æœ‰ä½¿ç”¨-itå‚æ•°ï¼Œå°±è¦ç”¨è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹è¾“å‡ºã€‚</p><pre><code>docker container logs [containerID]</code></pre><h3 id="8-4ã€-docker-container-exec"><a href="#8-4ã€-docker-container-exec" class="headerlink" title="8.4ã€ docker container exec"></a>8.4ã€ <code>docker container exec</code></h3><p><code>docker container exec</code>å‘½ä»¤ç”¨äºè¿›å…¥ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„<code>docker</code>å®¹å™¨ã€‚å¦‚æœ<code>docker run</code>å‘½ä»¤è¿è¡Œå®¹å™¨çš„æ—¶å€™ï¼Œæ²¡æœ‰ä½¿ç”¨-itå‚æ•°ï¼Œå°±è¦ç”¨è¿™ä¸ªå‘½ä»¤è¿›å…¥å®¹å™¨ã€‚ä¸€æ—¦è¿›å…¥äº†å®¹å™¨ï¼Œå°±å¯ä»¥åœ¨å®¹å™¨çš„<code>Shell</code>æ‰§è¡Œå‘½ä»¤äº†ã€‚</p><pre><code>docker container exec -it [containerID] /bin/bash</code></pre><h3 id="8-5ã€-docker-container-cp"><a href="#8-5ã€-docker-container-cp" class="headerlink" title="8.5ã€ docker container cp"></a>8.5ã€ <code>docker container cp</code></h3><p><code>docker container cp</code>å‘½ä»¤ç”¨äºä»æ­£åœ¨è¿è¡Œçš„<code>Docker</code>å®¹å™¨é‡Œé¢ï¼Œå°†æ–‡ä»¶æ‹·è´åˆ°æœ¬æœºã€‚ä¸‹é¢æ˜¯æ‹·è´åˆ°å½“å‰ç›®å½•çš„å†™æ³•ã€‚</p><pre><code>docker container cp [containID]:[/path/to/file]</code></pre><h2 id="ä¹ã€-ç»“æŸè¯­"><a href="#ä¹ã€-ç»“æŸè¯­" class="headerlink" title="ä¹ã€ ç»“æŸè¯­"></a>ä¹ã€ ç»“æŸè¯­</h2><p>&emsp;è½¬è½½äº<a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html" target="_blank" rel="noopener">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—-Dockerå…¥é—¨æ•™ç¨‹</a><br>&emsp;å‚è€ƒäº†<a href="https://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="noopener">DockeræŠ€æœ¯å…¥é—¨ä¸å®æˆ˜</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä¸€ã€-å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€ å‰è¨€&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“è½¯ä»¶å¼€å‘æœ€å¤§çš„éº»çƒ¦äº‹ä¹‹ä¸€ï¼Œå°±æ˜¯ç¯å¢ƒé…ç½®ã€‚ç”¨æˆ·è®¡ç®—æœºçš„ç¯å¢ƒéƒ½ä¸ç›¸åŒï¼Œä½ æ€ä¹ˆçŸ¥é“è‡ªå®¶çš„è½¯ä»¶ï¼Œèƒ½åœ¨é‚£äº›æœºå™¨è·‘èµ·æ¥
      
    
    </summary>
    
      <category term="åˆ†å¸ƒå¼ä¸å¤§æ•°æ®" scheme="http://heany.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="Docker" scheme="http://heany.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>sublime text 3 æœ€æ–°çš„æ³¨å†Œç </title>
    <link href="http://heany.github.io/2018/04/09/sublime-text-3-%E6%9C%80%E6%96%B0%E7%9A%84%E6%B3%A8%E5%86%8C%E7%A0%81/"/>
    <id>http://heany.github.io/2018/04/09/sublime-text-3-æœ€æ–°çš„æ³¨å†Œç /</id>
    <published>2018-04-09T12:46:12.000Z</published>
    <updated>2019-01-26T14:47:30.579Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€æ–°å¯ç”¨çš„sublime Text 3æ³¨å†Œç <br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">â€”â€“ BEGIN LICENSE â€”â€“ </span><br><span class="line">TwitterInc </span><br><span class="line"><span class="number">200</span> User License </span><br><span class="line">EA7E<span class="number">-890007</span> </span><br><span class="line"><span class="number">1</span>D77F72E <span class="number">390</span>CDD93 <span class="number">4</span>DCBA022 FAF60790 </span><br><span class="line"><span class="number">61</span>AA12C0 A37081C5 D0316412 <span class="number">4584</span>D136 </span><br><span class="line"><span class="number">94</span>D7F7D4 <span class="number">95</span>BC8C1C <span class="number">527</span>DA828 <span class="number">560</span>BB037 </span><br><span class="line">D1EDDD8C AE7B379F <span class="number">50</span>C9D69D B35179EF </span><br><span class="line"><span class="number">2</span>FE898C4 <span class="number">8E4277</span>A8 <span class="number">555</span>CE714 E1FB0E43 </span><br><span class="line">D5D52613 C3D12E98 BC49967F <span class="number">7652</span>EED2 </span><br><span class="line"><span class="number">9</span>D2D2E61 <span class="number">67610860</span> <span class="number">6</span>D338B72 <span class="number">5</span>CF95C69 </span><br><span class="line">E36B85CC <span class="number">84991</span>F19 <span class="number">7575</span>D828 <span class="number">470</span>A92AB </span><br><span class="line">â€”â€” END LICENSE â€”â€”</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ€æ–°å¯ç”¨çš„sublime Text 3æ³¨å†Œç &lt;br&gt;&lt;figure class=&quot;highlight lsl&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;li
      
    
    </summary>
    
      <category term="å¸¸ç”¨å·¥å…·" scheme="http://heany.github.io/categories/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="sublime-text-3 æ³¨å†Œç " scheme="http://heany.github.io/tags/sublime-text-3-%E6%B3%A8%E5%86%8C%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 17.10é…ç½®Hadoop+Sparkç¯å¢ƒ</title>
    <link href="http://heany.github.io/2018/04/08/Ubuntu-17-10%E9%85%8D%E7%BD%AEHadoop-Spark%E7%8E%AF%E5%A2%83/"/>
    <id>http://heany.github.io/2018/04/08/Ubuntu-17-10é…ç½®Hadoop-Sparkç¯å¢ƒ/</id>
    <published>2018-04-08T06:39:34.000Z</published>
    <updated>2019-01-26T14:47:30.578Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>&nbsp;&nbsp;æœ€è¿‘å¯¼å¸ˆå¸¦çš„é¡¹ç›®æ˜¯ä¸å¤§æ•°æ®ç›¸å…³ï¼Œæ„Ÿè§‰è¿™å‡ å¹´å¤§æ•°æ®æŠ€æœ¯è¿˜æŒºç«çš„ï¼Œå°±æƒ³ç€ä¹Ÿå»å­¦ä¸€ä¸‹ï¼Œä¸°å¯Œè‡ªå·±çš„æŠ€èƒ½æ ˆã€‚æœ¬æ–‡ä¸»è¦è®²çš„æ˜¯hadoop+sparkçš„ç¯å¢ƒæ­å»º,ç„¶åä½¿ç”¨è‡ªå¸¦çš„examplesæµ‹è¯•ç¯å¢ƒï¼Œè¿™é‡Œä¸æ¶‰åŠåŸç†ä»‹ç»ã€‚<a id="more"></a></p><h2 id="äºŒã€Hadoopçš„ä¸‰ç§è¿è¡Œæ¨¡å¼ä»‹ç»"><a href="#äºŒã€Hadoopçš„ä¸‰ç§è¿è¡Œæ¨¡å¼ä»‹ç»" class="headerlink" title="äºŒã€Hadoopçš„ä¸‰ç§è¿è¡Œæ¨¡å¼ä»‹ç»"></a>äºŒã€Hadoopçš„ä¸‰ç§è¿è¡Œæ¨¡å¼ä»‹ç»</h2><h3 id="2-1ã€-å•æœºæ¨¡å¼ä¹Ÿå«ç‹¬ç«‹æ¨¡å¼ï¼ˆLocalæˆ–Standalone-Modeï¼‰"><a href="#2-1ã€-å•æœºæ¨¡å¼ä¹Ÿå«ç‹¬ç«‹æ¨¡å¼ï¼ˆLocalæˆ–Standalone-Modeï¼‰" class="headerlink" title="2.1ã€ å•æœºæ¨¡å¼ä¹Ÿå«ç‹¬ç«‹æ¨¡å¼ï¼ˆLocalæˆ–Standalone Modeï¼‰"></a>2.1ã€ å•æœºæ¨¡å¼ä¹Ÿå«ç‹¬ç«‹æ¨¡å¼ï¼ˆLocalæˆ–Standalone Modeï¼‰</h3><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHadoopå³å¤„äºè¯¥æ¨¡å¼ï¼Œç”¨äºå¼€å‘å’Œè°ƒå¼ã€‚</li><li>ä¸å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚</li><li>ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œä¸æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</li><li>Hadoopä¸ä¼šå¯åŠ¨NameNodeã€DataNodeã€JobTrackerã€TaskTrackerç­‰å®ˆæŠ¤è¿›ç¨‹ï¼ŒMap()å’ŒReduce()ä»»åŠ¡ä½œä¸ºåŒä¸€ä¸ªè¿›ç¨‹çš„ä¸åŒéƒ¨åˆ†æ¥æ‰§è¡Œçš„ã€‚</li><li>ç”¨äºå¯¹MapReduceç¨‹åºçš„é€»è¾‘è¿›è¡Œè°ƒè¯•ï¼Œç¡®ä¿ç¨‹åºçš„æ­£ç¡®ã€‚</li></ul><h3 id="2-2ã€-ä¼ªåˆ†å¸ƒå¼æ¨¡å¼ï¼ˆPseudo-Distrubuted-Modeï¼‰"><a href="#2-2ã€-ä¼ªåˆ†å¸ƒå¼æ¨¡å¼ï¼ˆPseudo-Distrubuted-Modeï¼‰" class="headerlink" title="2.2ã€ ä¼ªåˆ†å¸ƒå¼æ¨¡å¼ï¼ˆPseudo-Distrubuted Modeï¼‰"></a>2.2ã€ ä¼ªåˆ†å¸ƒå¼æ¨¡å¼ï¼ˆPseudo-Distrubuted Modeï¼‰</h3><ul><li>Hadoopçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨æœ¬æœºæœºå™¨ä¸Šï¼Œæ¨¡æ‹Ÿä¸€ä¸ªå°è§„æ¨¡çš„é›†ç¾¤</li><li>åœ¨ä¸€å°ä¸»æœºä¸Šæ¨¡æ‹Ÿå¤šä¸»æœºã€‚</li><li>Hadoopå¯åŠ¨NameNodeã€DataNodeã€JobTrackerã€TaskTrackerè¿™äº›å®ˆæŠ¤è¿›ç¨‹éƒ½åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼Œæ˜¯ç›¸äº’ç‹¬ç«‹çš„Javaè¿›ç¨‹ã€‚</li><li>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒHadoopä½¿ç”¨çš„æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œå„ä¸ªä½œä¸šä¹Ÿæ˜¯ç”±JobTrakeræœåŠ¡ï¼Œæ¥ç®¡ç†çš„ç‹¬ç«‹è¿›ç¨‹ã€‚åœ¨å•æœºæ¨¡å¼ä¹‹ä¸Šå¢åŠ äº†ä»£ç è°ƒè¯•åŠŸèƒ½ï¼Œå…è®¸æ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µï¼ŒHDFSè¾“å…¥è¾“å‡ºï¼Œä»¥åŠå…¶ä»–çš„å®ˆæŠ¤è¿›ç¨‹äº¤äº’ã€‚ç±»ä¼¼äºå®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼ï¼Œå› æ­¤ï¼Œè¿™ç§æ¨¡å¼å¸¸ç”¨æ¥å¼€å‘æµ‹è¯•Hadoopç¨‹åºçš„æ‰§è¡Œæ˜¯å¦æ­£ç¡®ã€‚</li><li>ä¿®æ”¹3ä¸ªé…ç½®æ–‡ä»¶ï¼šcore-site.xmlï¼ˆHadoopé›†ç¾¤çš„ç‰¹æ€§ï¼Œä½œç”¨äºå…¨éƒ¨è¿›ç¨‹åŠå®¢æˆ·ç«¯ï¼‰ã€hdfs-site.xmlï¼ˆé…ç½®HDFSé›†ç¾¤çš„å·¥ä½œå±æ€§ï¼‰ã€mapred-site.xmlï¼ˆé…ç½®MapReduceé›†ç¾¤çš„å±æ€§ï¼‰</li><li>æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ</li></ul><h3 id="2-3ã€-å…¨åˆ†å¸ƒå¼é›†ç¾¤æ¨¡å¼ï¼ˆFull-Distributed-Modeï¼‰"><a href="#2-3ã€-å…¨åˆ†å¸ƒå¼é›†ç¾¤æ¨¡å¼ï¼ˆFull-Distributed-Modeï¼‰" class="headerlink" title="2.3ã€ å…¨åˆ†å¸ƒå¼é›†ç¾¤æ¨¡å¼ï¼ˆFull-Distributed Modeï¼‰"></a>2.3ã€ å…¨åˆ†å¸ƒå¼é›†ç¾¤æ¨¡å¼ï¼ˆFull-Distributed Modeï¼‰</h3><ul><li>Hadoopçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸€ä¸ªé›†ç¾¤ä¸Šã€€</li><li>Hadoopçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ç”±å¤šå°ä¸»æœºæ­å»ºçš„é›†ç¾¤ä¸Šï¼Œæ˜¯çœŸæ­£çš„ç”Ÿäº§ç¯å¢ƒã€‚</li><li>åœ¨æ‰€æœ‰çš„ä¸»æœºä¸Šå®‰è£…JDKå’ŒHadoopï¼Œç»„æˆç›¸äº’è¿é€šçš„ç½‘ç»œã€‚</li><li>åœ¨ä¸»æœºé—´è®¾ç½®SSHå…å¯†ç ç™»å½•ï¼ŒæŠŠå„ä»èŠ‚ç‚¹ç”Ÿæˆçš„å…¬é’¥æ·»åŠ åˆ°ä¸»èŠ‚ç‚¹çš„ä¿¡ä»»åˆ—è¡¨ã€‚</li><li>ä¿®æ”¹3ä¸ªé…ç½®æ–‡ä»¶ï¼šcore-site.xmlã€hdfs-site.xmlã€mapred-site.xmlï¼ŒæŒ‡å®šNameNodeå’ŒJobTrakerçš„ä½ç½®å’Œç«¯å£ï¼Œè®¾ç½®æ–‡ä»¶çš„å‰¯æœ¬ç­‰å‚æ•°</li><li>æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿã€‚</li></ul><h2 id="ä¸‰ã€æ­å»ºä¼ªåˆ†å¸ƒå¼é›†ç¾¤çš„å‰ææ¡ä»¶"><a href="#ä¸‰ã€æ­å»ºä¼ªåˆ†å¸ƒå¼é›†ç¾¤çš„å‰ææ¡ä»¶" class="headerlink" title="ä¸‰ã€æ­å»ºä¼ªåˆ†å¸ƒå¼é›†ç¾¤çš„å‰ææ¡ä»¶"></a>ä¸‰ã€æ­å»ºä¼ªåˆ†å¸ƒå¼é›†ç¾¤çš„å‰ææ¡ä»¶</h2><h3 id="3-1ã€-å®éªŒç¯å¢ƒ"><a href="#3-1ã€-å®éªŒç¯å¢ƒ" class="headerlink" title="3.1ã€ å®éªŒç¯å¢ƒ"></a>3.1ã€ å®éªŒç¯å¢ƒ</h3><ul><li style="list-style: none"><input type="checkbox" checked> <strong>ubuntu 17.10-x64</strong></li><li style="list-style: none"><input type="checkbox" checked> <strong>jdk_1.8.0_162</strong></li><li style="list-style: none"><input type="checkbox" checked> <strong>Hadoop-3.0.0</strong></li><li style="list-style: none"><input type="checkbox" checked> <strong>Spark-2.3.0</strong></li></ul><h3 id="3-2ã€-å®‰è£…JDKï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡"><a href="#3-2ã€-å®‰è£…JDKï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="3.2ã€ å®‰è£…JDKï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡"></a>3.2ã€ å®‰è£…JDKï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡</h3><p>&nbsp;&nbsp;é¦–å…ˆå»å®˜ç½‘ä¸‹è½½å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬çš„jdk,ç„¶åè§£å‹åˆ°<code>opt</code>ç›®å½•ä¸‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><blockquote><pre><code>sudo tar -zxvf jdk-8u162-linux-x64.tar.gz -C /opt</code></pre></blockquote><p>ç„¶ååˆ‡æ¢åˆ°<code>/opt</code>ç›®å½•ä¸‹ï¼Œä¿®æ”¹jdkçš„æ–‡ä»¶å¤¹å‘½å</p><blockquote><pre><code>mv jdk-8u162-linux-x64 ./jdk</code></pre></blockquote><p>æœ€åï¼Œé…ç½®ç¯å¢ƒå˜é‡ï¼Œ</p><blockquote><pre><code>vim /etc/profile</code></pre></blockquote><p>åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/opt/jdk</span><br><span class="line">export JRE_HOME=$JAVA_HOME/jre</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure><p>ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>source /etc/profile</code></pre><p>æœ€åæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p><pre><code>java -version</code></pre><h3 id="3-3ã€-å®‰è£…Scala"><a href="#3-3ã€-å®‰è£…Scala" class="headerlink" title="3.3ã€ å®‰è£…Scala"></a>3.3ã€ å®‰è£…Scala</h3><ul><li>å®˜ç½‘ä¸‹è½½scala(scala-2.12.4.tgz)</li><li><p>è§£å‹ä¸‹è½½scalaåŒ…</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -xzvf scala<span class="number">-2.12</span><span class="number">.4</span>.tgz -C /opt/</span><br><span class="line"># ä¿®æ”¹æ–‡ä»¶åï¼š</span><br><span class="line">sudo mv scala<span class="number">-2.12</span><span class="number">.4</span> ./scala</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ç¯å¢ƒå˜é‡</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile</span><br><span class="line"><span class="comment"># åœ¨åé¢æ·»åŠ ä¸‹é¢å†…å®¹</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">SCALA_HOME</span>=/opt/scala</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$SCALA_HOME</span>/bin:$PATH</span><br></pre></td></tr></table></figure></li><li><p>ä½¿é…ç½®ç”Ÿæ•ˆå¹¶æµ‹è¯•</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br><span class="line"><span class="comment"># æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br><span class="line">scala -version  # è¾“å‡ºscalaç‰ˆæœ¬å·</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-4ã€-å®‰è£…sshå¹¶è®¾ç½®å…å¯†ç™»å½•"><a href="#3-4ã€-å®‰è£…sshå¹¶è®¾ç½®å…å¯†ç™»å½•" class="headerlink" title="3.4ã€ å®‰è£…sshå¹¶è®¾ç½®å…å¯†ç™»å½•"></a>3.4ã€ å®‰è£…sshå¹¶è®¾ç½®å…å¯†ç™»å½•</h3><ul><li><p>å®‰è£…sshã€‚å¦‚æœå·²å®‰è£…åˆ™è·³è¿‡è¿™ä¸€æ­¥ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install openssh-server</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®sshæ— å¯†ç™»å½•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa <span class="comment"># ç„¶åä¸€ç›´å›è½¦</span></span><br><span class="line">cat ~<span class="regexp">/.ssh/id</span>_rsa.pub <span class="meta">&gt;&gt; </span>~<span class="regexp">/.ssh/authorized</span>_keys</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•sshæ— å¯†ç™»å½•</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ssh</span> localhost</span><br><span class="line"><span class="comment"># å¦‚æœä¸æç¤ºè¾“å…¥å¯†ç åˆ™é…ç½®æˆåŠŸ</span></span><br></pre></td></tr></table></figure></li></ul><p>[TOC]</p><h2 id="å››ã€æ­å»ºä¼ªåˆ†å¸ƒå¼é›†ç¾¤"><a href="#å››ã€æ­å»ºä¼ªåˆ†å¸ƒå¼é›†ç¾¤" class="headerlink" title="å››ã€æ­å»ºä¼ªåˆ†å¸ƒå¼é›†ç¾¤"></a>å››ã€æ­å»ºä¼ªåˆ†å¸ƒå¼é›†ç¾¤</h2><h3 id="4-1ã€-hadoopä¸‹è½½å®‰è£…"><a href="#4-1ã€-hadoopä¸‹è½½å®‰è£…" class="headerlink" title="4.1ã€ hadoopä¸‹è½½å®‰è£…"></a>4.1ã€ hadoopä¸‹è½½å®‰è£…</h3><ul><li>ä¸‹è½½Hadoop(ç¬”è€…ä¸‹è½½çš„æ˜¯hadoop-3.0.0.tar.gz)</li><li><p>è§£å‹å¹¶é‡å‘½å</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">sudo tar -xzvf hadoop-3.0.0.tar.gz -C <span class="string">/opt/</span></span><br><span class="line"><span class="comment"># é‡å‘½å</span></span><br><span class="line"><span class="keyword">cd</span> <span class="string">/opt</span></span><br><span class="line">sudo hadoop-3.0.0 hadoop</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹æ–‡ä»¶æƒé™</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/opt</span></span><br><span class="line">sudo chown -R yourname<span class="function">:yourname</span> hadoop  </span><br><span class="line"><span class="comment"># yournameæ›¿æ¢æˆä½ çš„ç”¨æˆ·å  -Rè¡¨ç¤ºé€çº§å¾€ä¸‹æˆæƒ</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®ç¯å¢ƒå˜é‡</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile</span><br><span class="line"><span class="comment"># åœ¨æœ€åæ·»åŠ ä¸‹é¢ä»£ç </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_HOME</span>=/opt/hadoop</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_COMMON_LIB_NATIVE_DIR</span>=<span class="variable">$HADOOP_HOME</span>/lib/native</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_OPTS</span>=<span class="string">"-Djava.library.path=<span class="variable">$HADOOP_COMMON_LIB_NATIVE_DIR</span>"</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿é…ç½®ç”Ÿæ•ˆ</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">source</span> <span class="regexp">/etc/</span>profile</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop <span class="built_in">version</span>  <span class="comment"># output the information of the version of the hadoop</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="4-2ã€-Hadoopä¼ªåˆ†å¸ƒå¼é…ç½®"><a href="#4-2ã€-Hadoopä¼ªåˆ†å¸ƒå¼é…ç½®" class="headerlink" title="4.2ã€ Hadoopä¼ªåˆ†å¸ƒå¼é…ç½®"></a>4.2ã€ Hadoopä¼ªåˆ†å¸ƒå¼é…ç½®</h3><ul><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>hadoop-env.sh</code></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢åˆ°å·¥ä½œç›®å½•</span></span><br><span class="line">cd /opt/hadoop/etc/hadoop</span><br><span class="line"><span class="comment"># æ‰“å¼€é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim hadoop-env.sh</span><br><span class="line"><span class="comment"># ç›´æ¥åŠ ä¸Šä¸‹é¢ä»£ç </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/opt/jdk</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>core-site.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://219.223.243.131:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>   219.223.243.131æ˜¯æˆ‘çš„èŠ‚ç‚¹æ‰€åœ¨ä¸»æœºçš„ip,9000ä¸ºé»˜è®¤çš„ç«¯å£ï¼Œä¸ç”¨æ›´æ”¹</p></blockquote><ul><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>hdfs-site.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.nameservices<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop-cluster<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///data/hadoop/hdfs/nn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.checkpoint.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///data/hadoop/hdfs/snn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.checkpoint.edits.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///data/hadoop/hdfs/snn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///data/hadoop/hdfs/dn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>mapred-site.xml</code></p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">    <span class="params">&lt;name&gt;</span>mapreduce.framework.name<span class="params">&lt;/name&gt;</span></span><br><span class="line">    <span class="params">&lt;value&gt;</span>yarn<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">    <span class="params">&lt;name&gt;</span>mapreduce.admin.user.env<span class="params">&lt;/name&gt;</span></span><br><span class="line">    <span class="params">&lt;value&gt;</span>HADOOP_MAPRED_HOME=$HADOOP_HOME<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">    <span class="params">&lt;name&gt;</span>yarn.app.mapreduce.am.env<span class="params">&lt;/name&gt;</span></span><br><span class="line">    <span class="params">&lt;value&gt;</span>HADOOP_MAPRED_HOME=$HADOOP_HOME<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">    <span class="params">&lt;name&gt;</span>mapreduce.map.env<span class="params">&lt;/name&gt;</span></span><br><span class="line">    <span class="params">&lt;value&gt;</span>HADOOP_MAPRED_HOME=$HADOOP_HOME<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">    <span class="params">&lt;name&gt;</span>mapreduce.reduce.env<span class="params">&lt;/name&gt;</span></span><br><span class="line">    <span class="params">&lt;value&gt;</span>HADOOP_MAPRED_HOME=$HADOOP_HOME<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">    <span class="params">&lt;name&gt;</span>mapreduce.application.classpath<span class="params">&lt;/name&gt;</span></span><br><span class="line">    <span class="params">&lt;value&gt;</span></span><br><span class="line">         <span class="meta-keyword">/opt/</span>hadoop<span class="meta-keyword">/etc/</span>hadoop,</span><br><span class="line">         <span class="meta-keyword">/opt/</span>hadoop<span class="meta-keyword">/share/</span>hadoop<span class="meta-keyword">/common/</span>*,</span><br><span class="line">         <span class="meta-keyword">/opt/</span>hadoop<span class="meta-keyword">/share/</span>hadoop<span class="meta-keyword">/common/</span>lib<span class="comment">/*,</span></span><br><span class="line"><span class="comment">         /opt/hadoop/share/hadoop/hdfs/*,</span></span><br><span class="line"><span class="comment">         /opt/hadoop/share/hadoop/hdfs/lib/*,</span></span><br><span class="line"><span class="comment">         /opt/hadoop/share/hadoop/mapreduce/*,</span></span><br><span class="line"><span class="comment">         /opt/hadoop/share/hadoop/mapreduce/lib/*,</span></span><br><span class="line"><span class="comment">         /opt/hadoop/share/hadoop/yarn/*,</span></span><br><span class="line"><span class="comment">         /opt/hadoop/share/hadoop/yarn/lib/*</span></span><br><span class="line"><span class="comment">    &lt;/value&gt;</span></span><br><span class="line"><span class="comment">&lt;/property&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>yarn-site.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æŒ‡å®šResourceManagerçš„åœ°å€--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>219.223.243.131<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šreducerè·å–æ•°æ®çš„æ–¹å¼--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.local-dirs<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///data/hadoop/yarn/nm<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.vmem-pmem-ratio<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.pmem-check-enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºç›¸å…³ç›®å½•</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">sudo</span> mkdir -p /<span class="class"><span class="keyword">data</span>/hadoop/hdfs/nn</span></span><br><span class="line"><span class="title">sudo</span> mkdir -p /<span class="class"><span class="keyword">data</span>/hadoop/hdfs/dn</span></span><br><span class="line"><span class="title">sudo</span> mkdir -p /<span class="class"><span class="keyword">data</span>/hadoop/hdfs/snn</span></span><br><span class="line"><span class="title">sudo</span> mkdir -p /<span class="class"><span class="keyword">data</span>/hadoop/yarn/nm</span></span><br><span class="line"><span class="meta"># ç„¶åç»™è¿™äº›ç›®å½•è®¾ç½®è¯»å†™æƒé™ï¼Œ</span></span><br><span class="line"><span class="meta"># å¦‚æœä½¿ç”¨å½“å‰çš„ç”¨æˆ·ï¼ˆérootç”¨æˆ·ï¼‰å¯åŠ¨ç›¸å…³è¿›ç¨‹ï¼Œ`/data`å¿…é¡»å…·æœ‰ç›¸åº”çš„è¯»å†™æƒé™</span></span><br><span class="line"><span class="meta"># ç»™`/data`ç›®å½•åŠå…¶å­ç›®å½•è®¾ç½®è¯»å†™æƒé™ã€‚ -R é€’å½’è®¾ç½®æƒé™</span></span><br><span class="line"><span class="title">sudo</span> chmod -<span class="type">R</span> <span class="number">777</span> /<span class="class"><span class="keyword">data</span></span></span><br></pre></td></tr></table></figure></li><li><p>å¯¹HDFSé›†ç¾¤è¿›è¡Œæ ¼å¼åŒ–ï¼ŒHDFSé›†ç¾¤æ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®çš„</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs namenode -<span class="built_in">format</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="4-3ã€-å¯åŠ¨é›†ç¾¤"><a href="#4-3ã€-å¯åŠ¨é›†ç¾¤" class="headerlink" title="4.3ã€ å¯åŠ¨é›†ç¾¤"></a>4.3ã€ å¯åŠ¨é›†ç¾¤</h3><ol><li><p>å¯åŠ¨HDFSé›†ç¾¤</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨ä¸»èŠ‚ç‚¹</span></span><br><span class="line">hdfs <span class="comment">--daemon start namenode </span></span><br><span class="line"><span class="comment"># å¯åŠ¨ä»èŠ‚ç‚¹</span></span><br><span class="line">hdfs <span class="comment">--daemon start datanode </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éªŒè¯èŠ‚ç‚¹æ˜¯å¦å¯åŠ¨ï¼Œè¾“å…¥ä¸€ä¸‹å‘½ä»¤</span></span><br><span class="line">jps <span class="comment"># çœ‹æ˜¯å¦å‡ºç°namenodeå’Œdatanode</span></span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨YARNé›†ç¾¤</p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># å¯åŠ¨èµ„æºç®¡ç†å™¨</span></span><br><span class="line">yarn --daemon start resourcemanager</span><br><span class="line"><span class="meta"># å¯åŠ¨èŠ‚ç‚¹ç®¡ç†å™¨</span></span><br><span class="line">yarn --daemon start nodemanager</span><br><span class="line"></span><br><span class="line"><span class="meta"># éªŒè¯æ˜¯å¦å¯åŠ¨ï¼ŒåŒæ ·æ˜¯é‡‡ç”¨`jps`å‘½ä»¤ï¼Œçœ‹æ˜¯å¦å‡ºæƒ³ç›¸å…³è¿›ç¨‹</span></span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨ä½œä¸šå†å²æœåŠ¡å™¨</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mapred --daemon start historyserver</span><br><span class="line"># åŒæ ·é‡‡ç”¨`jps`å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ</span><br></pre></td></tr></table></figure></li><li><p>HDFSå’ŒYARNé›†ç¾¤éƒ½æœ‰å¯¹åº”çš„WEBç›‘æ§é¡µé¢ã€‚</p><blockquote><p> HDFS: <a href="http://ip:9870" target="_blank" rel="noopener">http://ip:9870</a> æˆ–è€… localhost:9870</p></blockquote></li></ol><p><img src="https://wx2.sinaimg.cn/mw1024/e0db46edgy1fq6ro1zxiuj20so0pvq5f.jpg" alt="å›¾ç‰‡åç§°" align="center"></p><p><img src="https://wx2.sinaimg.cn/mw1024/e0db46edgy1fq6ro1u9z0j20sh0ntgmn.jpg" alt="å›¾ç‰‡åç§°" align="center"></p><blockquote><p> YARN: <a href="http://ip:8088" target="_blank" rel="noopener">http://ip:8088</a></p></blockquote><p><img src="https://wx4.sinaimg.cn/mw1024/e0db46edgy1fq6ro1zitoj21ag0gstbh.jpg" alt="å›¾ç‰‡åç§°" align="center"></p><ol start="5"><li><p>HDFSé›†ç¾¤çš„ç®€å•æ“ä½œå‘½ä»¤</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -<span class="keyword">ls</span> /   # ç›¸å½“äº<span class="keyword">shell</span>ä¸­çš„ <span class="keyword">ll</span></span><br><span class="line">hdfs dfsadmin -safemode leave  # å…³é—­å®‰å…¨æ¨¡å¼</span><br><span class="line">hdfs dfs -<span class="built_in">mkdir</span> -<span class="keyword">p</span> /user/<span class="built_in">input</span>  # åœ¨hdfsæ–‡ä»¶ç³»ç»Ÿä¸Šçº§è”åˆ›å»ºæ–‡ä»¶/user/<span class="built_in">input</span>ï¼Œ</span><br></pre></td></tr></table></figure></li><li><p>YARNé›†ç¾¤examplesæµ‹è¯•</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># è®¡ç®—PIå€¼çš„ä½œä¸š</span></span><br><span class="line">yarn jar <span class="meta-keyword">/opt/</span>hadoop<span class="meta-keyword">/share/</span>hadoop<span class="meta-keyword">/mapreduce/</span>hadoop-mapreduce-examples-*.jar pi <span class="number">4</span> <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># wordcountä¾‹å­</span></span><br><span class="line"><span class="meta"># é¦–å…ˆåˆ›å»ºä¸€ä¸ªè¾“å…¥æ–‡ä»¶ï¼Œå¹¶ä¸Šä¼ åˆ°hdfsæ–‡ä»¶ç³»ç»Ÿä¸Š</span></span><br><span class="line">hdfs dfs -put input <span class="meta-keyword">/user/</span>heany</span><br><span class="line"><span class="meta"># ç„¶åæ‰§è¡Œ</span></span><br><span class="line">yarn jar <span class="meta-keyword">/opt/</span>hadoop<span class="meta-keyword">/share/</span>hadoop<span class="meta-keyword">/mapreduce/</span>hadoop-mapreduce-examples-*.jar wordcount input output</span><br><span class="line"><span class="meta"># ç”¨å‘½ä»¤è¡ŒæŸ¥çœ‹ç»“æœ</span></span><br><span class="line">hdfs dfs -cat <span class="meta-keyword">/user/</span>output/part-r<span class="number">-00000</span></span><br><span class="line"><span class="meta"># æˆ–è€…åœ¨ç½‘é¡µä¸ŠæŸ¥çœ‹</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="äº”ã€-å®‰è£…Spark"><a href="#äº”ã€-å®‰è£…Spark" class="headerlink" title="äº”ã€ å®‰è£…Spark"></a>äº”ã€ å®‰è£…Spark</h2><h3 id="5-1ã€-ä¸‹è½½å®‰è£…Spark"><a href="#5-1ã€-ä¸‹è½½å®‰è£…Spark" class="headerlink" title="5.1ã€ ä¸‹è½½å®‰è£…Spark"></a>5.1ã€ ä¸‹è½½å®‰è£…Spark</h3><ul><li>ä¸‹è½½Spark(ç¬”è€…ä¸‹è½½çš„æ˜¯spark-2.3.0-bin-hadoop2.7.tgz)</li><li><p>è§£å‹ä¸‹è½½çš„SparkåŒ…</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxvf spark<span class="number">-2.3</span><span class="number">.0</span>-bin-hadoop2<span class="number">.7</span>.tgz -C /opt</span><br></pre></td></tr></table></figure></li><li><p>é‡å‘½å</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢åˆ°å·¥ä½œç›®å½•</span></span><br><span class="line"><span class="keyword">cd</span> <span class="string">/opt</span></span><br><span class="line">sudo mv spark-2.3.0-bin-hadoop2.7 spark</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ç¯å¢ƒå˜é‡</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile</span><br><span class="line"><span class="comment"># åœ¨æœ€åæ·»åŠ ä¸‹é¢çš„ä»£ç </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">SPARK_HOME</span>=/opt/spark</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$SPARK_HOME</span>/bin:$SPARK_HOME/sbin:$PATH</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹æ–‡ä»¶çš„æƒé™</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/opt</span></span><br><span class="line">sudo chown -R yourname<span class="function">:yourname</span> <span class="string">./spark</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="5-2ã€-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#5-2ã€-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="5.2ã€ ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>5.2ã€ ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># æ‹·è´é…ç½®æ–‡ä»¶</span><br><span class="line"><span class="keyword">cd</span> /<span class="keyword">opt</span>/spark</span><br><span class="line"><span class="keyword">cp</span> ./<span class="keyword">conf</span>/spark-env.<span class="keyword">sh</span>.template ./<span class="keyword">conf</span>/spark-env.<span class="keyword">sh</span></span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br><span class="line"><span class="keyword">vim</span> ./<span class="keyword">conf</span>/spark-env.<span class="keyword">sh</span></span><br><span class="line"># åœ¨æœ€åæ·»åŠ ä¸‹é¢çš„ä»£ç </span><br><span class="line">export SPARK_DIST_CLASSPATH=$(/<span class="keyword">opt</span>/hadoop/bin/hadoop classpath)</span><br><span class="line">export JAVA_HOME=/<span class="keyword">opt</span>/jdk</span><br></pre></td></tr></table></figure><h3 id="5-3ã€è¿è¡ŒexampleséªŒè¯å®‰è£…"><a href="#5-3ã€è¿è¡ŒexampleséªŒè¯å®‰è£…" class="headerlink" title="5.3ã€è¿è¡ŒexampleséªŒè¯å®‰è£…"></a>5.3ã€è¿è¡ŒexampleséªŒè¯å®‰è£…</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta-keyword">/opt/</span>spark<span class="meta-keyword">/bin/</span>run-example SparkPi <span class="number">2</span>&gt;<span class="variable">&amp;1</span> | grep <span class="string">"Pi is roughly"</span></span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="meta"># Pi is roughly 3.143635718178591</span></span><br></pre></td></tr></table></figure><h3 id="5-4ã€-è„šæœ¬å¯åŠ¨Hadoopå’ŒSpark"><a href="#5-4ã€-è„šæœ¬å¯åŠ¨Hadoopå’ŒSpark" class="headerlink" title="5.4ã€ è„šæœ¬å¯åŠ¨Hadoopå’ŒSpark"></a>5.4ã€ è„šæœ¬å¯åŠ¨Hadoopå’ŒSpark</h3><ul><li><p>å¯åŠ¨spark</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">opt</span>/spark/sbin/start-<span class="keyword">all</span>.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡WEBé¡µé¢æŸ¥çœ‹</p><blockquote><p> æµè§ˆå™¨è¾“å…¥åœ°å€ï¼š<a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a></p></blockquote></li><li><p>ç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨Hadoopä»¥åŠSparkè„šæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># å¯åŠ¨Hadoopä»¥åŠyarn</span></span><br><span class="line">start-dfs.sh</span><br><span class="line">start-yarn.sh</span><br><span class="line"><span class="comment"># å¯åŠ¨å†å²æœåŠ¡å™¨</span></span><br><span class="line"><span class="comment">#mr-jobhistory-daemon.sh start historyserver</span></span><br><span class="line">mapred --daemon start historyserver</span><br><span class="line"><span class="comment"># å¯åŠ¨Spark</span></span><br><span class="line">/opt/spark/sbin/start-all.sh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢Hadoopä»¥åŠSparkè„šæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># åœæ­¢Hadoopä»¥åŠyarn</span></span><br><span class="line">stop-dfs.sh</span><br><span class="line">stop-yarn.sh</span><br><span class="line"><span class="comment"># åœæ­¢å†å²æœåŠ¡å™¨</span></span><br><span class="line"><span class="comment">#mr-jobhistory-daemon.sh stop historyserver</span></span><br><span class="line">mapred --daemon stop historyserver</span><br><span class="line"><span class="comment"># åœæ­¢Spark</span></span><br><span class="line">/opt/spark/sbin/stop-all.sh</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€å‰è¨€&lt;/h2&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;æœ€è¿‘å¯¼å¸ˆå¸¦çš„é¡¹ç›®æ˜¯ä¸å¤§æ•°æ®ç›¸å…³ï¼Œæ„Ÿè§‰è¿™å‡ å¹´å¤§æ•°æ®æŠ€æœ¯è¿˜æŒºç«çš„ï¼Œå°±æƒ³ç€ä¹Ÿå»å­¦ä¸€ä¸‹ï¼Œä¸°å¯Œè‡ªå·±çš„æŠ€èƒ½æ ˆã€‚æœ¬æ–‡ä¸»è¦è®²çš„æ˜¯hadoop+sparkçš„ç¯å¢ƒæ­å»º,ç„¶åä½¿ç”¨è‡ªå¸¦çš„examplesæµ‹è¯•ç¯å¢ƒï¼Œè¿™é‡Œä¸æ¶‰åŠåŸç†ä»‹ç»ã€‚
    
    </summary>
    
      <category term="åˆ†å¸ƒå¼ä¸å¤§æ•°æ®" scheme="http://heany.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="Ubuntu 17.10 hadoop Spark" scheme="http://heany.github.io/tags/Ubuntu-17-10-hadoop-Spark/"/>
    
  </entry>
  
  <entry>
    <title>Shell Scriptå­¦ä¹ ç¬”è®°</title>
    <link href="http://heany.github.io/2018/03/31/Shell-Script%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://heany.github.io/2018/03/31/Shell-Scriptå­¦ä¹ ç¬”è®°/</id>
    <published>2018-03-31T06:09:19.000Z</published>
    <updated>2019-01-26T14:47:30.578Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€-å‰è¨€"><a href="#ä¸€ã€-å‰è¨€" class="headerlink" title="ä¸€ã€ å‰è¨€"></a>ä¸€ã€ å‰è¨€</h2><p>æœ€è¿‘å¼€å§‹ä½¿ç”¨Linuxç³»ç»Ÿï¼Œç»å¸¸æ“ä½œterminalï¼Œç»å¸¸ä½¿ç”¨Linuxä¸‹çš„bashæ¥è¿›è¡Œä¸€äº›é‡å¤çš„æ“ä½œï¼Œå› æ­¤æƒ³å­¦ä¹ <code>shell script</code>æ¥ç®€åŒ–ä¸€äº›å®‰è£…è½¯ä»¶çš„æ­¥éª¤ï¼Œå®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ä¸€äº›åº”ç”¨ï¼ŒèŠ‚çº¦æ—¶é—´ã€‚æœ¬æ–‡ä»‹ç»äº†ä¸€äº›bashå‘½ä»¤çš„ä¸€äº›æŠ€å·§ï¼Œç„¶åè¯¦ç»†åœ°è®²è§£äº†<strong>æ­£åˆ™è¡¨è¾¾å¼ä¸æ–‡ä»¶æ ¼å¼åŒ–å¤„ç†</strong>ï¼Œå¹¶ä¸”å¯¹äºæ¯ä¸€ä¸ªæ“ä½œéƒ½æœ‰ç›¸å…³çš„å®ä¾‹è¿›è¡Œç»ƒä¹ ï¼ŒåŠ å¼ºç†è§£;<strong><code>shell script</code></strong>ï¼ŒåŒæ ·å¯¹äºæ¯ä¸€ä¸ªåŠŸèƒ½éƒ½æœ‰ç›¸åº”çš„å®ä¾‹è¿›è¡Œç»ƒä¹ ï¼Œå¯ä»¥è¯´ï½éå¸¸é€‚åˆæ–°æ‰‹æ¥é˜…è¯»å­¦ä¹ äº†ï¼</p><h2 id="äºŒã€-åŸºç¡€çŸ¥è¯†"><a href="#äºŒã€-åŸºç¡€çŸ¥è¯†" class="headerlink" title="äºŒã€ åŸºç¡€çŸ¥è¯†"></a>äºŒã€ åŸºç¡€çŸ¥è¯†</h2><p>&nbsp;&nbsp;ä»€ä¹ˆæ˜¯ shell script (ç¨‹åºåŒ–è„šæœ¬) å‘¢ï¼Ÿå°±å­—é¢ä¸Šçš„æ„ä¹‰ï¼Œæˆ‘ä»¬å°†ä»–åˆ†ä¸ºä¸¤éƒ¨ä»½ã€‚ åœ¨ã€ shell ã€éƒ¨åˆ†ï¼Œæˆ‘ä»¬åœ¨bashå½“ä¸­å·²ç»æè¿‡äº†ï¼Œé‚£æ˜¯ä¸€ä¸ªæ–‡å­—ä»‹é¢åº•ä¸‹è®©æˆ‘ä»¬ä¸ç³»ç»Ÿæ²Ÿé€šçš„ä¸€ä¸ªå·¥å…·ä»‹é¢ã€‚é‚£ä¹ˆã€ script ã€æ˜¯å•¥ï¼Ÿ å­—é¢ä¸Šçš„æ„ä¹‰ï¼Œ script æ˜¯ã€è„šæœ¬ã€å‰§æœ¬ã€çš„æ„æ€ã€‚æ•´å¥è¯æ˜¯è¯´ï¼Œ shell script æ˜¯é’ˆå¯¹ shell æ‰€å†™çš„ã€å‰§æœ¬ï¼ã€<br>&nbsp;&nbsp;ä»€ä¹ˆä¸œè¥¿å•Šï¼Ÿå…¶å®ï¼Œ shell script æ˜¯åˆ©ç”¨ shell çš„åŠŸèƒ½æ‰€å†™çš„ä¸€ä¸ªã€ç¨‹åº (program)ã€ï¼Œè¿™ä¸ªç¨‹åºæ˜¯ä½¿ç”¨çº¯æ–‡å­—æ¡£ï¼Œå°†ä¸€äº› shell çš„è¯­æ³•ä¸å‘½ä»¤(å«å¤–éƒ¨å‘½ä»¤)å†™åœ¨é‡Œé¢ï¼Œ æ­é…æ­£è§„è¡¨ç¤ºæ³•ã€ç®¡çº¿å‘½ä»¤ä¸æ•°æ®æµé‡å¯¼å‘ç­‰åŠŸèƒ½ï¼Œä»¥è¾¾åˆ°æˆ‘ä»¬æ‰€æƒ³è¦çš„å¤„ç†ç›®çš„ã€‚<br>&nbsp;&nbsp;shell script æ›´æä¾›é˜µåˆ—ã€å›åœˆã€æ¡ä»¶ä¸é€»è¾‘åˆ¤æ–­ç­‰é‡è¦åŠŸèƒ½ï¼Œè®©ä½¿ç”¨è€…ä¹Ÿå¯ä»¥ç›´æ¥ä»¥ shell æ¥æ’°å†™ç¨‹åºï¼Œè€Œä¸å¿…ä½¿ç”¨ç±»ä¼¼ C ç¨‹åºè¯­è¨€ç­‰ä¼ ç»Ÿç¨‹åºæ’°å†™çš„è¯­æ³•å‘¢ï¼</p><h3 id="2-1-ä¸€äº›shellå‘½ä»¤çš„åŸºç¡€çŸ¥è¯†åŠæŠ€å·§"><a href="#2-1-ä¸€äº›shellå‘½ä»¤çš„åŸºç¡€çŸ¥è¯†åŠæŠ€å·§" class="headerlink" title="2.1 ä¸€äº›shellå‘½ä»¤çš„åŸºç¡€çŸ¥è¯†åŠæŠ€å·§"></a>2.1 ä¸€äº›shellå‘½ä»¤çš„åŸºç¡€çŸ¥è¯†åŠæŠ€å·§</h3><p>&nbsp;&nbsp;ä¸€äº›å¿«æ·é”®ï¼š<br><code>^A</code> :é¼ æ ‡å…‰æ ‡ç§»åˆ°å‘½ä»¤æœ€å·¦ç«¯<br><code>^E</code> :é¼ æ ‡å…‰æ ‡ç§»åˆ°å‘½ä»¤æœ€å³ç«¯<br><code>^k</code> :åˆ é™¤é¼ æ ‡å…‰æ ‡åé¢çš„å‘½ä»¤<br><code>^u</code> :åˆ é™¤é¼ æ ‡å…‰æ ‡å‰é¢çš„å‘½ä»¤<br><code>^s</code> :é”å®šterminal<br><code>^Q</code> :è§£é”<br><code>^y</code> :æ’¤é”€ä¸Šä¸€æ¬¡æ“ä½œ<br><code>^D</code> :è¾“å…¥ç»“æŸï¼ˆEOFï¼‰ï¼Œä¾‹å¦‚é‚®ä»¶ç»“æŸçš„æ—¶å€™<br><code>^Z</code> :æš‚åœç›®å‰çš„å‘½ä»¤</p><p><code>cat</code>å‘½ä»¤çš„ä¸€äº›æŠ€å·§ï¼šä»¥ä¸‹ä»£ç å°†å†…å®¹å†™å…¥file<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="xml"><span class="tag">&lt;&lt; <span class="attr">EOF</span> &gt;</span></span> file</span><br><span class="line"><span class="quote">&gt; hello</span></span><br><span class="line"><span class="quote">&gt; world</span></span><br><span class="line"><span class="quote">&gt; ......</span></span><br><span class="line"><span class="quote">&gt; EOF</span></span><br></pre></td></tr></table></figure></p><blockquote><p> ç®¡é“åŠtee</p></blockquote><p>ç®¡é“<br>:    ç®¡é“çš„ä½œç”¨æ˜¯å°†å‰ä¸€æ¡å‘½ä»¤çš„è¾“å‡ºå˜æˆç®¡é“åå‘½ä»¤çš„è¾“å…¥<br>        ls /bin | wc -l   ##ç»Ÿè®¡ ls /binå‘½ä»¤è¾“å‡ºçš„è¡Œæ•°<br>    ç³»ç»Ÿä¸­é”™è¯¯çš„è¾“å‡ºæ˜¯æ— æ³•é€šè¿‡ç®¡é“çš„<br>    ç”¨ <code>2&gt;&amp;1</code> å¯ä»¥æŠŠé”™è¯¯çš„è¾“å‡ºç¼–å·ç”±2å˜æˆ1</p><p>tee<br>:    <code>tee</code>å¤åˆ¶è¾“å‡ºåˆ°æŒ‡å®šä½ç½®<br>        data | tee file |wc -l  ##teeå‘½ä»¤å¤åˆ¶dateå‘½ä»¤çš„è¾“å‡ºåˆ°fileä¸­ï¼Œå¹¶ç»Ÿè®¡è¾“å‡ºè¡Œæ•°</p><h3 id="2-2-è„šæœ¬ä¸­è°ƒç”¨å…¶ä»–çš„è§£é‡Šå™¨-å¦‚python-æ‰§è¡Œçš„ä»£ç "><a href="#2-2-è„šæœ¬ä¸­è°ƒç”¨å…¶ä»–çš„è§£é‡Šå™¨-å¦‚python-æ‰§è¡Œçš„ä»£ç " class="headerlink" title="2.2 è„šæœ¬ä¸­è°ƒç”¨å…¶ä»–çš„è§£é‡Šå™¨(å¦‚python)æ‰§è¡Œçš„ä»£ç "></a>2.2 è„šæœ¬ä¸­è°ƒç”¨å…¶ä»–çš„è§£é‡Šå™¨(å¦‚python)æ‰§è¡Œçš„ä»£ç </h3><p>&nbsp;&nbsp;shell scriptä¸­ç¬¬ä¸€è¡Œé€šå¸¸éœ€è¦ä¸€è¡ŒæŒ‡ä»¤æŒ‡å®šæ‰§è¡Œæ­¤è„šæœ¬çš„è§£é‡Šå™¨,å¦‚ï¼š</p><pre><code>#!/bin/bash#!/bin/python#!/bin/perl</code></pre><p>ä»¥ä¸Šåˆ†åˆ«æŒ‡å®šäº†å¸¸ç”¨çš„ä¸‰ç§è„šæœ¬çš„è§£é‡Šå™¨ï¼Œ</p><blockquote><p> å¤šæ¡å‘½ä»¤æ‰§è¡Œ</p></blockquote><ol><li>ç”¨<code>;</code>å·åˆ†éš”ï¼Œè¿™ç§æ–¹å¼å„æ¡å‘½ä»¤ä¹‹é—´æ²¡æœ‰é€»è¾‘æ€§<br> cd; ls; ll</li><li>ç”¨é€»è¾‘è¿æ¥ç¬¦<code>&amp;&amp;</code> <code>||</code>æ¥è¿æ¥ã€‚<br> ./confirgure &amp;&amp; make &amp;&amp; make install  ##å¿…é¡»å‰é¢çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„å‘½ä»¤<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> con1</span><br><span class="line">    com2</span><br><span class="line"><span class="keyword">else</span> com3</span><br></pre></td></tr></table></figure></li></ol><p>ä¸Šé¢è¿™æ®µä»£ç ç›¸å½“äº<br>    com1 &amp;&amp; com2 &amp;&amp; com3</p><blockquote><p> shellé€šé…ç¬¦</p></blockquote><p><code>*</code> :ä»»æ„ä¸ª<br><code>?</code> :1ä¸ª<br><code>[]</code>:åŒ¹é…æ‹¬å·é‡Œé¢çš„ä¸€ä¸ª</p><blockquote><p> <code>echo</code>è¾“å‡ºé¢œè‰²æ–‡æœ¬</p></blockquote><pre><code>echo -e &quot;\e[1;31m This is red text. \e[0m&quot;</code></pre><blockquote><p> <code>printf</code>æ ¼å¼åŒ–è¾“å‡º<br>    printf â€œhello\nâ€</p></blockquote><blockquote><p> <code>read</code>å‘½ä»¤å˜é‡é”®ç›˜è¯»å–ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p></blockquote><pre><code>read [-pt] variableparas:-p :åé¢æ¥æç¤ºç¬¦-t :åé¢æ¥ç­‰å¾…çš„â€œç§’æ•°â€example:read atestread -p &quot;please a string:&quot; -t 30 atest</code></pre><blockquote><p> <code>declare/typeset</code>å‘½ä»¤ï¼šå£°æ˜å˜é‡çš„ç±»å‹ï¼šé»˜è®¤ç±»å‹ä¸ºå­—ç¬¦ä¸²</p></blockquote><pre><code>declare [-aixr] variableparas:-a :å°†åé¢çš„variableçš„å˜é‡å®šä¹‰ä¸ºæ•°ç»„ï¼ˆarrayï¼‰ç±»å‹-i :å®šä¹‰ä¸ºintegerç±»å‹-x :ç”¨æ³•ä¸exportä¸€æ ·ï¼Œå°†åé¢çš„å˜é‡å˜æˆç¯å¢ƒå˜é‡-r :å°†å˜é‡è®¾ç½®æˆä¸ºreadonlyç±»å‹ï¼Œè¯¥å˜é‡ä¸å¯è¢«æ›´æ”¹ï¼Œä¹Ÿä¸èƒ½é‡è®¾example:sum=100+300+50echo $sum  # sum=100+300+50declare -i sum=100+300+50echo $sum    #450</code></pre><blockquote><p> <code>array</code>æ•°ç»„å˜é‡ç±»å‹;è¯»å–æ—¶ï¼š${æ•°ç»„}</p></blockquote><pre><code>var[index]=contentexample:var[1]=&quot;Tom&quot;var[2]=&quot;tony&quot;echo &quot;${var[1]},${var[2]}&quot;   #Tom,tony</code></pre><blockquote><p> <code>alias</code>ã€<code>unalias</code>å‘½ä»¤åˆ«åè®¾ç½®ï¼š;<br>    alias lm=â€™ls -l | moreâ€™  #lmæ‰§è¡Œçš„æ˜¯ls -all more<br>    unalias lm   #å»æ‰lmå‘½ä»¤çš„åˆ«å</p></blockquote><blockquote><p> <code>history</code>æŸ¥è¯¢å†å²å‘½ä»¤</p></blockquote><pre><code>history [n]history [-c]history [-raw]paras:n :æ•°å­—ï¼Œåˆ—å‡ºæœ€è¿‘çš„næ¡å‘½ä»¤è¡Œçš„æ„æ€-c ï¼šå°†ç›®å‰çš„shellä¸­çš„æ‰€æœ‰historyå†…å®¹å…¨éƒ¨æ¶ˆé™¤-a : å°†æ–°å¢çš„historyå‘½ä»¤æ–°å¢è¿›å»histfiles,æˆ–é»˜è®¤å†™å…¥~/.bash_history-r : å°†histfilesçš„å†…å®¹è¯»åˆ°ç›®å‰è¿™ä¸ªshellçš„historyä¸­-w : å°†ç›®å‰çš„historyè®°å¿†å†…å®¹å†™è¿›histfilesä¸­ã€‚å¦ï¼šï¼number ï¼šæ‰§è¡Œç¬¬å‡ æ¡å‘½ä»¤çš„æ„æ€!command ï¼šç”±æœ€è¿‘çš„å‘½ä»¤å‘å‰æœå¯»å‘½ä»¤ä¸²å¼€å¤´commandçš„é‚£ä¸ªå‘½ä»¤ï¼Œå¹¶æ‰§è¡Œ!! : æ‰§è¡Œä¸Šä¸€ä¸ªå‘½ä»¤</code></pre><h3 id="2-3-æ•°æ®æµé‡å®šå‘-redirect"><a href="#2-3-æ•°æ®æµé‡å®šå‘-redirect" class="headerlink" title="2.3 æ•°æ®æµé‡å®šå‘(redirect)"></a>2.3 æ•°æ®æµé‡å®šå‘(redirect)</h3><blockquote><p> <strong>æ•°æ®æµé‡å®šå‘</strong>å°±æ˜¯å°†æŸä¸ªå‘½ä»¤æ‰§è¡Œååº”è¯¥è¦å‡ºç°åœ¨å±å¹•ä¸Šçš„æ•°æ®ä¼ è¾“åˆ°å…¶ä»–çš„åœ°æ–¹ã€‚</p></blockquote><ul><li>æ ‡å‡†è¾“å…¥(stdin):ä»£ç ä¸º0ï¼Œä½¿ç”¨<code>&lt;</code>(è¦†ç›–)æˆ–<code>&lt;&lt;</code>(è¿½åŠ )</li><li>æ ‡å‡†è¾“å‡º(stdout)ï¼šä»£ç ä¸º1ï¼Œä½¿ç”¨<code>&gt;</code>æˆ–<code>&gt;&gt;</code></li><li>æ ‡å‡†é”™è¯¯è¾“å‡º(stderr):ä»£ç ä¸º2ï¼Œä½¿ç”¨<code>2&gt;</code>æˆ–<code>2&gt;&gt;</code></li></ul><blockquote><p> <code>/dev/null</code>åƒåœ¾æ¡¶é»‘æ´è®¾å¤‡</p></blockquote><pre><code>find /home -name .bashrc 2&gt; /dec/null  #å°†é”™è¯¯çš„æ•°æ®ä¸¢å¼ƒï¼Œå±å¹•ä¸Šæ˜¾ç¤ºæ­£ç¡®çš„æ•°æ®## /home/heany/.bashrc</code></pre><blockquote><p> <code>standard input</code>:<code>&lt;</code>ä¸<code>&lt;&lt;</code></p></blockquote><pre><code>cat &gt; catfile &lt; ~/.bashrc #ç”¨stdinæ›¿ä»£é”®ç›˜çš„è¾“å…¥ä»¥åˆ›å»ºæ–°æ–‡ä»¶çš„ç®€å•æµç¨‹cat &gt; catfile &lt;&lt; &quot;eof&quot;&gt; This is a test.&gt; OK now stop&gt; eof    #è¾“å…¥è¿™ä¸ªå…³é”®å­—ï¼Œç«‹åˆ»å°±ç»“æŸä¸éœ€è¦è¾“å…¥[ctrl+D]</code></pre><h3 id="2-4-ç®¡é“å‘½ä»¤-pipe"><a href="#2-4-ç®¡é“å‘½ä»¤-pipe" class="headerlink" title="2.4 ç®¡é“å‘½ä»¤(pipe)"></a>2.4 ç®¡é“å‘½ä»¤(pipe)</h3><blockquote><p> <strong>ç®¡é“å‘½ä»¤</strong>ä½¿ç”¨<code>|</code>è¿™ä¸ªç•Œå®šç¬¦å·ï¼Œä»…èƒ½å¤„ç†ç»ç”±å‰é¢ä¸€ä¸ªå‘½ä»¤ä¼ æ¥çš„æ­£ç¡®çš„ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯standard outputçš„ä¿¡æ¯ï¼Œå¯¹äºstandard errorå¹¶æ²¡æœ‰ç›´æ¥å¤„ç†çš„èƒ½åŠ›ã€‚ç®¡é“åé¢æ¥çš„ç¬¬ä¸€ä¸ªæ•°æ®å¿…å®šæ˜¯â€å‘½ä»¤â€œï¼Œè€Œä¸”è¿™ä¸ªå‘½ä»¤å¿…é¡»è¦èƒ½å¤Ÿæ¥æ”¶standard inputçš„æ•°æ®æ‰è¡Œï¼Œè¿™æ ·çš„å‘½ä»¤æ‰å¯ä»¥æ˜¯â€œç®¡é“å‘½ä»¤â€ï¼Œä¾‹å¦‚less, more,head, tailç­‰ã€‚è€Œls, cp ,mvè¿™äº›åˆ™ä¸æ˜¯ç®¡é“å‘½ä»¤ï¼Œå› ä¸ºä»–ä»¬ä¸ä¼šæ¥æ”¶æ¥è‡ªstdinçš„æ•°æ®ã€‚</p></blockquote><h4 id="2-4-1-é€‰å–å‘½ä»¤ï¼šcut-grep"><a href="#2-4-1-é€‰å–å‘½ä»¤ï¼šcut-grep" class="headerlink" title="2.4.1 é€‰å–å‘½ä»¤ï¼šcut,grep"></a>2.4.1 é€‰å–å‘½ä»¤ï¼šcut,grep</h4><p>  <em>é€‰å–å‘½ä»¤</em>å°±æ˜¯å°†ä¸€æ®µæ•°æ®ç»è¿‡åˆ†æåï¼Œå–å‡ºæˆ‘ä»¬æ‰€æƒ³è¦çš„ï¼Œæˆ–è€…æ˜¯ç»ç”±åˆ†æå…³é”®å­—ï¼Œå¾—æˆ‘ä»¬æ‰€æƒ³è¦çš„å“ªä¸€è¡Œï¼Œé€šå¸¸æ˜¯é’ˆå¯¹â€è¡Œâ€æ¥åˆ†æçš„ã€‚</p><blockquote><p> <code>cut</code>è¿™ä¸ªå‘½ä»¤å¯ä»¥å°†ä¸€æ®µä¿¡æ¯çš„æŸä¸€æ®µâ€œåˆ‡å‡ºæ¥â€ï¼Œå¤„ç†ä¿¡æ¯ä»¥â€œè¡Œâ€ä¸ºå•ä½ã€‚</p></blockquote><pre><code>cut -d &apos;åˆ†éš”å­—ç¬¦&apos; -f fields  #ç”¨äºåˆ†éš”å­—ç¬¦cut -c å­—ç¬¦èŒƒå›´     #ç”¨äºæ’åˆ—æ•´é½çš„ä¿¡æ¯paras:-f ï¼šä¾æ®-dçš„åˆ†éš”å­—ç¬¦å°†ä¸€æ®µä¿¡æ¯åˆ‡å‰²æˆæ•°æ®µï¼Œç”¨-få–å‡ºç¬¬å‡ æ®µçš„æ„æ€ã€‚-c ï¼šä»¥å­—ç¬¦çš„å•ä½å–å‡ºå›ºå®šå­—ç¬¦åŒºé—´examples:echo $PATH | cut -d &apos;:&apos; -f 5   ## å°†echo $PATHç»“æœä»¥&quot;:&quot;åˆ†éš”ï¼Œï¼Œæ‰¾åˆ°ç¬¬5ä¸ªexport | cut -c 12-  ## å°†exportè¾“å‡ºçš„ä¿¡æ¯å–å¾—ç¬¬12å­—ç¬¦åçš„æ‰€æœ‰å­—ç¬¦ä¸²</code></pre><blockquote><p> <code>grep</code>å‘½ä»¤æ˜¯åˆ†æä¸€è¡Œä¿¡æ¯ï¼Œè‹¥å½“ä¸­æœ‰æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ï¼Œå°±å°†è¯¥è¡Œæ‹¿å‡ºæ¥ã€‚<br>    grep [-acinv] [â€“color=auto] â€˜æŸ¥æ‰¾å­—ç¬¦ä¸²â€™ filename<br>    paras:<br>    -a:å°†binaryæ–‡ä»¶ä»¥textæ–‡ä»¶çš„å½¢å¼æŸ¥æ‰¾æ•°æ®<br>    -c:è®¡ç®—æ‰¾åˆ°â€æŸ¥æ‰¾å­—ç¬¦ä¸²â€çš„æ¬¡æ•°<br>    -i:å¿½ç•¥å¤§å°å†™çš„ä¸åŒï¼Œæ‰€ä»¥å¤§å°å†™è§†ä¸ºç›¸åŒ<br>    -n:é¡ºä¾¿è¾“å‡ºè¡Œå·<br>    -v: åå‘é€‰æ‹©ï¼Œå³æ˜¾ç¤ºæ²¡æœ‰â€æŸ¥æ‰¾å­—ç¬¦ä¸²â€å†…å®¹çš„é‚£ä¸€è¡Œ<br>    â€“color=auto : å¯ä»¥å°†æ‰¾åˆ°çš„å…³é”®å­—éƒ¨åˆ†åŠ ä¸Šé¢œè‰²æ˜¾ç¤º<br>    examples:<br>    last | grep â€˜rootâ€™  #å°†lastä¸­æœ‰å‡ºç°rootçš„é‚£ä¸€è¡Œå°±å–å‡ºæ¥<br>    last | grep -v â€˜rootâ€™ # ä¸ä¸Šé¢ç›¸åï¼Œåªè¦æ²¡æœ‰rootå°±å–å‡º<br>    last | grep â€˜rootâ€™ | cut -d â€˜â€™ -f 1  #åœ¨å–å‡ºrootåï¼Œåˆ©ç”¨ä¸Šä¸€ä¸ªå‘½ä»¤cutçš„å¤„ç†ï¼Œå°±èƒ½å–å‡ºç¬¬ä¸€åˆ—</p></blockquote><h4 id="2-4-2-æ’åºå‘½ä»¤ï¼šsort-wc-uniq"><a href="#2-4-2-æ’åºå‘½ä»¤ï¼šsort-wc-uniq" class="headerlink" title="2.4.2 æ’åºå‘½ä»¤ï¼šsort, wc ,uniq"></a>2.4.2 æ’åºå‘½ä»¤ï¼šsort, wc ,uniq</h4><blockquote><p> <code>sort</code>æ’åº</p></blockquote><pre><code>sort [-fbMnrtuk] [file or stdin]paras:-f : å¿½ç•¥å¤§å°å†™çš„å·®å¼‚-b : å¿½ç•¥æœ€å‰é¢çš„ç©ºæ ¼ç¬¦éƒ¨åˆ†-M : ä»¥æœˆä»½çš„åå­—æ¥æ’åº-n : ä½¿ç”¨â€çº¯æ•°å­—â€œè¿›è¡Œæ’åº-r : åå‘æ’åº-u : å°±æ˜¯uniqï¼Œç›¸åŒçš„æ•°æ®ä¸­ï¼Œä»…å‡ºç°ä¸€è¡Œä»£è¡¨-t : åˆ†éš”ç¬¦ï¼Œé»˜è®¤æ˜¯ç”¨[Tab]é”®æ¥åˆ†éš”-k : ä»¥é‚£ä¸ªåŒºé—´(field)æ¥è¿›è¡Œæ’åºçš„æ„æ€examples:cat /etc/passwd | sort -t &apos;:&apos; -k 3  #ä»¥:æ¥åˆ†éš”ï¼Œä»¥ç¬¬ä¸‰åˆ—æ¥æ’åºlast | cut -d &apos;&apos; -f1 | sort  #åˆ©ç”¨lastå°†è¾“å‡ºçš„æ•°æ®ä»…å–è´¦å·ï¼Œå¹¶åŠ ä»¥æ’åº</code></pre><blockquote><p> <code>uniq</code>å°†é‡å¤çš„æ•°å­—ä»…åˆ—å‡ºä¸€ä¸ªæ˜¾ç¤º</p></blockquote><pre><code>uniq [-ic]paras:-i : å¿½ç•¥å¤§å°å†™å­—ç¬¦çš„ä¸åŒ-c : è¿›è¡Œè®¡æ•°examples:last | cut -d &apos;&apos; -f1 | sort |uniq  # ä½¿ç”¨lastå°†è´¦å·åˆ—å‡ºï¼Œä»…å–å‡ºè´¦å·åˆ—ï¼Œè¿›è¡Œæ’åºåå–å‡ºæœ€åä¸€ä½</code></pre><blockquote><p> <code>wc</code>è®¡ç®—è¾“å‡ºä¿¡æ¯çš„æ•´ä½“æ•°æ®</p></blockquote><pre><code>wc [-lwm]paras:-l : ä»…åˆ—å‡ºè¡Œ-w : ä»…åˆ—å‡ºå¤šå°‘å­—-m : å¤šå°‘å­—ç¬¦examples:cat /etc/man.config | wc  #åˆ—å‡ºconfigé‡Œé¢åˆ°åº•æœ‰å¤šå°‘ç›¸å…³è¡Œæ•°ã€å­—æ•°ã€å­—ç¬¦æ•°ï¼Œåˆ†åˆ«è¾“å‡ºä¸‰åˆ—</code></pre><h4 id="2-4-3-åŒå‘é‡å®šå‘ï¼štee"><a href="#2-4-3-åŒå‘é‡å®šå‘ï¼štee" class="headerlink" title="2.4.3 åŒå‘é‡å®šå‘ï¼štee"></a>2.4.3 åŒå‘é‡å®šå‘ï¼štee</h4><pre><code>*tee*ä¼šåŒæ—¶å°†æ•°æ®æµé€ä¸æ–‡ä»¶äºå±å¹•ï¼Œè€Œè¾“å‡ºåˆ°å±å¹•çš„å°±æ˜¯standout,å¯ä»¥è®©ä¸‹ä¸ªå‘½ä»¤ç»§ç»­å¤„ç†ã€‚tee [-a] fileparas:-a : ä»¥ç´¯åŠ (append)çš„æ–¹å¼ï¼Œå°†æ•°æ®åŠ å…¥fileå½“ä¸­ã€‚examples:last | tee [-a] last.list | cut -d &apos;&apos; -f1   #å°†lastçš„è¾“å‡ºå­˜ä¸€ä»½last.listæ–‡ä»¶ä¸­ </code></pre><h4 id="2-4-4-å­—ç¬¦è½¬æ¢å‘½ä»¤ï¼štr-col-join-paste-expand"><a href="#2-4-4-å­—ç¬¦è½¬æ¢å‘½ä»¤ï¼štr-col-join-paste-expand" class="headerlink" title="2.4.4 å­—ç¬¦è½¬æ¢å‘½ä»¤ï¼štr, col, join, paste, expand"></a>2.4.4 å­—ç¬¦è½¬æ¢å‘½ä»¤ï¼štr, col, join, paste, expand</h4><p><em>ä¸»è¦ä»‹ç»è¿™äº›å­—ç¬¦è½¬æ¢å‘½ä»¤åœ¨ç®¡é“ä¸­çš„ä½¿ç”¨æ–¹æ³•</em></p><blockquote><p> <code>tr</code>å¯ä»¥ç”¨æ¥åˆ é™¤ä¸€æ®µä¿¡æ¯å½“ä¸­çš„æ–‡å­—ï¼Œæˆ–è€…æ˜¯è¿›è¡Œæ–‡å­—ä¿¡æ¯çš„æ›¿æ¢</p></blockquote><pre><code>tr [-ds] SET1 ....paras:-d : åˆ é™¤ä¿¡æ¯å½“ä¸­çš„SET1è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œ-s : æ›¿æ¢æ‰é‡å¤çš„å­—ç¬¦ä¸²examples:last | tr [a-z] [A-Z]  #å°†lastè¾“å‡ºçš„ä¿¡æ¯ä¸­æ‰€æœ‰çš„å°å†™å­—ç¬¦å˜æˆå¤§å†™å­—ç¬¦</code></pre><blockquote><p> <code>col</code></p></blockquote><pre><code>col [-xb]paras:-x : å°†Tabé”®è½¬æ¢æˆå¯¹ç­‰çš„ç©ºæ ¼é”®-b : åœ¨æ–‡å­—å†…æœ‰åæ–œæ \æ—¶ï¼Œä»…ä¿ç•™åæ–œæ æœ€åæ¥çš„é‚£ä¸ªå­—ç¬¦</code></pre><blockquote><p> <code>join</code>å¤„ç†ä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´çš„æ•°æ®ï¼Œè€Œä¸”ä¸»è¦æ˜¯å°†ä¸¤ä¸ªæ–‡ä»¶å½“ä¸­æœ‰ç›¸åŒæ•°æ®çš„é‚£ä¸€è¡ŒåŠ åœ¨ä¸€èµ·ã€‚</p></blockquote><pre><code>join [-ti12] file1 file2paras:-t : joiné»˜è®¤ä»¥ç©ºæ ¼ç¬¦åˆ†éš”æ•°æ®ï¼Œå¹¶ä¸”å¯¹æ¯”â€ç¬¬ä¸€ä¸ªå­—æ®µâ€œçš„æ•°æ®ï¼Œå¦‚æœä¸¤ä¸ªæ–‡ä»¶ç›¸åŒï¼Œåˆ™å°†ä¸¤æ¡æ•°æ®è¿æˆä¸€è¡Œï¼Œä¸”ç¬¬ä¸€ä¸ªå­—æ®µæ”¾åœ¨ç¬¬ä¸€ä¸ªã€‚-i : å¿½ç•¥å¤§å°å†™çš„å·®å¼‚-1 : è¿™ä¸ªæ˜¯æ•°å­—çš„1,ä»£è¡¨ç¬¬ä¸€ä¸ªæ–‡ä»¶è¦ç”¨å“ªä¸ªå­—æ®µæ¥åˆ†æçš„æ„æ€-2 : ä»£è¡¨ç¬¬äºŒä¸ªæ–‡ä»¶è¦ç”¨å“ªä¸ªå­—æ®µæ¥åˆ†æçš„æ„æ€ã€‚examples:join -t &apos;:&apos; /etc/passwd /etc/shadow #å°†ä¸¤ä¸ªæ–‡ä»¶ç¬¬ä¸€ä¸ªå­—æ®µç›¸åŒè€…æ•´åˆæˆä¸€è¡Œ</code></pre><blockquote><p> <code>paste</code>ç›´æ¥å°†ä¸¤è¡Œè´´åœ¨ä¸€èµ·ï¼Œä¸”ä¸­é—´ä¸€[tab]é”®éš”å¼€ã€‚</p></blockquote><pre><code>paste [-d] file1 file2paras:-d : åé¢å¯ä»¥æ¥åˆ†éš”å­—ç¬¦ï¼Œé»˜è®¤æ˜¯ä»¥[tab]æ¥åˆ†éš”çš„-  : å¦‚æœfileéƒ¨åˆ†å†™æˆ - ï¼Œè¡¨ç¤ºæ¥è‡ªstandard inputçš„æ•°æ®çš„æ„æ€examples:paste /etc/passwd /etc/shadow  # å°†ä¸¤ä¸ªæ–‡ä»¶çš„åŒä¸€è¡Œè´´åœ¨ä¸€èµ·</code></pre><h4 id="2-4-5-åˆ‡å‰²å‘½ä»¤ï¼šsplit"><a href="#2-4-5-åˆ‡å‰²å‘½ä»¤ï¼šsplit" class="headerlink" title="2.4.5 åˆ‡å‰²å‘½ä»¤ï¼šsplit"></a>2.4.5 åˆ‡å‰²å‘½ä»¤ï¼šsplit</h4><p><em>åˆ‡å‰²å‘½ä»¤</em>å°†ä¸€ä¸ªå¤§æ–‡ä»¶ä¾æ®æ–‡ä»¶å¤§å°æˆ–è¡Œæ•°æ¥åˆ‡å‰²æˆä¸ºå°æ–‡ä»¶</p><pre><code>split [-bl] file PREFIXparas:-b : åé¢å¯æ¥æ¬²åˆ‡å‰²æˆçš„æ–‡ä»¶å¤§å°ï¼Œå¯åŠ å•ä½-l : ä»¥è¡Œæ•°æ¥è¿›è¡Œåˆ‡å‰²PREFIX : ä»£è¡¨å‰å¯¼ç¬¦ï¼Œå¯ä½œä¸ºåˆ‡å‰²æ–‡ä»¶çš„å‰å¯¼æ–‡å­—ã€‚examples:cd /tmp; split -b 300k /etc/termcap termcap  # å°†/etc/termcapåˆ†æˆ300Kä¸€ä¸ªæ–‡ä»¶ls -al / | split -l 10 -lsroot #å°†ä½¿ç”¨ls-al /è¾“å‡ºçš„ä¿¡æ¯ä¸­ï¼Œæ¯10è¡Œè®°å½•æˆä¸€ä¸ªæ–‡ä»¶</code></pre><h2 id="ä¸‰ã€-æ­£åˆ™è¡¨è¾¾å¼ä¸æ–‡ä»¶æ ¼å¼åŒ–å¤„ç†"><a href="#ä¸‰ã€-æ­£åˆ™è¡¨è¾¾å¼ä¸æ–‡ä»¶æ ¼å¼åŒ–å¤„ç†" class="headerlink" title="ä¸‰ã€ æ­£åˆ™è¡¨è¾¾å¼ä¸æ–‡ä»¶æ ¼å¼åŒ–å¤„ç†"></a>ä¸‰ã€ æ­£åˆ™è¡¨è¾¾å¼ä¸æ–‡ä»¶æ ¼å¼åŒ–å¤„ç†</h2><h3 id="3-1ã€-æ­£åˆ™è¡¨è¾¾å¼æ¦‚å¿µ-Regular-Expression"><a href="#3-1ã€-æ­£åˆ™è¡¨è¾¾å¼æ¦‚å¿µ-Regular-Expression" class="headerlink" title="3.1ã€ æ­£åˆ™è¡¨è¾¾å¼æ¦‚å¿µ(Regular Expression)"></a>3.1ã€ æ­£åˆ™è¡¨è¾¾å¼æ¦‚å¿µ(Regular Expression)</h3><p>  ç®€å•çš„è¯´,æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯å¤„ç†å­—ä¸²çš„æ–¹æ³•,ä»–æ˜¯ä»¥è¡Œä¸ºå•ä½æ¥è¿›è¡Œå­—ä¸²çš„å¤„ç†è¡Œä¸º, æ­£åˆ™<br>è¡¨è¾¾å¼é€šè¿‡ä¸€äº›ç‰¹æ®Šç¬¦å·çš„è¾…åŠ©,å¯ä»¥è®©ä½¿ç”¨è€…è½»æ˜“çš„è¾¾åˆ°â€œæœå¯»/åˆ é™¤/å–ä»£â€æŸç‰¹å®šå­—ä¸²çš„å¤„<br>ç†ç¨‹åº!<span style="color:#F00">å¼ºå¤§çš„å­—ç¬¦ä¸²å¤„ç†èƒ½åŠ›</span></p><h3 id="3-2ã€-åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼"><a href="#3-2ã€-åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="3.2ã€ åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼"></a>3.2ã€ åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼</h3><h4 id="3-2-1ã€-è¯­ç³»å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„å½±å“"><a href="#3-2-1ã€-è¯­ç³»å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„å½±å“" class="headerlink" title="3.2.1ã€ è¯­ç³»å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„å½±å“"></a>3.2.1ã€ è¯­ç³»å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„å½±å“</h4><p>&nbsp;&nbsp;è®¡ç®—æœºæ–‡ä»¶å…¶å®è®°å½•çš„ä»…æœ‰0ä¸1,æˆ‘ä»¬çœ‹åˆ°çš„å­—ç¬¦æ–‡å­—ä¸æ•°å­—éƒ½æ˜¯é€šè¿‡ç¼–ç è¡¨è½¬æ¢æ¥çš„ã€‚ç”±äºä¸åŒè¯­ç³»çš„ç¼–ç æ•°æ®å¹¶ä¸ç›¸åŒï¼Œæ‰€æœ‰å°±ä¼šé€ æˆæ•°æ®æå–ç»“æœçš„å·®å¼‚äº†ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨è‹±æ–‡å¤§å°å†™çš„ç¼–ç é¡ºåºä¸­ï¼Œzh_TW.big5åŠCè¿™ä¸¤ç§è¯­ç³»çš„è¾“å‡ºç»“æœåˆ†åˆ«å¦‚ä¸‹:</p><ul><li>LANG=Cæ—¶ï¼š0 1 2 3 4 â€¦ A B C D â€¦ Z abcd â€¦ z</li><li>LANG=zh_TWæ—¶: 0 1 2 3 4 â€¦ a A b B C c â€¦ z Z</li></ul><p>ä¸Šé¢çš„é¡ºåºæ˜¯ç¼–ç çš„é¡ºåºï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šçš„å‘ç°è¿™ä¸¤ç§è¯­ç³»æ˜æ˜¾å°±æ˜¯ä¸ä¸€æ ·ï¼å¦‚æœä½ æƒ³è¦æå–å¤§å†™å­—ç¬¦è€Œä½¿ç”¨[A-Z]æ—¶ï¼Œä¼šå‘ç°ä¼šå‘ç°LANG=Cç¡®å®å¯ä»¥ä»…æ‰åˆ°å¤§å†™å­—ç¬¦ (å› ä¸ºæ˜¯è¿ç»­çš„),ä½†æ˜¯å¦‚æœ LANG=zh_TW.big5æ—¶,å°±ä¼šå‘ç°åˆ°, è¿åŒå°å†™çš„b-zä¹Ÿä¼šè¢«æ’·å–å‡ºæ¥!å› ä¸ºå°±<br>ç¼–ç çš„é¡ºåºæ¥çœ‹,big5è¯­ç³»å¯ä»¥æ’·å–åˆ°â€œ A b B c C â€¦ z Z â€è¿™ä¸€å †å­—ç¬¦å“©! æ‰€ä»¥,ä½¿ç”¨æ­£åˆ™è¡¨<br>è¾¾å¼æ—¶,éœ€è¦ç‰¹åˆ«ç•™æ„å½“æ—¶ç¯å¢ƒçš„è¯­ç³»ä¸ºä½•, å¦åˆ™å¯èƒ½ä¼šå‘ç°ä¸åˆ«äººä¸ç›¸åŒçš„æ’·å–ç»“æœå–”!ä¸€èˆ¬ç»ƒä¹ æ—¶é‡‡ç”¨<code>LANG=C</code>è¿™ä¸ªè¯­ç³»ã€‚</p><blockquote><p> ä¸€äº›ç‰¹æ®Šç¬¦å·çš„ä»£è¡¨æ„ä¹‰</p></blockquote><p><img src="https://wx4.sinaimg.cn/mw1024/e0db46edgy1fq7iwmdmuzj20og0fndj2.jpg" alt="å›¾ç‰‡åç§°" align="center"></p><h4 id="3-2-2ã€-grepçš„ä¸€äº›è¿›é˜¶é€‰é¡¹"><a href="#3-2-2ã€-grepçš„ä¸€äº›è¿›é˜¶é€‰é¡¹" class="headerlink" title="3.2.2ã€ grepçš„ä¸€äº›è¿›é˜¶é€‰é¡¹"></a>3.2.2ã€ grepçš„ä¸€äº›è¿›é˜¶é€‰é¡¹</h4><p><img src="https://wx1.sinaimg.cn/mw1024/e0db46edgy1fq7j5i0kq8j20zl0mtgul.jpg" alt="å›¾ç‰‡åç§°" align="center"></p><blockquote><p> grepæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§ä¹Ÿå¾ˆå¸¸ç”¨çš„æŒ‡ä»¤ï¼Œå®ƒæœ€é‡è¦çš„åŠŸèƒ½å°±æ˜¯è¿›è¡Œå­—ç¬¦ä¸²æ•°æ®çš„æ¯”å¯¹ï¼Œç„¶åå°†ç¬¦åˆä½¿ç”¨è€…éœ€æ±‚çš„å­—ä¸²è¡Œå°å‡ºæ¥ã€‚<strong>éœ€è¦è¯´æ˜çš„æ˜¯â€œgrep åœ¨æ•°æ®ä¸­æŸ¥å¯»ä¸€ä¸ªå­—ä¸²æ—¶,æ˜¯ä»¥ â€œæ•´è¡Œâ€ ä¸ºå•ä½æ¥è¿›è¡Œæ•°æ®çš„æ’·å–çš„!â€</strong>ä¹Ÿå°±æ˜¯è¯´,å‡å¦‚ä¸€ä¸ªæ–‡ä»¶å†…æœ‰ 10 è¡Œ,å…¶ä¸­æœ‰ä¸¤è¡Œå…·æœ‰ä½ æ‰€æœå¯»<br>çš„å­—ä¸²,åˆ™å°†é‚£ä¸¤è¡Œæ˜¾ç¤ºåœ¨å±å¹•ä¸Š,å…¶ä»–çš„å°±ä¸¢å¼ƒäº†!</p></blockquote><h4 id="3-2-3ã€-åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼ç»ƒä¹ "><a href="#3-2-3ã€-åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼ç»ƒä¹ " class="headerlink" title="3.2.3ã€ åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼ç»ƒä¹ "></a>3.2.3ã€ åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼ç»ƒä¹ </h4><p>ç»ƒä¹ ç”¨æ–‡ä»¶ä¸‹è½½å¦‚ä¸‹ï¼š<br><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">wget http://linux.vbird.org/linux_basic/<span class="number">0330</span>regularex/regular_express.txt</span><br><span class="line"></span><br><span class="line"># content</span><br><span class="line"><span class="string">"Open Source"</span> <span class="keyword">is</span> a good mechanism <span class="keyword">to</span> develop programs.</span><br><span class="line">apple <span class="keyword">is</span> my favorite food.</span><br><span class="line">Football game <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">use</span> feet only.</span><br><span class="line">this dress doesn<span class="symbol">'t</span> fit me.</span><br><span class="line">However, this dress <span class="keyword">is</span> about $ <span class="number">3183</span> dollars.^M</span><br><span class="line">GNU <span class="keyword">is</span> free air <span class="keyword">not</span> free beer.^M</span><br><span class="line">Her hair <span class="keyword">is</span> very beauty.^M</span><br><span class="line">I can<span class="symbol">'t</span> finish the test.^M</span><br><span class="line">Oh! The soup taste good.^M</span><br><span class="line">motorcycle <span class="keyword">is</span> cheap than car.</span><br><span class="line">This window <span class="keyword">is</span> clear.</span><br><span class="line">the symbol '*' <span class="keyword">is</span> represented as start.</span><br><span class="line">Oh!     My god!</span><br><span class="line">The gd software <span class="keyword">is</span> a <span class="keyword">library</span> <span class="keyword">for</span> drafting programs.^M</span><br><span class="line">You are the best <span class="keyword">is</span> mean you are the no. <span class="number">1</span>.</span><br><span class="line">The world &lt;Happy&gt; <span class="keyword">is</span> the same <span class="keyword">with</span> <span class="string">"glad"</span>.</span><br><span class="line">I like dog.</span><br><span class="line">google <span class="keyword">is</span> the best tools <span class="keyword">for</span> search keyword.</span><br><span class="line">goooooogle yes!</span><br><span class="line">go! go! Let<span class="symbol">'s</span> go.</span><br><span class="line"># I am VBird</span><br></pre></td></tr></table></figure></p><ul><li>ä¾‹é¢˜ä¸€ã€æœå¯»ç‰¹å®šå­—ä¸²</li></ul><p>ä»ä¸Šé¢ä¸‹è½½çš„æ–‡ä»¶ä¸­<strong>å–theè¿™ä¸ªç‰¹å®šå­—ä¸²</strong>ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯è¿™æ ·ï¼š<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="comment">'the' regular_express.txt </span></span><br><span class="line"></span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="number">8</span>:I can<span class="comment">'t finish the test.</span></span><br><span class="line"><span class="number">12</span>:the symbol <span class="comment">'*' is represented as start.</span></span><br><span class="line"><span class="number">15</span>:You are the best <span class="keyword">is</span> mean you are the no. <span class="number">1.</span></span><br><span class="line"><span class="number">16</span>:The world &lt;Happy&gt; <span class="keyword">is</span> the same <span class="keyword">with</span> <span class="string">"glad"</span>.</span><br><span class="line"><span class="number">18</span>:google <span class="keyword">is</span> the best tools <span class="keyword">for</span> search keyword.</span><br></pre></td></tr></table></figure></p><p>å¦‚æœè¦<strong>åå‘é€‰æ‹©</strong>ï¼Œä¹Ÿå°±æ˜¯å½“è¯¥è¡Œæ²¡æœ‰â€™theâ€™è¿™ä¸ªå­—ä¸²æ—¶æ‰æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œé‚£å°±ç›´æ¥ä½¿ç”¨ï¼š<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">grep -vn <span class="comment">'the' regular_express.txt </span></span><br><span class="line"></span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="number">1</span>:<span class="string">"Open Source"</span> <span class="keyword">is</span> a good mechanism <span class="keyword">to</span> develop programs.</span><br><span class="line"><span class="number">2</span>:apple <span class="keyword">is</span> my favorite food.</span><br><span class="line"><span class="number">3</span>:Football game <span class="keyword">is</span> <span class="keyword">not</span> use feet only.</span><br><span class="line"><span class="number">4</span>:this dress doesn<span class="comment">'t fit me.</span></span><br><span class="line"><span class="number">5</span>:However, this dress <span class="keyword">is</span> about $ <span class="number">3183</span> dollars.</span><br><span class="line"><span class="number">6</span>:GNU <span class="keyword">is</span> free air <span class="keyword">not</span> free beer.</span><br><span class="line"><span class="number">7</span>:Her hair <span class="keyword">is</span> very beauty.</span><br><span class="line"><span class="number">9</span>:Oh! The soup taste good.</span><br><span class="line"><span class="number">10</span>:motorcycle <span class="keyword">is</span> cheap than car.</span><br><span class="line"><span class="number">11</span>:This window <span class="keyword">is</span> clear.</span><br><span class="line"><span class="number">13</span>:Oh!  My god!</span><br><span class="line"><span class="number">14</span>:The gd software <span class="keyword">is</span> a library <span class="keyword">for</span> drafting programs.</span><br><span class="line"><span class="number">17</span>:I <span class="keyword">like</span> dog.</span><br><span class="line"><span class="number">19</span>:goooooogle yes!</span><br><span class="line"><span class="number">20</span>:go! go! <span class="keyword">Let</span><span class="comment">'s go.</span></span><br><span class="line"><span class="number">21</span>:<span class="meta"># I am VBird</span></span><br><span class="line"><span class="number">22</span>:</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæƒ³å–å¾—<strong>ä¸è®ºå¤§å°å†™</strong>çš„â€˜theâ€™è¿™ä¸ªå­—ä¸²ï¼Œåˆ™ï¼š<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">grep -<span class="keyword">in</span> <span class="comment">'the' regular_express.txt </span></span><br><span class="line"></span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="number">8</span>:I can<span class="comment">'t finish the test.</span></span><br><span class="line"><span class="number">9</span>:Oh! The soup taste good.</span><br><span class="line"><span class="number">12</span>:the symbol <span class="comment">'*' is represented as start.</span></span><br><span class="line"><span class="number">14</span>:The gd software <span class="keyword">is</span> a library <span class="keyword">for</span> drafting programs.</span><br><span class="line"><span class="number">15</span>:You are the best <span class="keyword">is</span> mean you are the no. <span class="number">1.</span></span><br><span class="line"><span class="number">16</span>:The world &lt;Happy&gt; <span class="keyword">is</span> the same <span class="keyword">with</span> <span class="string">"glad"</span>.</span><br><span class="line"><span class="number">18</span>:google <span class="keyword">is</span> the best tools <span class="keyword">for</span> search keyword.</span><br></pre></td></tr></table></figure></p><ul><li>ä¾‹é¢˜äºŒã€åˆ©ç”¨ä¸­æ‹¬å·[]æ¥æœå¯»é›†åˆå­—ç¬¦</li></ul><p>å¦‚æœæˆ‘æƒ³è¦æœå¯»testæˆ–tasteè¿™ä¸¤ä¸ªå•å­—æ—¶,å¯ä»¥å‘ç°åˆ°,å…¶å®å¥¹ä»¬æœ‰å…±é€šçš„â€™t?stâ€™å­˜åœ¨~è¿™<br>ä¸ªæ—¶å€™,æˆ‘å¯ä»¥è¿™æ ·æ¥æœå¯»:<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="comment">'t[ae]st' regular_express.txt</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="number">8</span>:I can<span class="comment">'t finish the test.</span></span><br><span class="line"><span class="number">9</span>:Oh! The soup taste good.</span><br></pre></td></tr></table></figure></p><blockquote><p> <code>[]</code>è¿™ä¸ªé‡Œé¢ä¸è®ºæœ‰å‡ ä¸ªå­—ç¬¦ï¼Œéƒ½ä»…åŒ¹é…æŸä¸€ä¸ªå­—ç¬¦ï¼Œï¼Œå¦‚æœæƒ³è¦æœå¯»åˆ°æœ‰<code>oo</code>çš„å­—ç¬¦ä¸²æ—¶ï¼Œåˆ™ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p></blockquote><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'oo'</span> regular_express.txt </span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">1</span><span class="symbol">:<span class="string">"Open Source"</span></span> is a good mechanism to develop programs.</span><br><span class="line"><span class="number">2</span><span class="symbol">:apple</span> is my favorite food.</span><br><span class="line"><span class="number">3</span><span class="symbol">:Football</span> game is <span class="keyword">not</span> <span class="keyword">use</span> feet only.</span><br><span class="line"><span class="number">9</span><span class="symbol">:Oh!</span> The soup taste good.</span><br><span class="line"><span class="number">18</span><span class="symbol">:google</span> is the best tools <span class="keyword">for</span> search keyword.</span><br><span class="line"><span class="number">19</span><span class="symbol">:goooooogle</span> yes!</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä¸æƒ³è¦<code>oo</code>å‰é¢æœ‰gçš„è¯å‘¢ï¼Ÿæ­¤æ—¶ï¼Œå¯ä»¥åˆ©ç”¨åœ¨é›†åˆå­—ç¬¦çš„åå‘é€‰æ‹©æ¥è¾¾æˆï¼š<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'[^g]oo'</span> regular_express.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">2</span><span class="symbol">:apple</span> is my favorite food.</span><br><span class="line"><span class="number">3</span><span class="symbol">:Football</span> game is <span class="keyword">not</span> <span class="keyword">use</span> feet only.</span><br><span class="line"><span class="number">18</span><span class="symbol">:google</span> is the best tools <span class="keyword">for</span> search keyword.</span><br><span class="line"><span class="number">19</span><span class="symbol">:goooooogle</span> yes!</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæˆ‘ä»¬ä¸æƒ³è¦<code>oo</code>å‰é¢æœ‰å°å†™å­—ç¬¦ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'[^a-z]oo'</span> regular_express.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">3</span><span class="symbol">:Football</span> game is <span class="keyword">not</span> <span class="keyword">use</span> feet only.</span><br></pre></td></tr></table></figure></p><blockquote><p> <strong>è¿ç»­ç¼–ç </strong>å¯ä»¥ä½¿ç”¨å‡å·<code>-</code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•æ¥å–å¾—å‰é¢çš„ä¸¤ä¸ªæµ‹è¯•çš„ç»“æœï¼š</p></blockquote><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'[^[:lower:]]oo'</span> regular_express.txt</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">3</span>:Football game <span class="keyword">is</span> <span class="keyword">not</span> use feet only.</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªå–å«æ•°å­—çš„é‚£ä¸€è¡Œ</span></span><br><span class="line">grep -n <span class="string">'[[:digit:]]'</span> regular_express.txt</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">5</span>:However, <span class="keyword">this</span> dress <span class="keyword">is</span> about $ <span class="number">3183</span> dollars.</span><br><span class="line"><span class="number">15</span>:You are the best <span class="keyword">is</span> mean you are the <span class="literal">no</span>. <span class="number">1.</span></span><br></pre></td></tr></table></figure><ul><li>ä¾‹é¢˜ä¸‰ã€è¡Œé¦–ä¸è¡Œå°¾å­—ç¬¦^$</li></ul><p>åœ¨ä¸Šé¢ä¾‹å­ä¸­ï¼Œå¯ä»¥æŸ¥è¯¢åˆ°ä¸€è¡Œå­—ä¸²é‡Œé¢æœ‰<code>the</code>çš„ï¼Œé‚£å¦‚æœæˆ‘æƒ³è¦è®©<code>the</code>åªåœ¨è¡Œé¦–åˆ—å‡ºå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½¿ç”¨<strong>å®šä½å­—ç¬¦</strong>äº†ï¼<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'^the'</span> regular_express.txt </span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">12</span>:<span class="keyword">the</span> symbol <span class="string">'*'</span> is represented <span class="keyword">as</span> <span class="built_in">start</span>.</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæˆ‘æƒ³<strong>å¼€å¤´æ˜¯å°å†™å­—ç¬¦</strong>çš„é‚£ä¸€è¡Œå°±åˆ—å‡ºå‘¢ï¼Ÿå¯ä»¥è¿™æ ·å†™ï¼š<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="comment">'^[a-z]' regular_express.txt </span></span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="number">2</span>:apple <span class="keyword">is</span> my favorite food.</span><br><span class="line"><span class="number">4</span>:this dress doesn<span class="comment">'t fit me.</span></span><br><span class="line"><span class="number">10</span>:motorcycle <span class="keyword">is</span> cheap than car.</span><br><span class="line"><span class="number">12</span>:the symbol <span class="comment">'*' is represented as start.</span></span><br><span class="line"><span class="number">18</span>:google <span class="keyword">is</span> the best tools <span class="keyword">for</span> search keyword.</span><br><span class="line"><span class="number">19</span>:goooooogle yes!</span><br><span class="line"><span class="number">20</span>:go! go! <span class="keyword">Let</span><span class="comment">'s go.</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å®ç°</span></span><br><span class="line">grep -n <span class="comment">'^[[:lower:]]' regular_express.txt</span></span><br></pre></td></tr></table></figure></p><p>å¦‚æœæˆ‘ä¸æƒ³è¦å¼€å¤´æ˜¯<strong>è‹±æ–‡å­—æ¯</strong>ï¼Œåˆ™å¯ä»¥æ˜¯è¿™æ ·ï¼š<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="comment">'^[^a-zA-Z]' regular_express.txt </span></span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="number">1</span>:<span class="string">"Open Source"</span> <span class="keyword">is</span> a good mechanism <span class="keyword">to</span> develop programs.</span><br><span class="line"><span class="number">21</span>:<span class="meta"># I am VBird</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># ä¹Ÿå¯ä»¥è¿™æ ·å†™</span></span><br><span class="line">grep -n <span class="comment">'^[^[:alpha:]]' regular_express.txt</span></span><br></pre></td></tr></table></figure></p><blockquote><p> æ³¨æ„åˆ°äº†å§?é‚£ä¸ª<code>^</code>ç¬¦å·,åœ¨å­—ç¬¦é›†åˆç¬¦å·(æ‹¬å·[])ä¹‹å†…ä¸ä¹‹å¤–æ˜¯ä¸åŒçš„! åœ¨ [] å†…ä»£è¡¨â€œå<br>å‘é€‰æ‹©â€,åœ¨[]ä¹‹å¤–åˆ™ä»£è¡¨å®šä½åœ¨è¡Œé¦–çš„æ„ä¹‰!è¦åˆ†æ¸…æ¥šå–”! </p></blockquote><p>åè¿‡æ¥æ€è€ƒ,é‚£å¦‚æœæˆ‘æƒ³è¦æ‰¾å‡º<br>æ¥,<strong>è¡Œå°¾</strong>ç»“æŸä¸ºå°æ•°ç‚¹ (.) çš„é‚£ä¸€è¡Œ,è¯¥å¦‚ä½•å¤„ç†:<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="comment">'\.$' regular_express.txt </span></span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="number">1</span>:<span class="string">"Open Source"</span> <span class="keyword">is</span> a good mechanism <span class="keyword">to</span> develop programs.</span><br><span class="line"><span class="number">2</span>:apple <span class="keyword">is</span> my favorite food.</span><br><span class="line"><span class="number">3</span>:Football game <span class="keyword">is</span> <span class="keyword">not</span> use feet only.</span><br><span class="line"><span class="number">4</span>:this dress doesn<span class="comment">'t fit me.</span></span><br><span class="line"><span class="number">10</span>:motorcycle <span class="keyword">is</span> cheap than car.</span><br><span class="line"><span class="number">11</span>:This window <span class="keyword">is</span> clear.</span><br><span class="line"><span class="number">12</span>:the symbol <span class="comment">'*' is represented as start.</span></span><br><span class="line"><span class="number">15</span>:You are the best <span class="keyword">is</span> mean you are the no. <span class="number">1.</span></span><br><span class="line"><span class="number">16</span>:The world &lt;Happy&gt; <span class="keyword">is</span> the same <span class="keyword">with</span> <span class="string">"glad"</span>.</span><br><span class="line"><span class="number">17</span>:I <span class="keyword">like</span> dog.</span><br><span class="line"><span class="number">18</span>:google <span class="keyword">is</span> the best tools <span class="keyword">for</span> search keyword.</span><br><span class="line"><span class="number">20</span>:go! go! <span class="keyword">Let</span><span class="comment">'s go.</span></span><br></pre></td></tr></table></figure></p><blockquote><p> å› ä¸ºå°æ•°ç‚¹<code>.</code>å…·æœ‰å…¶ä»–æ„ä¹‰ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨è½¬ä¹‰å­—ç¬¦<code>(\)</code>æ¥åŠ ä»¥è§£é™¤å…¶ç‰¹æ®Šæ„ä¹‰ï¼ä½†æ˜¯ç¬¬ 5~9 è¡Œæœ€åé¢ä¹Ÿæ˜¯ . å•Š~æ€ä¹ˆæ— æ³•æ‰“ 5~9  å°å‡ºæ¥? è¿™é‡Œå°±ç‰µæ¶‰åˆ° Windows å¹³å°çš„è½¯ä»¶å¯¹äºæ–­è¡Œå­—ç¬¦çš„åˆ¤æ–­é—®é¢˜äº†!</p></blockquote><p>æˆ‘ä»¬ä½¿ç”¨<code>cat -A</code>å‰åè¡Œçš„å€’æ•°å…­è¡Œã€‚<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat -An  regular_express.txt| head -n <span class="number">10</span>  | tail -n <span class="number">6</span></span><br><span class="line"># output</span><br><span class="line">    <span class="number">5</span>  However, this dress is about $ <span class="number">3183</span> dollars.^M$</span><br><span class="line">    <span class="number">6</span>  GNU is free air not free beer.^M$</span><br><span class="line">    <span class="number">7</span>  Her hair is very beauty.^M$</span><br><span class="line">    <span class="number">8</span>  I can't finish the test.^M$</span><br><span class="line">    <span class="number">9</span>  Oh! The soup taste good.^M$</span><br><span class="line">   <span class="number">10</span>  motorcycle is cheap than car.$</span><br></pre></td></tr></table></figure></p><blockquote><p>  åœ¨ä¸Šé¢çš„è¾“å‡ºä¸­æˆ‘ä»¬å¯ä»¥å‘ç°5~9è¡Œä¸ºWindowsçš„æ–­è¡Œå­—ç¬¦<code>(^M$)</code>,è€Œæ­£å¸¸çš„Linuxåº”è¯¥ä»…æœ‰ç¬¬10è¡Œæ˜¾ç¤ºçš„é‚£æ ·<code>($)</code>ã€‚æ‰€ä»¥,é‚£ä¸ª<code>.</code>è‡ªç„¶å°±ä¸æ˜¯ç´§æ¥åœ¨<code>$</code>ä¹‹å‰å–”!ä¹Ÿå°±æ‰ä¸åˆ°5~9 è¡Œäº†!è¿™æ ·å¯ä»¥äº†è§£^ä¸$çš„æ„ä¹‰äº†å§ã€‚</p></blockquote><p>å¦‚æœæˆ‘æƒ³æ‰¾å‡ºå“ªä¸€è¡Œæ˜¯ç©ºç™½è¡Œï¼Œä¹Ÿå°±æ˜¯è¯¥è¡Œæ²¡æœ‰è¾“å…¥ä»»ä½•æ•°æ®ï¼Œå¦‚ä½•æ“ä½œï¼Ÿ<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grep</span> -n <span class="string">'^$'</span> regular_express.txt </span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">22</span>:</span><br></pre></td></tr></table></figure></p><blockquote><p> å› ä¸ºåªæœ‰è¡Œé¦–å’Œè¡Œå°¾<code>(^$)</code>ï¼Œæ‰€ä»¥è¿™æ ·å°±å¯ä»¥æ‰¾å‡ºç©ºç™½è¡Œå•¦ã€‚</p></blockquote><p>å†æ¥,å‡è®¾ä½ å·²ç»çŸ¥é“åœ¨ä¸€ä¸ªç¨‹åºè„šæœ¬ (shell script) æˆ–è€…æ˜¯é…ç½®æ–‡ä»¶å½“ä¸­,ç©ºç™½è¡Œä¸å¼€å¤´ä¸º # çš„é‚£ä¸€è¡Œæ˜¯æ³¨è§£,å› æ­¤å¦‚æœä½ è¦å°†æ•°æ®åˆ—å‡ºç»™åˆ«äººå‚è€ƒæ—¶,å¯ä»¥å°†è¿™äº›æ•°æ®çœç•¥æ‰ä»¥èŠ‚çœä¿è´µçš„çº¸å¼ ,é‚£ä¹ˆä½ å¯ä»¥æ€ä¹ˆåšå‘¢? æˆ‘ä»¬ä»¥ /etc/rsyslog.conf è¿™ä¸ªæ–‡ä»¶æ¥ä½œèŒƒä¾‹,ä½ å¯ä»¥è‡ªè¡Œå‚è€ƒä¸€ä¸‹è¾“å‡ºçš„ç»“æœ:<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cat</span> -n /etc/rsyslog.conf</span><br><span class="line"><span class="comment"># åœ¨ubuntu 17.10ä¸­ï¼Œè¾“å‡ºäº†60è¡Œï¼Œå¾ˆå¤šç©ºç™½è¡Œä¸#å¼€å¤´çš„æ³¨è§£è¡Œ</span></span><br><span class="line"></span><br><span class="line">grep -v <span class="string">'^$'</span> /etc/rsyslog.conf | grep -v -n <span class="string">'^#'</span></span><br><span class="line"><span class="comment"># ç»“æœä»…æœ‰13è¡Œï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ª`-v '^$'` ä»£è¡¨ä¸è¦ç©ºè¡Œ</span></span><br><span class="line"><span class="comment"># ç¬¬äºŒä¸ªâ€œ-v '^#'â€ï¼Œ ä»£è¡¨ä¸è¦å¼€å¤´æ˜¯#çš„é‚£è¡Œ</span></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">10</span>:module(load=<span class="string">"imuxsock"</span>) <span class="comment"># provides support for local system logging</span></span><br><span class="line"><span class="number">19</span>:module(load=<span class="string">"imklog"</span> permitnonkernelfacility=<span class="string">"on"</span>)</span><br><span class="line"><span class="number">27</span>:<span class="variable">$ActionFileDefaultTemplate</span> RSYSLOG_TraditionalFileFormat</span><br><span class="line"><span class="number">29</span>:<span class="variable">$RepeatedMsgReduction</span> <span class="literal">on</span></span><br><span class="line"><span class="number">33</span>:<span class="variable">$FileOwner</span> syslog</span><br><span class="line"><span class="number">34</span>:<span class="variable">$FileGroup</span> adm</span><br><span class="line"><span class="number">35</span>:<span class="variable">$FileCreateMode</span> <span class="number">0640</span></span><br><span class="line"><span class="number">36</span>:<span class="variable">$DirCreateMode</span> <span class="number">0755</span></span><br><span class="line"><span class="number">37</span>:<span class="variable">$Umask</span> <span class="number">0022</span></span><br><span class="line"><span class="number">38</span>:<span class="variable">$PrivDropToUser</span> syslog</span><br><span class="line"><span class="number">39</span>:<span class="variable">$PrivDropToGroup</span> syslog</span><br><span class="line"><span class="number">43</span>:<span class="variable">$WorkDirectory</span> /var/spool/rsyslog</span><br><span class="line"><span class="number">47</span>:<span class="variable">$IncludeConfig</span> /etc/rsyslog.d/<span class="regexp">*.conf</span></span><br></pre></td></tr></table></figure></p><ul><li>ä¾‹é¢˜å››ã€ä»»æ„ä¸€ä¸ªå­—ç¬¦<code>.</code>ä¸é‡å¤å­—ç¬¦<code>*</code><br>æˆ‘ä»¬çŸ¥é“é€šé…ç¬¦<code>*</code>å¯ä»¥ç”¨æ¥ä»£è¡¨ä»»æ„ï¼ˆ0æˆ–å¤šä¸ªï¼‰å­—ç¬¦ï¼Œä½†æ˜¯æ­£åˆ™è¡¨è¾¾å¼å¹¶ä¸æ˜¯é€šç”¨å­—ç¬¦ï¼Œä¸¤è€…ä¹‹é—´æ˜¯ä¸åŒçš„ï¼è‡³äºæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„<code>.</code>åˆ™ä»£è¡¨â€œç»å¯¹æœ‰ä¸€ä¸ªä»»æ„å­—ç¬¦â€çš„æ„æ€ï¼è¿™ä¸¤ä¸ªç¬¦å·åœ¨æ­£åˆ™è¡¨è¾¾å¼çš„æ„ä¹‰å¦‚ä¸‹ï¼š<blockquote><p> <code>.</code>(å°æ•°ç‚¹)ï¼šä»£è¡¨â€œä¸€å®šæœ‰<strong>ä¸€ä¸ª</strong>ä»»æ„å­—ç¬¦â€çš„æ„æ€</p><p> <code>*</code>(æ˜Ÿå·)ï¼šä»£è¡¨â€œ<strong>é‡å¤å‰ä¸€ä¸ªå­—ç¬¦</strong>ï¼Œ0åˆ°æ— ç©·å¤šæ¬¡â€çš„æ„æ€ï¼Œä¸ºç»„åˆå½¢æ€</p></blockquote></li></ul><p>è¿™æ ·è®²ä¸å¥½æ‡‚,æˆ‘ä»¬ç›´æ¥åšä¸ªç»ƒä¹ å§!å‡è®¾æˆ‘éœ€è¦æ‰¾å‡º g??d çš„å­—ä¸²,äº¦å³å…±æœ‰å››ä¸ªå­—ç¬¦,èµ·å¤´æ˜¯ g è€Œç»“æŸæ˜¯ d ,æˆ‘å¯ä»¥è¿™æ ·åš:<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'g..d'</span> regular_express.txt </span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">1</span>:<span class="string">"Open Source"</span> is <span class="keyword">a</span> good mechanism <span class="built_in">to</span> develop programs.</span><br><span class="line"><span class="number">9</span>:Oh! The soup taste good.</span><br><span class="line"><span class="number">16</span>:The world &lt;Happy&gt; is <span class="keyword">the</span> same <span class="keyword">with</span> <span class="string">"glad"</span>.</span><br></pre></td></tr></table></figure></p><p>å†æ¥,å¦‚æœæˆ‘æƒ³è¦åˆ—å‡ºæœ‰ oo, ooo, oooo ç­‰ç­‰çš„æ•°æ®, ä¹Ÿå°±æ˜¯è¯´,è‡³å°‘è¦æœ‰ä¸¤ä¸ª(å«)oä»¥ä¸Š,è¯¥å¦‚ä½•æ˜¯å¥½?æ˜¯ o è¿˜æ˜¯ oo è¿˜æ˜¯ ooo* å‘¢? è™½ç„¶ä½ å¯ä»¥è¯•çœ‹çœ‹ç»“æœ, ä¸è¿‡ç»“æœå¤ªå ç‰ˆé¢äº†ã€‚</p><p>å› ä¸º<code>*</code>ä»£è¡¨çš„æ˜¯<strong>é‡å¤ 0 ä¸ªæˆ–å¤šä¸ªå‰é¢çš„ RE å­—ç¬¦</strong>â€çš„æ„ä¹‰, å› æ­¤,<strong><code>o*</code>ä»£è¡¨çš„æ˜¯å…·æœ‰ç©ºå­—ç¬¦æˆ–ä¸€ä¸ªoä»¥ä¸Šçš„å­—ç¬¦</strong>, ç‰¹åˆ«æ³¨æ„,å› ä¸ºå…è®¸ç©ºå­—ç¬¦(å°±æ˜¯æœ‰æ²¡æœ‰å­—ç¬¦éƒ½å¯ä»¥çš„æ„æ€),å› <br>æ­¤,<code>grep -n &#39;o*&#39; regular_express.txt</code>å°†ä¼šæŠŠæ‰€æœ‰çš„æ•°æ®éƒ½æ‰“å°å‡ºæ¥å±å¹•ä¸Š!</p><p>é‚£å¦‚æœæ˜¯<code>oo*</code>å‘¢?åˆ™ç¬¬ä¸€ä¸ªoè‚¯å®šå¿…é¡»è¦å­˜åœ¨,ç¬¬äºŒä¸ªoåˆ™æ˜¯å¯æœ‰å¯æ— çš„å¤šä¸ªo, æ‰€ä»¥,å‡¡<br>æ˜¯å«æœ‰o,oo,ooo,ooooç­‰ç­‰,éƒ½å¯ä»¥è¢«åˆ—å‡ºæ¥~</p><p>åŒç†,å½“æˆ‘ä»¬éœ€è¦è‡³å°‘ä¸¤ä¸ªoä»¥ä¸Šçš„å­—ä¸²æ—¶,å°±éœ€è¦<code>ooo*</code>,äº¦å³æ˜¯:<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'ooo*'</span> regular_express.txt </span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">1</span><span class="symbol">:<span class="string">"Open Source"</span></span> is a good mechanism to develop programs.</span><br><span class="line"><span class="number">2</span><span class="symbol">:apple</span> is my favorite food.</span><br><span class="line"><span class="number">3</span><span class="symbol">:Football</span> game is <span class="keyword">not</span> <span class="keyword">use</span> feet only.</span><br><span class="line"><span class="number">9</span><span class="symbol">:Oh!</span> The soup taste good.</span><br><span class="line"><span class="number">18</span><span class="symbol">:google</span> is the best tools <span class="keyword">for</span> search keyword.</span><br><span class="line"><span class="number">19</span><span class="symbol">:goooooogle</span> yes!</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾éƒ½æ˜¯g,ä½†æ˜¯ä¸¤ä¸ªgä¹‹é—´ä»…èƒ½å­˜åœ¨è‡³å°‘ä¸€ä¸ªoï¼Œäº¦å³æ˜¯<code>gog,goog,gooog..</code>ç­‰ç­‰ï¼Œé‚£è¯¥å¦‚ä½•ï¼Ÿ<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'g.*g'</span> regular_express.txt </span><br><span class="line"><span class="meta"># . ä»£è¡¨ä»»æ„ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="meta"># .*ä»£è¡¨ä»»æ„ä¸ªå­—ç¬¦</span></span><br></pre></td></tr></table></figure></p><p>å¦‚æœæˆ‘æƒ³æ‰¾å‡ºå«â€™ä»»æ„æ•°å­—â€˜çš„è¡Œåˆ—å‘¢ï¼Œæ‰€ä»¥å°±æˆä¸ºï¼š<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grep -n '[<span class="string">0-9</span>][<span class="symbol">0-9</span>]*' regular_express.txt </span><br><span class="line"><span class="section"># output</span></span><br><span class="line">5:However, this dress is about $ 3183 dollars.</span><br><span class="line">15:You are the best is mean you are the no. 1.</span><br></pre></td></tr></table></figure></p><ul><li>ä¾‹é¢˜äº”ã€é™å®šè¿ç»­REå­—ç¬¦èŒƒå›´</li></ul><p>åœ¨ä¸Šä¸ªä¾‹é¢˜å½“ä¸­,æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ . ä¸ RE å­—ç¬¦åŠ * æ¥è®¾ç½® 0 ä¸ªåˆ°æ— é™å¤šä¸ªé‡å¤å­—ç¬¦, é‚£å¦‚æœ<br>æˆ‘æƒ³è¦é™åˆ¶ä¸€ä¸ªèŒƒå›´åŒºé—´å†…çš„é‡å¤å­—ç¬¦æ•°å‘¢?ä¸¾ä¾‹æ¥è¯´,æˆ‘æƒ³è¦æ‰¾å‡ºä¸¤ä¸ªåˆ°äº”ä¸ª o çš„è¿ç»­å­—<br>ä¸²,è¯¥å¦‚ä½•åš?è¿™æ—¶å€™å°±å¾—è¦ä½¿ç”¨åˆ°é™å®šèŒƒå›´çš„å­—ç¬¦ {} äº†ã€‚ ä½†å› ä¸º { ä¸ } çš„ç¬¦å·åœ¨ shell æ˜¯æœ‰<br>ç‰¹æ®Šæ„ä¹‰çš„,å› æ­¤, æˆ‘ä»¬å¿…é¡»è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ \ æ¥è®©ä»–å¤±å»ç‰¹æ®Šæ„ä¹‰æ‰è¡Œã€‚ è‡³äº {} çš„è¯­æ³•æ˜¯<br>è¿™æ ·çš„,å‡è®¾æˆ‘è¦æ‰¾åˆ°ä¸¤ä¸ª o çš„å­—ä¸²,å¯ä»¥æ˜¯:<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">'o\&#123;2\&#125;'</span> regular_express.txt </span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">1</span><span class="symbol">:<span class="string">"Open Source"</span></span> is a good mechanism to develop programs.</span><br><span class="line"><span class="number">2</span><span class="symbol">:apple</span> is my favorite food.</span><br><span class="line"><span class="number">3</span><span class="symbol">:Football</span> game is <span class="keyword">not</span> <span class="keyword">use</span> feet only.</span><br><span class="line"><span class="number">9</span><span class="symbol">:Oh!</span> The soup taste good.</span><br><span class="line"><span class="number">18</span><span class="symbol">:google</span> is the best tools <span class="keyword">for</span> search keyword.</span><br><span class="line"><span class="number">19</span><span class="symbol">:goooooogle</span> yes!</span><br><span class="line"></span><br><span class="line">grep -n <span class="string">'go\&#123;2,5\&#125;g'</span> regular_express.txt </span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">18</span><span class="symbol">:google</span> is the best tools <span class="keyword">for</span> search keyword.</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ²¡æœ‰äº†ç¬¬19è¡Œï¼Œå› ä¸ºå®ƒæœ‰6ä¸ªo</span></span><br></pre></td></tr></table></figure></p><h4 id="3-2-4ã€-åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦æ±‡æ•´-characters"><a href="#3-2-4ã€-åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦æ±‡æ•´-characters" class="headerlink" title="3.2.4ã€ åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦æ±‡æ•´(characters)"></a>3.2.4ã€ åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦æ±‡æ•´(characters)</h4><p>ç»è¿‡ä¸Šé¢çš„å‡ ä¸ªç®€å•çš„ç»ƒä¹ ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŸºç¡€çš„æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦æ±‡æ•´å¦‚ä¸‹è¡¨ï¼š</p><p><img src="https://wx3.sinaimg.cn/mw1024/e0db46edgy1fq7ngc14chj20xj163nbj.jpg" align="center"></p><blockquote><p> <strong>æ­£åˆ™è¡¨è¾¾å¼çš„ç‰¹æ®Šå­—ç¬¦â€ä¸ä¸€èˆ¬åœ¨å‘½ä»¤è¡Œè¾“å…¥æŒ‡ä»¤çš„â€œä¸‡ç”¨å­—ç¬¦â€å¹¶ä¸ç›¸åŒ</strong>ã€‚<br> ä¾‹å¦‚ã€‚åœ¨ä¸‡ç”¨å­—ç¬¦å½“ä¸­çš„ ä»£è¡¨çš„æ˜¯â€œ 0 ~ æ— é™å¤šä¸ªå­—ç¬¦â€çš„æ„æ€,ä½†æ˜¯åœ¨æ­£åˆ™è¡¨è¾¾å¼å½“ä¸­, åˆ™æ˜¯â€œé‡å¤0åˆ°æ— ç©·å¤šä¸ªçš„å‰ä¸€ä¸ª RE å­—ç¬¦â€çš„æ„æ€~ä½¿ç”¨çš„æ„ä¹‰å¹¶ä¸ç›¸åŒ,ä¸è¦ææ··äº†!</p></blockquote><p>ä¸¾ä¾‹æ¥è¯´,ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼çš„ ls è¿™ä¸ªå·¥å…·ä¸­,è‹¥æˆ‘ä»¬ä½¿ç”¨ â€œls -l â€ ä»£è¡¨çš„æ˜¯ä»»æ„æ–‡ä»¶åçš„æ–‡<br>ä»¶,è€Œ â€œls -l a â€ä»£è¡¨çš„æ˜¯ä»¥ a ä¸ºå¼€å¤´çš„ä»»ä½•æ–‡ä»¶åçš„æ–‡ä»¶, ä½†åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­,æˆ‘ä»¬è¦æ‰¾åˆ°<br>å«æœ‰ä»¥ a ä¸ºå¼€å¤´çš„æ–‡ä»¶,åˆ™å¿…é¡»è¦è¿™æ ·:(éœ€æ­é…æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼çš„å·¥å…·)</p><pre><code>ls | grep -n &apos;^a.*&apos;</code></pre><p>è¦æƒ³ä»¥<code>ls -l</code>é…åˆgrepæ‰¾å‡º<code>/etc/</code>ä¸‹é¢æ–‡ä»¶ç±»å‹ä¸ºé“¾æ¥æ–‡ä»¶å±æ€§çš„æ–‡ä»¶åï¼Œè¯¥å¦‚ä½•åšå‘¢ï¼Ÿç”±äº<code>ls -l</code>åˆ—å‡ºé“¾æ¥æ–‡ä»¶æ—¶æ ‡å¤´ä¼šæ˜¯<code>lrwxrwxrwx</code>,å› æ­¤ä½¿ç”¨å¦‚ä¸‹çš„æŒ‡ä»¤å³å¯æ‰¾å‡ºç»“æœï¼š</p><pre><code>ls -l /etc \grep &apos;^l&apos;# è‹¥ä»…æƒ³åˆ—å‡ºå‡ ä¸ªæ–‡ä»¶ï¼Œå†ä»¥`| wc -l`æ¥ç´¯åŠ å¤„ç†å³å¯ã€‚</code></pre><h4 id="3-2-5ã€-sedå·¥å…·"><a href="#3-2-5ã€-sedå·¥å…·" class="headerlink" title="3.2.5ã€ sedå·¥å…·"></a>3.2.5ã€ sedå·¥å…·</h4><p>åœ¨äº†è§£äº†ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼çš„åŸºç¡€åº”ç”¨ä¹‹å,å†æ¥å‘¢?å‘µå‘µ~ä¸¤ä¸ªä¸œè¥¿å¯ä»¥ç©ä¸€ç©çš„,é‚£å°±æ˜¯<br>sed è·Ÿä¸‹é¢ä¼šä»‹ç»çš„ awk äº†! è¿™ä¸¤ä¸ªå®¶ä¼™å¯æ˜¯ç›¸å½“çš„æœ‰ç”¨çš„å•Š!</p><p>æˆ‘ä»¬å…ˆæ¥è°ˆä¸€è°ˆ sed å¥½äº†, sed æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªç®¡çº¿å‘½ä»¤,å¯ä»¥åˆ†æ standard input çš„å•¦! è€Œ<br>ä¸” sed è¿˜å¯ä»¥å°†æ•°æ®è¿›è¡Œå–ä»£ã€åˆ é™¤ã€æ–°å¢ã€æ’·å–ç‰¹å®šè¡Œç­‰ç­‰çš„åŠŸèƒ½å‘¢!å¾ˆä¸é”™å§~ æˆ‘ä»¬å…ˆ<br>æ¥äº†è§£ä¸€ä¸‹ sed çš„ç”¨æ³•,å†æ¥èŠä»–çš„ç”¨é€”å¥½äº†!</p><p><img src="https://wx1.sinaimg.cn/mw1024/e0db46edgy1fq7o1zepd6j20zc0gmtem.jpg" align="center"></p><ul><li>ä»¥è¡Œä¸ºå•ä½çš„æ–°å¢/åˆ é™¤åŠŸèƒ½</li></ul><p>sedå…‰æ˜¯ç”¨çœ‹çš„ï¼Œæ˜¯çœ‹ä¸æ‡‚çš„å•¦ï¼ï¼Œåˆè¦å¼€å§‹ç»ƒä¹ äº†</p><p><b><span style="color: red">èŒƒä¾‹ä¸€ï¼š</span></b>å°†<code>/etc/passwd</code>çš„å†…å®¹æ‹·è´<code>pd.txt</code>åˆ—å‡ºå¹¶ä¸”æ‰“å°è¡Œå·ï¼ŒåŒæ—¶ï¼Œè¯·å°†ç¬¬2-5è¡Œåˆ é™¤ï¼<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nl pd.txt  | sed <span class="string">'2,5d'</span></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">     <span class="number">1</span>  <span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line">     <span class="number">6</span>  <span class="symbol">games:</span><span class="symbol">x:</span><span class="number">5</span><span class="symbol">:</span><span class="number">60</span><span class="symbol">:games</span><span class="symbol">:/usr/games</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">     <span class="number">7</span>  <span class="symbol">man:</span><span class="symbol">x:</span><span class="number">6</span><span class="symbol">:</span><span class="number">12</span><span class="symbol">:man</span><span class="symbol">:/var/cache/man</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">     <span class="number">8</span>  <span class="symbol">lp:</span><span class="symbol">x:</span><span class="number">7</span><span class="symbol">:</span><span class="number">7</span><span class="symbol">:lp</span><span class="symbol">:/var/spool/lpd</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">    ...........åé¢çœç•¥................</span><br></pre></td></tr></table></figure></p><blockquote><p> çœ‹åˆ°äº†å§?sed çš„åŠ¨ä½œä¸º â€˜2,5dâ€™ ,é‚£ä¸ª d å°±æ˜¯åˆ é™¤!å› ä¸º 2-5 è¡Œç»™ä»–åˆ é™¤äº†,æ‰€ä»¥æ˜¾ç¤ºçš„æ•°æ®<br>å°±æ²¡æœ‰ 2-5 è¡Œå•°~ å¦å¤–,æ³¨æ„ä¸€ä¸‹,åŸæœ¬åº”è¯¥æ˜¯è¦ä¸‹è¾¾ sed -e æ‰å¯¹,æ²¡æœ‰ -e ä¹Ÿè¡Œå•¦!åŒæ—¶<br>ä¹Ÿè¦æ³¨æ„çš„æ˜¯, sed åé¢æ¥çš„åŠ¨ä½œ,è¯·åŠ¡å¿…ä»¥ â€˜â€™ ä¸¤ä¸ªå•å¼•å·æ‹¬ä½å–”!</p></blockquote><p>å¦‚æœåªåˆ é™¤ç¬¬2è¡Œï¼Œå¯ä»¥ä½¿ç”¨<code>nl pd.txt | sed &#39;2d&#39;</code>æ¥å®ç°ï¼Œè‹¥è¦åˆ é™¤ç¬¬3åˆ°æœ€åä¸€è¡Œï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>nl pd.txt |sed &#39;3,$d&#39;</code>,å…¶ä¸­<code>$</code>ä»£è¡¨æœ€åä¸€è¡Œï¼</p><p><b><span style="color: red">èŒƒä¾‹äºŒï¼š</span></b>æ‰¿ä¸Šé¢˜ï¼Œåœ¨ç¬¬äºŒè¡Œåï¼ˆäº¦å³æ˜¯åŠ åœ¨ç¬¬ä¸‰è¡Œï¼‰åŠ ä¸Šâ€œdrink tea?â€å­—æ ·ï¼<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nl pd.txt | sed <span class="string">'2a drink tea?'</span></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">     <span class="number">1</span>  <span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line">     <span class="number">2</span>  <span class="symbol">daemon:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:daemon</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">drink tea?</span><br><span class="line">     <span class="number">3</span>  <span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">2</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/usr/sbin/nologin</span></span><br></pre></td></tr></table></figure></p><p>å˜¿å˜¿!åœ¨ a åé¢åŠ ä¸Šçš„å­—ä¸²å°±å·²å°†å‡ºç°åœ¨ç¬¬äºŒè¡Œåé¢å•°!é‚£å¦‚æœæ˜¯è¦åœ¨ç¬¬äºŒè¡Œå‰å‘¢?<code>nlpd.txt | sed &#39;2i drink tea&#39;</code>å°±å¯¹å•¦!å°±æ˜¯å°†â€œ a â€å˜æˆâ€œ i â€å³å¯ã€‚ å¢åŠ ä¸€è¡Œå¾ˆç®€å•,é‚£å¦‚æœ<br>æ˜¯è¦å¢å°†ä¸¤è¡Œä»¥ä¸Šå‘¢?</p><p><b><span style="color: red">èŒƒä¾‹ä¸‰ï¼š</span></b>åœ¨ç¬¬äºŒè¡Œåé¢åŠ å…¥ä¸¤è¡Œå­—ï¼Œä¾‹å¦‚â€œdrink tea or â€¦â€ä¸â€drink beerâ€å­—æ ·ï¼<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">nl pd.txt | sed <span class="string">'2a drink tea or ... \</span></span><br><span class="line"><span class="string"> &gt; drink beer?'</span></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">     <span class="number">1</span>  <span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line">     <span class="number">2</span>  <span class="symbol">daemon:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:daemon</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">drink tea <span class="keyword">or</span> ... </span><br><span class="line">drink beer?</span><br><span class="line">     <span class="number">3</span>  <span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">2</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">.............åé¢çœç•¥........</span><br></pre></td></tr></table></figure></p><blockquote><p> è¿™ä¸ªèŒƒä¾‹çš„é‡ç‚¹æ˜¯â€œæˆ‘ä»¬å¯ä»¥æ–°å¢ä¸åªä¸€è¡Œå–”!å¯ä»¥æ–°å¢å¥½å‡ è¡Œâ€ä½†æ˜¯æ¯ä¸€è¡Œä¹‹é—´éƒ½å¿…é¡»è¦ä»¥å<br>æ–œçº¿â€œ \ â€æ¥è¿›è¡Œæ–°è¡Œçš„å¢åŠ å–”!æ‰€ä»¥,ä¸Šé¢çš„ä¾‹å­ä¸­,æˆ‘ä»¬å¯ä»¥å‘ç°åœ¨ç¬¬ä¸€è¡Œçš„æœ€åé¢å°±æœ‰ \<br>å­˜åœ¨å•¦!åœ¨å¤šè¡Œæ–°å¢çš„æƒ…å†µä¸‹, \ æ˜¯ä¸€å®šè¦çš„å–”!</p></blockquote><ul><li>ä»¥è¡Œä¸ºå•ä½çš„å–ä»£ä¸æ˜¾ç¤ºåŠŸèƒ½</li></ul><p>åˆšåˆšåªæ˜¯ä»‹ç»äº†å¦‚ä½•æ–°å¢ä¸åˆ é™¤ï¼Œé‚£ä¹ˆå¦‚æœè¦æ•´è¡Œå–ä»£å‘¢ï¼Ÿ</p><p><b><span style="color: red">èŒƒä¾‹å››ï¼š</span></b>æˆ‘æƒ³å°†ç¬¬2-5è¡Œçš„å†…å®¹å–ä»£æˆä¸ºâ€No 2-5 numberâ€å‘¢ï¼Ÿ<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nl pd.txt | sed <span class="string">'2,5c No 2-5 number'</span></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">     <span class="number">1</span>  <span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line">No <span class="number">2</span>-<span class="number">5</span> number</span><br><span class="line">     <span class="number">6</span>  <span class="symbol">games:</span><span class="symbol">x:</span><span class="number">5</span><span class="symbol">:</span><span class="number">60</span><span class="symbol">:games</span><span class="symbol">:/usr/games</span><span class="symbol">:/usr/sbin/nologin</span></span><br></pre></td></tr></table></figure></p><p>é€šè¿‡è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬å°±èƒ½å¤Ÿå°†æ•°æ®æ•´è¡Œå–ä»£äº†!éå¸¸å®¹æ˜“å§!sed è¿˜æœ‰æ›´å¥½ç”¨çš„ä¸œä¸œ!æˆ‘ä»¬ä»¥å‰<br>æƒ³è¦åˆ—å‡ºç¬¬ 11~20 è¡Œ, å¾—è¦é€šè¿‡<code>head -n 20 | tail -n 10</code>ä¹‹ç±»çš„æ–¹æ³•æ¥å¤„ç†,å¾ˆéº»çƒ¦å•¦~ sed<br>åˆ™å¯ä»¥ç®€å•çš„ç›´æ¥å–å‡ºä½ æƒ³è¦çš„é‚£å‡ è¡Œ!æ˜¯é€šè¿‡è¡Œå·æ¥æ‰çš„å–”!çœ‹çœ‹ä¸‹é¢çš„èŒƒä¾‹å…ˆ:</p><p><b><span style="color: red">èŒƒä¾‹äº”ï¼š</span></b>ä»…åˆ—å‡º<code>pd.txt</code>æ–‡ä»¶å†…çš„ç¬¬5-7è¡Œ<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nl pd.txt | sed -n <span class="string">'5,7p'</span></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">     <span class="number">5</span>  <span class="symbol">sync:</span><span class="symbol">x:</span><span class="number">4</span><span class="symbol">:</span><span class="number">65534</span><span class="symbol">:sync</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sync</span></span><br><span class="line">     <span class="number">6</span>  <span class="symbol">games:</span><span class="symbol">x:</span><span class="number">5</span><span class="symbol">:</span><span class="number">60</span><span class="symbol">:games</span><span class="symbol">:/usr/games</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">     <span class="number">7</span>  <span class="symbol">man:</span><span class="symbol">x:</span><span class="number">6</span><span class="symbol">:</span><span class="number">12</span><span class="symbol">:man</span><span class="symbol">:/var/cache/man</span><span class="symbol">:/usr/sbin/nologin</span></span><br></pre></td></tr></table></figure></p><blockquote><p> ä¸Šè¿°çš„æŒ‡ä»¤ä¸­æœ‰ä¸ªé‡è¦çš„é€‰é¡¹<code></code>-n<code>,æŒ‰ç…§è¯´æ˜æ–‡æ¡£,è¿™ä¸ª -n ä»£è¡¨çš„æ˜¯â€œå®‰é™æ¨¡å¼â€! é‚£ä¹ˆä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®‰é™æ¨¡å¼å‘¢?ä½ å¯ä»¥è‡ªè¡Œä¸‹è¾¾</code>sed â€˜5,7pâ€™` å°±çŸ¥é“äº† (5-7 è¡Œä¼šé‡å¤è¾“å‡º)! æœ‰æ²¡æœ‰<br>åŠ ä¸Š -n çš„å‚æ•°æ—¶,è¾“å‡ºçš„æ•°æ®å¯æ˜¯å·®å¾ˆå¤šçš„å–”!ä½ å¯ä»¥é€šè¿‡è¿™ä¸ª sed çš„ä»¥è¡Œä¸ºå•ä½çš„æ˜¾ç¤ºåŠŸ<br>èƒ½, å°±èƒ½å¤Ÿå°†æŸä¸€ä¸ªæ–‡ä»¶å†…çš„æŸäº›è¡Œå·æ‰å‡ºæ¥æŸ¥é˜…!å¾ˆæ£’çš„åŠŸèƒ½!ä¸æ˜¯å—?</p></blockquote><ul><li>éƒ¨åˆ†æ•°æ®çš„æœå¯»å¹¶å–ä»£çš„åŠŸèƒ½</li></ul><p>é™¤äº†æ•´è¡Œçš„å¤„ç†æ¨¡å¼ä¹‹å¤–ï¼Œsedè¿˜å¯ä»¥ç”¨è¡Œä¸ºå•ä½è¿›è¡Œéƒ¨åˆ†æ•°æ®çš„æŸ¥æ‰¾å¹¶æ›¿æ¢çš„åŠŸèƒ½ï¼ŒåŸºæœ¬ä¸Šsedçš„æŸ¥æ‰¾ä¸æ›¿æ¢ä¸viç±»ä¼¼ï¼</p><pre><code>sed &apos;s/è¦è¢«å–ä»£çš„å­—ä¸²/æ–°çš„å­—ä¸²/g&apos;</code></pre><p>ä¸Šè¡¨ä¸­ç‰¹æ®Šå­—ä½“çš„éƒ¨åˆ†ä¸ºå…³é”®å­—,è¯·è®°ä¸‹æ¥!è‡³äºä¸‰ä¸ªæ–œçº¿åˆ†æˆä¸¤æ å°±æ˜¯æ–°æ—§å­—ä¸²çš„æ›¿æ¢<br>å•¦ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢è¿™ä¸ªå–å¾—IPæ•°æ®çš„èŒƒä¾‹,ä¸€æ®µä¸€æ®µçš„æ¥å¤„ç†,è®©ä½ äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯å’±ä»¬æ‰€è°“çš„æŸ¥æ‰¾å¹¶æ›¿æ¢å§!<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># step1 : å…ˆè§‚å¯Ÿæºä¿¡æ¯ï¼Œåˆ©ç”¨<span class="string">`sbin/ifconfig`</span> æŸ¥è¯¢<span class="built_in">IP</span></span><br><span class="line">    /sbin/ifconfig enp3s0</span><br><span class="line">    # output</span><br><span class="line"><span class="symbol">    enp3s0:</span> flags=<span class="number">4163</span>&lt;<span class="meta">UP</span>,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="number">1500</span></span><br><span class="line">            inet <span class="number">219.223</span><span class="meta">.243</span><span class="meta">.131</span>  netmask <span class="number">255.255</span><span class="meta">.248</span><span class="meta">.0</span>  broadcast <span class="number">219.223</span><span class="meta">.247</span><span class="meta">.255</span></span><br><span class="line">            inet6 fe80::<span class="number">1234</span>:4cee:444b:1d66  prefixlen <span class="number">64</span>  scopeid <span class="number">0x20</span>&lt;link&gt;</span><br><span class="line">            inet6 <span class="number">2001</span>:<span class="number">250</span>:3c02:<span class="number">301</span>:c9a3:6a1d:d5ce:ec5f  prefixlen <span class="number">128</span>  scopeid <span class="number">0x0</span>&lt;<span class="meta">global</span>&gt;</span><br><span class="line">    # é‡ç‚¹åœ¨ç¬¬äºŒè¡Œï¼Œä¹Ÿå°±æ˜¯<span class="built_in">ip</span>åœ°å€é‚£ä¸€è¡Œ</span><br><span class="line"></span><br><span class="line"># step2 :åˆ©ç”¨å…³é”®å­—é…åˆgrepé€‰å–å‡ºå…³é”®çš„ä¸€è¡Œæ•°æ®</span><br><span class="line">    ifconfig enp3s0 | grep <span class="string">'inet '</span></span><br><span class="line">    # output</span><br><span class="line">        inet <span class="number">219.223</span><span class="meta">.243</span><span class="meta">.131</span>  netmask <span class="number">255.255</span><span class="meta">.248</span><span class="meta">.0</span>  broadcast <span class="number">219.223</span><span class="meta">.247</span><span class="meta">.255</span></span><br><span class="line"></span><br><span class="line"># step3ï¼šå°†<span class="built_in">IP</span>å‰é¢çš„éƒ¨åˆ†äºˆä»¥åˆ é™¤</span><br><span class="line">     ifconfig enp3s0 | grep <span class="string">'inet '</span> | sed <span class="string">'s/^.*inet //g'</span></span><br><span class="line">     # output</span><br><span class="line">        <span class="number">219.223</span><span class="meta">.243</span><span class="meta">.131</span>  netmask <span class="number">255.255</span><span class="meta">.248</span><span class="meta">.0</span>  broadcast <span class="number">219.223</span><span class="meta">.247</span><span class="meta">.255</span></span><br><span class="line"></span><br><span class="line"># step4ï¼šå°†<span class="built_in">IP</span>åé¢çš„éƒ¨åˆ†åˆ é™¤</span><br><span class="line">    ifconfig enp3s0 | grep <span class="string">'inet '</span> | sed <span class="string">'s/^.*inet//g'</span> | sed <span class="string">'s/ netmask.*$//g'</span></span><br><span class="line">    # output</span><br><span class="line">        <span class="number">219.223</span><span class="meta">.243</span><span class="meta">.131</span></span><br></pre></td></tr></table></figure></p><blockquote><p> é€šè¿‡è¿™ä¸ªèŒƒä¾‹çš„ç»ƒä¹ ä¹Ÿå»ºè®®æ‚¨ä¾æ®æ­¤ä¸€æ­¥éª¤æ¥ç ”ç©¶ä½ çš„æŒ‡ä»¤!å°±æ˜¯å…ˆè§‚å¯Ÿ,ç„¶åå†ä¸€å±‚ä¸€å±‚<br>çš„è¯•åš, å¦‚æœæœ‰åšä¸å¯¹çš„åœ°æ–¹,å°±å…ˆäºˆä»¥ä¿®æ”¹,æ”¹å®Œä¹‹åæµ‹è¯•,æˆåŠŸåå†å¾€ä¸‹ç»§ç»­æµ‹è¯•ã€‚</p></blockquote><ul><li>ç›´æ¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼ˆ<b><span style="color: red">å±é™©åŠ¨ä½œ</span></b>ï¼‰</li></ul><p>ä½ ä»¥ä¸º sed åªæœ‰è¿™æ ·çš„èƒ½è€å—?é‚£å¯ä¸! sed ç”šè‡³å¯ä»¥ç›´æ¥ä¿®æ”¹æ–‡ä»¶çš„å†…å®¹å‘¢!è€Œä¸å¿…ä½¿ç”¨<br>ç®¡çº¿å‘½ä»¤æˆ–æ•°æ®æµé‡å¯¼å‘! ä¸è¿‡,ç”±äºè¿™ä¸ªåŠ¨ä½œä¼šç›´æ¥ä¿®æ”¹åˆ°åŸå§‹çš„æ–‡ä»¶,æ‰€ä»¥è¯·ä½ åƒä¸‡ä¸<br>è¦éšä¾¿æ‹¿ç³»ç»Ÿé…ç½®æ–‡ä»¶æ¥æµ‹è¯•å–”! æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨ä½ ä¸‹è½½çš„ regular_express.txt æ–‡ä»¶æ¥æµ‹è¯•çœ‹<br>çœ‹å§!</p><p><b><span style="color: red">èŒƒä¾‹å…­ï¼š</span></b>åˆ©ç”¨sedå°†<code>regular_express.txt</code>å†…æ¯ä¸€è¡Œç»“å°¾è‹¥ä¸º<code>.</code>åˆ™æ¢æˆ<code>ï¼</code>ã€‚<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="comment">'s/\.$/\!/g' regular_express.txt </span></span><br><span class="line">cat regular_express.txt </span><br><span class="line"><span class="meta"># output</span></span><br><span class="line"><span class="string">"Open Source"</span> <span class="keyword">is</span> a good mechanism <span class="keyword">to</span> develop programs!</span><br><span class="line">apple <span class="keyword">is</span> my favorite food!</span><br><span class="line">Football game <span class="keyword">is</span> <span class="keyword">not</span> use feet only!</span><br><span class="line">this dress doesn<span class="comment">'t fit me!</span></span><br><span class="line">However, this dress <span class="keyword">is</span> about $ <span class="number">3183</span> dollars.</span><br><span class="line">GNU <span class="keyword">is</span> free air <span class="keyword">not</span> free beer.</span><br><span class="line">Her hair <span class="keyword">is</span> very beauty.</span><br><span class="line">I can<span class="comment">'t finish the test.</span></span><br><span class="line">Oh! The soup taste good.</span><br><span class="line">motorcycle <span class="keyword">is</span> cheap than car!</span><br><span class="line">This window <span class="keyword">is</span> clear!</span><br><span class="line">the symbol <span class="comment">'*' is represented as start!</span></span><br><span class="line">Oh! My god!</span><br><span class="line">The gd software <span class="keyword">is</span> a library <span class="keyword">for</span> drafting programs.</span><br><span class="line">You are the best <span class="keyword">is</span> mean you are the no. <span class="number">1</span>!</span><br><span class="line">The world &lt;Happy&gt; <span class="keyword">is</span> the same <span class="keyword">with</span> <span class="string">"glad"</span>!</span><br><span class="line">I <span class="keyword">like</span> dog!</span><br><span class="line">google <span class="keyword">is</span> the best tools <span class="keyword">for</span> search keyword!</span><br><span class="line">goooooogle yes!</span><br><span class="line">go! go! <span class="keyword">Let</span><span class="comment">'s go!</span></span><br><span class="line"><span class="meta"># I am VBird</span></span><br></pre></td></tr></table></figure></p><p><b><span style="color: red">èŒƒä¾‹ä¸ƒï¼š</span></b>åˆ©ç”¨sedç›´æ¥åœ¨<code>regular_express.txt</code>æœ€åä¸€è¡ŒåŠ å…¥<code># This is a test</code><br><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sed -i '$a <span class="comment"># This is a test' regular_express.txt</span></span><br><span class="line">nl regular_express.txt| sed -n '20,25p'</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">   <span class="number"> 20 </span> go! go! Let's go!</span><br><span class="line">   <span class="number"> 21 </span> <span class="comment"># I am VBird</span></span><br><span class="line">       </span><br><span class="line">   <span class="number"> 22 </span> <span class="comment"># This is a test</span></span><br></pre></td></tr></table></figure></p><blockquote><p> sed çš„â€œ -i â€é€‰é¡¹å¯ä»¥ç›´æ¥ä¿®æ”¹æ–‡ä»¶å†…å®¹,è¿™åŠŸèƒ½éå¸¸æœ‰å¸®åŠ©!ä¸¾ä¾‹æ¥è¯´,å¦‚æœä½ æœ‰ä¸€ä¸ª 100 ä¸‡<br>è¡Œçš„æ–‡ä»¶,ä½ è¦åœ¨ç¬¬ 100 è¡ŒåŠ æŸäº›æ–‡å­—,æ­¤æ—¶ä½¿ç”¨ vim å¯èƒ½ä¼šç–¯æ‰!å› ä¸ºæ–‡ä»¶å¤ªå¤§äº†!é‚£æ€<br>åŠ?å°±åˆ©ç”¨ sed å•Š!é€šè¿‡ sed ç›´æ¥ä¿®æ”¹/å–ä»£çš„åŠŸèƒ½,ä½ ç”šè‡³ä¸éœ€è¦ä½¿ç”¨ vim å»ä¿®è®¢!å¾ˆæ£’<br>å§!</p></blockquote><h3 id="3-3ã€-æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼"><a href="#3-3ã€-æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="3.3ã€ æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼"></a>3.3ã€ æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</h3><p>äº‹å®ä¸Š,ä¸€èˆ¬è¯»è€…åªè¦äº†è§£åŸºç¡€å‹çš„æ­£åˆ™è¡¨è¾¾å¼å¤§æ¦‚å°±å·²ç»ç›¸å½“è¶³å¤Ÿäº†,ä¸è¿‡,æŸäº›æ—¶åˆ»ä¸º<br>äº†è¦ç®€åŒ–æ•´ä¸ªæŒ‡ä»¤æ“ä½œ, äº†è§£ä¸€ä¸‹ä½¿ç”¨èŒƒå›´æ›´å¹¿çš„å»¶ä¼¸å‹æ­£åˆ™è¡¨è¾¾å¼çš„è¡¨ç¤ºå¼ä¼šæ›´æ–¹ä¾¿å‘¢!<br>ä¸¾ä¸ªç®€å•çš„ä¾‹å­å¥½äº†,åœ¨ä¸ŠèŠ‚çš„ä¾‹é¢˜ä¸‰çš„æœ€åä¸€ä¸ªä¾‹å­ä¸­,æˆ‘ä»¬è¦å»é™¤ç©ºç™½è¡Œä¸è¡Œé¦–ä¸º # çš„<br>è¡Œåˆ—,ä½¿ç”¨çš„æ˜¯</p><pre><code>grep -v &apos;^$&apos; regular_express.txt | grep -v &apos;^#&apos;</code></pre><p>éœ€è¦ä½¿ç”¨åˆ°ç®¡çº¿å‘½ä»¤æ¥æœå¯»ä¸¤æ¬¡ï¼é‚£ä¹ˆå¦‚æœä½¿ç”¨å»¶ä¼¸å‹çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸ºï¼š</p><pre><code>egrep -v &apos;^$|^#&apos; regular_express.txt</code></pre><blockquote><p> å»¶ä¼¸å‹æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥é€šè¿‡ç¾¤ç»„åŠŸèƒ½â€œ | â€æ¥è¿›è¡Œä¸€æ¬¡æœå¯»!é‚£ä¸ªåœ¨å•å¼•å·å†…çš„ç®¡çº¿æ„ä¹‰ä¸ºâ€œæˆ–<br>orâ€å•¦! æ˜¯å¦å˜çš„æ›´ç®€å•å‘¢?æ­¤å¤–,grep é»˜è®¤ä»…æ”¯æŒåŸºç¡€æ­£åˆ™è¡¨è¾¾å¼,å¦‚æœè¦ä½¿ç”¨å»¶ä¼¸å‹æ­£åˆ™<br>è¡¨è¾¾å¼,ä½ å¯ä»¥ä½¿ç”¨ grep -E , ä¸è¿‡æ›´å»ºè®®ç›´æ¥ä½¿ç”¨ egrep !ç›´æ¥åŒºåˆ†æŒ‡ä»¤æ¯”è¾ƒå¥½è®°å¿†!å…¶<br>å® egrep ä¸ grep -E æ˜¯ç±»ä¼¼å‘½ä»¤åˆ«åçš„å…³ç³»ã€‚</p></blockquote><p>ç†Ÿæ‚‰äº†æ­£åˆ™è¡¨è¾¾å¼ä¹‹å,åˆ°è¿™ä¸ªå»¶ä¼¸å‹çš„æ­£åˆ™è¡¨è¾¾å¼,ä½ åº”è¯¥ä¹Ÿä¼šæƒ³åˆ°,ä¸å°±æ˜¯å¤šå‡ ä¸ªé‡è¦<br>çš„ç‰¹æ®Šç¬¦å·å—?  æ˜¯çš„~æ‰€ä»¥,æˆ‘ä»¬å°±ç›´æ¥æ¥è¯´æ˜ä¸€ä¸‹,å»¶ä¼¸å‹æ­£åˆ™è¡¨è¾¾å¼çš„ç‰¹æ®Šç¬¦å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><p><img src="https://wx2.sinaimg.cn/mw1024/e0db46edgy1fq7wpghpsdj20ue0jdjxc.jpg" align="center"></p><p><strong>ä¾‹å­æµ‹è¯•ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><p><img src="https://wx2.sinaimg.cn/mw1024/e0db46edgy1fq7wx5abqmj20mz0aljti.jpg" align="center"></p><blockquote><p> <code>!</code>ä¸æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚æœæƒ³è¦æŸ¥å‡ºæ¥æ–‡ä»¶ä¸­å«æœ‰ï¼ä¸&gt;çš„å­—è¡Œæ—¶ï¼Œå¯ä»¥è¿™æ ·æ“ä½œï¼š<br>     grep -n â€˜[!&gt;]â€™ regular_express.txt</p></blockquote><h3 id="3-4ã€-æ–‡ä»¶çš„æ ¼å¼åŒ–ä¸ç›¸å…³å¤„ç†"><a href="#3-4ã€-æ–‡ä»¶çš„æ ¼å¼åŒ–ä¸ç›¸å…³å¤„ç†" class="headerlink" title="3.4ã€ æ–‡ä»¶çš„æ ¼å¼åŒ–ä¸ç›¸å…³å¤„ç†"></a>3.4ã€ æ–‡ä»¶çš„æ ¼å¼åŒ–ä¸ç›¸å…³å¤„ç†</h3><p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥å°†æ–‡ä»¶è¿›è¡Œä¸€äº›ç®€å•çš„ç¼–æ’å§!ä¸‹é¢è¿™äº›åŠ¨ä½œå¯ä»¥å°†ä½ çš„è®¯æ¯è¿›è¡Œæ’ç‰ˆçš„åŠ¨<br>ä½œ, ä¸éœ€è¦é‡æ–°ä»¥ vim å»ç¼–è¾‘,é€šè¿‡æ•°æ®æµé‡å¯¼å‘é…åˆä¸‹é¢ä»‹ç»çš„ printf åŠŸèƒ½,ä»¥åŠ awk æŒ‡<br>ä»¤, å°±å¯ä»¥è®©ä½ çš„è®¯æ¯ä»¥ä½ æƒ³è¦çš„æ¨¡æ ·æ¥è¾“å‡ºäº†!è¯•çœ‹çœ‹å§!</p><h4 id="3-4-1ã€-æ ¼å¼åŒ–æ‰“å°ï¼šprintf"><a href="#3-4-1ã€-æ ¼å¼åŒ–æ‰“å°ï¼šprintf" class="headerlink" title="3.4.1ã€ æ ¼å¼åŒ–æ‰“å°ï¼šprintf"></a>3.4.1ã€ æ ¼å¼åŒ–æ‰“å°ï¼šprintf</h4><p><img src="https://wx1.sinaimg.cn/mw690/e0db46edgy1fq7x8zjkhij20j908c75p.jpg" align="center"></p><h4 id="3-4-2ã€-awkï¼šå¥½ç”¨çš„æ•°æ®å¤„ç†å·¥å…·"><a href="#3-4-2ã€-awkï¼šå¥½ç”¨çš„æ•°æ®å¤„ç†å·¥å…·" class="headerlink" title="3.4.2ã€ awkï¼šå¥½ç”¨çš„æ•°æ®å¤„ç†å·¥å…·"></a>3.4.2ã€ <code>awk</code>ï¼šå¥½ç”¨çš„æ•°æ®å¤„ç†å·¥å…·</h4><p>awk ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸æ£’çš„æ•°æ®å¤„ç†å·¥å…·!ç›¸è¾ƒäº sed å¸¸å¸¸ä½œç”¨äºä¸€æ•´ä¸ªè¡Œçš„å¤„ç†, awk åˆ™æ¯”è¾ƒ<br>å€¾å‘äºä¸€è¡Œå½“ä¸­åˆ†æˆæ•°ä¸ªâ€œå­—æ®µâ€æ¥å¤„ç†ã€‚å› æ­¤,awk ç›¸å½“çš„é€‚åˆå¤„ç†å°å‹çš„æ•°æ®æ•°æ®å¤„ç†!<code>awk</code> é€šå¸¸è¿è¡Œçš„æ¨¡å¼æ˜¯è¿™æ ·çš„:</p><pre><code>awk &apos;æ¡ä»¶ç±»å‹1{åŠ¨ä½œ1} æ¡ä»¶ç±»å‹2{åŠ¨ä½œ2} .... &apos; filename</code></pre><p>awk åé¢æ¥ä¸¤ä¸ªå•å¼•å·å¹¶åŠ ä¸Šå¤§æ‹¬å· {} æ¥è®¾ç½®æƒ³è¦å¯¹æ•°æ®è¿›è¡Œçš„å¤„ç†åŠ¨ä½œã€‚ awk å¯ä»¥å¤„ç†å<br>ç»­æ¥çš„æ–‡ä»¶,ä¹Ÿå¯ä»¥è¯»å–æ¥è‡ªå‰ä¸ªæŒ‡ä»¤çš„ standard output ã€‚ ä½†å¦‚å‰é¢è¯´çš„, awk ä¸»è¦æ˜¯å¤„<br>ç†â€œæ¯ä¸€è¡Œçš„å­—æ®µå†…çš„æ•°æ®â€,è€Œé»˜è®¤çš„â€œå­—æ®µçš„åˆ†éš”ç¬¦å·ä¸º â€œç©ºç™½é”®â€ æˆ– â€œ[tab]é”®â€ â€!ä¸¾ä¾‹æ¥è¯´,<br>æˆ‘ä»¬ç”¨ last å¯ä»¥å°†ç™»é™†è€…çš„æ•°æ®å–å‡ºæ¥,ç»“æœå¦‚ä¸‹æ‰€ç¤º:ï¼ˆä¸‹é¢å‘½ä»¤æ˜¯åœ¨æˆ‘è´­ä¹°çš„è¿œç¨‹ä¸»æœºä¸Šè¿›è¡Œçš„ï¼‰</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">last -n 5</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">root     pts/1        58.60.1.102      Tue Apr 10 22:29   still logged <span class="keyword">in</span>   </span><br><span class="line">root     pts/0        58.60.1.76       Tue Apr 10 22:21   still logged <span class="keyword">in</span>   </span><br><span class="line">root     pts/0        58.60.1.76       Sun Apr  8 20:58 - 21:36  (00:37)    </span><br><span class="line">root     pts/0        58.60.1.76       Fri Mar 23 08:19 - 08:19  (00:00)    </span><br><span class="line">reboot  <span class="built_in"> system </span>boot  4.13.9-1.el6.elr Tue Jan 23 22:26 - 22:30 (76+23:03)</span><br></pre></td></tr></table></figure><p>è‹¥æˆ‘æƒ³å–å‡ºå¸å·ä¸ç™»å½•è€…çš„IPï¼Œä¸”å¸å·ä¸IPä¹‹é—´ä¸€<code>[Tab]</code>éš”å¼€ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">last -n <span class="number">5</span> | awk '&#123;print $<span class="number">1</span> <span class="string">"<span class="subst">\t</span>"</span> $<span class="number">3</span>&#125;'</span><br><span class="line"># output</span><br><span class="line">root    <span class="number">58.60</span><span class="number">.1</span><span class="number">.102</span></span><br><span class="line">root    <span class="number">58.60</span><span class="number">.1</span><span class="number">.76</span></span><br><span class="line">root    <span class="number">58.60</span><span class="number">.1</span><span class="number">.76</span></span><br><span class="line">root    <span class="number">58.60</span><span class="number">.1</span><span class="number">.76</span></span><br><span class="line">reboot  boot</span><br></pre></td></tr></table></figure></p><p>ä¸Šè¡¨æ˜¯ awk æœ€å¸¸ä½¿ç”¨çš„åŠ¨ä½œ!é€šè¿‡ print çš„åŠŸèƒ½å°†å­—æ®µæ•°æ®åˆ—å‡ºæ¥!å­—æ®µçš„åˆ†éš”åˆ™ä»¥ç©ºç™½é”®æˆ–<br>[tab] æŒ‰é”®æ¥éš”å¼€ã€‚ å› ä¸ºä¸è®ºå“ªä¸€è¡Œæˆ‘éƒ½è¦å¤„ç†,å› æ­¤,å°±ä¸éœ€è¦æœ‰ â€œæ¡ä»¶ç±»å‹â€ çš„é™åˆ¶!æˆ‘æ‰€<br>æƒ³è¦çš„æ˜¯ç¬¬ä¸€æ ä»¥åŠç¬¬ä¸‰æ , ä½†æ˜¯,ç¬¬äº”è¡Œçš„å†…å®¹æ€ªæ€ªçš„~è¿™æ˜¯å› ä¸ºæ•°æ®æ ¼å¼çš„é—®é¢˜å•Š!æ‰€ä»¥~ä½¿ç”¨ awk çš„æ—¶å€™,è¯·å…ˆç¡®è®¤ä¸€ä¸‹ä½ çš„æ•°æ®å½“ä¸­,å¦‚æœæ˜¯è¿ç»­æ€§çš„æ•°æ®,è¯·ä¸è¦æœ‰ç©ºæ ¼æˆ– [tab]åœ¨å†…,å¦åˆ™,å°±ä¼šåƒè¿™ä¸ªä¾‹å­è¿™æ ·,ä¼šå‘ç”Ÿè¯¯åˆ¤!</p><p>å¦å¤–,ç”±ä¸Šé¢è¿™ä¸ªä¾‹å­ä½ ä¹Ÿä¼šçŸ¥é“,åœ¨awkçš„æ‹¬å·å†…,æ¯ä¸€è¡Œçš„æ¯ä¸ªå­—æ®µéƒ½æ˜¯æœ‰å˜é‡åç§°<br>çš„,é‚£å°±æ˜¯ $1, $2â€¦ ç­‰å˜é‡åç§°ã€‚ä»¥ä¸Šé¢çš„ä¾‹å­æ¥è¯´, <code>root</code>æ˜¯$1,å› ä¸ºä»–æ˜¯ç¬¬ä¸€æ !<br>è‡³äº<code>58.60.1.102</code>æ˜¯ç¬¬ä¸‰æ , æ‰€ä»¥ä»–å°±æ˜¯<code>$3</code>!åé¢ä»¥æ­¤ç±»æ¨~å‘µå‘µ!è¿˜æœ‰ä¸ªå˜é‡!é‚£<br>å°±æ˜¯ $0 ,$0 ä»£è¡¨â€œä¸€æ•´åˆ—æ•°æ®â€çš„æ„æ€~ä»¥ä¸Šé¢çš„ä¾‹å­æ¥è¯´,ç¬¬ä¸€è¡Œçš„ $0 ä»£è¡¨çš„å°±æ˜¯ä¸€æ•´è¡Œæ•°æ®çš„æ„æ€ã€‚ ç”±æ­¤å¯çŸ¥,åˆšåˆšä¸Šé¢äº”è¡Œå½“ä¸­,æ•´ä¸ª awk çš„å¤„ç†æµç¨‹æ˜¯:<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">step1ï¼šè¯»å…¥ç¬¬ä¸€è¡Œï¼Œå¹¶å°†ç¬¬ä¸€è¡Œçš„æ•°æ®å¡«å…¥ $<span class="number">0</span>, $<span class="number">1</span>, $<span class="number">2.</span>... ç­‰å˜é‡å½“ä¸­;</span><br><span class="line">step2ï¼šä¾æ®â€æ¡ä»¶ç±»å‹â€œçš„é™åˆ¶ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œåé¢çš„â€åŠ¨ä½œâ€œ;</span><br><span class="line">step3ï¼šåšå®Œæ‰€æœ‰çš„åŠ¨ä½œä¸æ¡ä»¶ç±»å‹</span><br><span class="line">step4ï¼šè‹¥è¿˜æœ‰åç»­çš„â€˜è¡Œâ€™çš„æ•°æ®ï¼Œåˆ™é‡å¤ä¸Šé¢<span class="number">1</span><span class="number">-3</span>çš„æ­¥éª¤ï¼ŒçŸ¥é“æ‰€æœ‰çš„æ•°æ®éƒ½è¯»å®Œä¸ºæ­¢ã€‚</span><br></pre></td></tr></table></figure></p><p>ç»è¿‡è¿™æ ·çš„æ­¥éª¤,ä½ ä¼šæ™“å¾—, awk æ˜¯â€œä»¥è¡Œä¸ºä¸€æ¬¡å¤„ç†çš„å•ä½â€, è€Œâ€œä»¥å­—æ®µä¸ºæœ€å°çš„å¤„ç†å•<br>ä½â€ã€‚å¥½äº†,é‚£ä¹ˆ awk æ€ä¹ˆçŸ¥é“æˆ‘åˆ°åº•è¿™ä¸ªæ•°æ®æœ‰å‡ è¡Œ?æœ‰å‡ æ å‘¢?è¿™å°±éœ€è¦ awk çš„å†…ç½®å˜<br>é‡çš„å¸®å¿™å•¦~</p><table><thead><tr><th style="text-align:left">å˜é‡åç§°</th><th style="text-align:center">ä»£è¡¨æ„ä¹‰</th></tr></thead><tbody><tr><td style="text-align:left">NF</td><td style="text-align:center">æ¯ä¸€è¡Œ($0)æ‹¥æœ‰çš„å­—æ®µæ€»æ•°</td></tr><tr><td style="text-align:left">NR</td><td style="text-align:center">ç›®å‰awkæ‰€å¤„ç†çš„æ˜¯â€œç¬¬å‡ è¡Œâ€æ•°æ®</td></tr><tr><td style="text-align:left">FS</td><td style="text-align:center">ç›®å‰çš„åˆ†éš”å­—ç¬¦ï¼Œé»˜è®¤æ˜¯ç©ºç™½é”®</td></tr></tbody></table><blockquote><p> ç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘æƒ³å®ç°ä»¥ä¸‹æ•ˆæœï¼š<br><br>   &emsp;åˆ—å‡ºæ¯ä¸€è¡Œçš„å¸å·(å°±æ˜¯ $1);<br><br>   &emsp;åˆ—å‡ºç›®å‰å¤„ç†çš„è¡Œæ•°(å°±æ˜¯ awk å†…çš„ NR å˜é‡)<br><br>   &emsp;å¹¶ä¸”è¯´æ˜,è¯¥è¡Œæœ‰å¤šå°‘å­—æ®µ(å°±æ˜¯ awk å†…çš„ NF å˜é‡)</p></blockquote><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">last</span> -n <span class="number">5</span> | awk <span class="string">'&#123;print $1 "\t lines: " NR "\t columns: " NF&#125;'</span></span><br><span class="line"># output</span><br><span class="line">root     <span class="built_in">line</span><span class="variable">s:</span> <span class="number">1</span>    column<span class="variable">s:</span> <span class="number">10</span></span><br><span class="line">root     <span class="built_in">line</span><span class="variable">s:</span> <span class="number">2</span>    column<span class="variable">s:</span> <span class="number">10</span></span><br><span class="line">root     <span class="built_in">line</span><span class="variable">s:</span> <span class="number">3</span>    column<span class="variable">s:</span> <span class="number">10</span></span><br><span class="line">root     <span class="built_in">line</span><span class="variable">s:</span> <span class="number">4</span>    column<span class="variable">s:</span> <span class="number">10</span></span><br><span class="line">reboot   <span class="built_in">line</span><span class="variable">s:</span> <span class="number">5</span>    column<span class="variable">s:</span> <span class="number">11</span></span><br></pre></td></tr></table></figure><ul><li><code>awk</code>çš„é€»è¾‘è¿ç®—å­—ç¬¦</li></ul><p>æ—¢ç„¶æœ‰éœ€è¦ç”¨åˆ°â€œæ¡ä»¶â€çš„ç±»åˆ«ï¼Œè‡ªç„¶å°±éœ€è¦ä¸€äº›é€»è¾‘è¿ç®—å’¯ï½ä¾‹å¦‚ä¸‹é¢è¿™äº›ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><table><thead><tr><th style="text-align:center">è¿ç®—å•å…ƒ</th><th style="text-align:center">ä»£è¡¨æ„ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">&gt;</td><td style="text-align:center">å¤§äº</td></tr><tr><td style="text-align:center">&lt;</td><td style="text-align:center">å°äº</td></tr><tr><td style="text-align:center">&gt;=</td><td style="text-align:center">å¤§äºç­‰äº</td></tr><tr><td style="text-align:center">&lt;=</td><td style="text-align:center">å°äºç­‰äº</td></tr><tr><td style="text-align:center">==</td><td style="text-align:center">ç­‰äº</td></tr><tr><td style="text-align:center">!=</td><td style="text-align:center">ä¸ç­‰äº</td></tr></tbody></table><p>å¥½äº†,æˆ‘ä»¬å®é™…æ¥è¿ç”¨ä¸€ä¸‹é€»è¾‘åˆ¤æ–­å§!ä¸¾ä¾‹æ¥è¯´,åœ¨ <code>pd.txt</code> å½“ä¸­æ˜¯ä»¥å†’å· â€œ:â€ æ¥ä½œä¸º<br>å­—æ®µçš„åˆ†éš”, è¯¥æ–‡ä»¶ä¸­ç¬¬ä¸€å­—æ®µä¸ºå¸å·,ç¬¬ä¸‰å­—æ®µåˆ™æ˜¯ UIDã€‚é‚£å‡è®¾æˆ‘è¦æŸ¥é˜…,ç¬¬ä¸‰æ å°äº<br>10 ä»¥ä¸‹çš„æ•°æ®,å¹¶ä¸”ä»…åˆ—å‡ºå¸å·ä¸ç¬¬ä¸‰æ , é‚£ä¹ˆå¯ä»¥è¿™æ ·åš:<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat pd.txt  | \</span><br><span class="line">&gt; awk <span class="string">'&#123;FS=":"&#125; $3 &lt; 10 &#123;print $1 "\t" $3&#125;'</span></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span> </span><br><span class="line">daemon  <span class="number">1</span></span><br><span class="line">bin <span class="number">2</span></span><br><span class="line">sys <span class="number">3</span></span><br><span class="line">sync    <span class="number">4</span></span><br><span class="line">games   <span class="number">5</span></span><br><span class="line">man <span class="number">6</span></span><br><span class="line">lp  <span class="number">7</span></span><br><span class="line">mail    <span class="number">8</span></span><br><span class="line">news    <span class="number">9</span></span><br></pre></td></tr></table></figure></p><p>æœ‰è¶£å§!ä¸è¿‡,æ€ä¹ˆç¬¬ä¸€è¡Œæ²¡æœ‰æ­£ç¡®çš„æ˜¾ç¤ºå‡ºæ¥å‘¢?è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¯»å…¥ç¬¬ä¸€è¡Œçš„æ—¶å€™,é‚£äº›<br>å˜é‡ $1, $2â€¦ é»˜è®¤è¿˜æ˜¯ä»¥ç©ºç™½é”®ä¸ºåˆ†éš”çš„,æ‰€ä»¥è™½ç„¶æˆ‘ä»¬å®šä¹‰äº† FS=â€:â€ äº†, ä½†æ˜¯å´ä»…èƒ½åœ¨ç¬¬<br>äºŒè¡Œåæ‰å¼€å§‹ç”Ÿæ•ˆã€‚é‚£ä¹ˆæ€ä¹ˆåŠå‘¢?æˆ‘ä»¬å¯ä»¥é¢„å…ˆè®¾ç½® awk çš„å˜é‡å•Š! åˆ©ç”¨ BEGIN è¿™ä¸ªå…³<br>é”®å­—å–”!è¿™æ ·åš:<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat pd.txt | \</span><br><span class="line">&gt; awk 'BEGIN &#123;FS=<span class="string">":"</span>&#125; $<span class="number">3</span> &lt; <span class="number">10</span> &#123;print $<span class="number">1</span> <span class="string">"<span class="subst">\t</span>"</span> $<span class="number">3</span>&#125;'</span><br><span class="line"># output</span><br><span class="line">root    <span class="number">0</span></span><br><span class="line">daemon  <span class="number">1</span></span><br><span class="line">bin     <span class="number">2</span></span><br><span class="line">sys     <span class="number">3</span></span><br><span class="line">sync    <span class="number">4</span></span><br><span class="line">games   <span class="number">5</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘æœ‰ä¸€ä¸ªè–ªèµ„æ•°æ®è¡¨æ–‡ä»¶åä¸º<code>pay.txt</code>ï¼Œå†…å®¹æ˜¯è¿™æ ·çš„ï¼š<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name    <span class="number">1</span>st     <span class="number">2</span>nd     <span class="number">3</span>th</span><br><span class="line">Vd      <span class="number">23000</span>   <span class="number">24000</span>   <span class="number">25000</span></span><br><span class="line">Di      <span class="number">21000</span>   <span class="number">20000</span>   <span class="number">23000</span></span><br><span class="line">Bd      <span class="number">43000</span>   <span class="number">42000</span>   <span class="number">41000</span></span><br></pre></td></tr></table></figure></p><p>å¦‚æœæˆ‘æƒ³è®¡ç®—æ¯ä¸ªäººçš„æ€»é¢å‘¢ï¼Ÿè€Œä¸”æˆ‘è¿˜æƒ³è¦æ ¼å¼åŒ–è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è€ƒè™‘ï¼š</p><blockquote><p> ç¬¬ä¸€è¡Œåªæ˜¯è¯´æ˜ï¼Œæ‰€ä»¥ç¬¬ä¸€è¡Œä¸è¦è¿›è¡ŒåŠ æ€»ï¼ˆNR==1æ—¶å¤„ç†ï¼‰<br><br> ç¬¬äºŒè¡Œä»¥åå°±ä¼šæœ‰åŠ æ€»çš„æƒ…å†µå‡ºç°ï¼ˆNR &gt;=2 ä»¥åå¤„ç† ï¼‰</p></blockquote><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat pay.txt | \</span><br><span class="line">&gt; awk 'NR == <span class="number">1</span> &#123;printf <span class="string">"%10s %10s %10s %10s %10s<span class="subst">\n</span>"</span>,$<span class="number">1</span>,$<span class="number">2</span>,$<span class="number">3</span>,$<span class="number">4</span>,<span class="string">"Total"</span>&#125;</span><br><span class="line">&gt; NR &gt;= <span class="number">2</span> &#123;Total = $<span class="number">2</span>+$<span class="number">3</span>+$<span class="number">4</span></span><br><span class="line">&gt; printf <span class="string">"%10s %10s %10s %10s %10.2f<span class="subst">\n</span>"</span>,$<span class="number">1</span>,$<span class="number">2</span>,$<span class="number">3</span>,$<span class="number">4</span>,Total&#125;'</span><br><span class="line"># output</span><br><span class="line">      Name        <span class="number">1</span>st        <span class="number">2</span>nd        <span class="number">3</span>th      Total</span><br><span class="line">        Vd      <span class="number">23000</span>      <span class="number">24000</span>      <span class="number">25000</span>   <span class="number">72000.00</span></span><br><span class="line">        Di      <span class="number">21000</span>      <span class="number">20000</span>      <span class="number">23000</span>   <span class="number">64000.00</span></span><br><span class="line">        Bd      <span class="number">43000</span>      <span class="number">42000</span>      <span class="number">41000</span>  <span class="number">126000.00</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¾‹å­æœ‰å‡ ä¸ªé‡è¦äº‹é¡¹åº”è¯¥å…ˆè¯´æ˜çš„ï¼š</p><ul><li><code>awk</code>çš„æŒ‡ä»¤é—´éš”:æ‰€æœ‰awkçš„åŠ¨ä½œ,äº¦å³åœ¨{}å†…çš„åŠ¨ä½œ,å¦‚æœæœ‰éœ€è¦å¤šä¸ªæŒ‡ä»¤è¾…åŠ©æ—¶,å¯åˆ©ç”¨åˆ†å·â€œ;â€é—´éš”, æˆ–è€…ç›´æ¥ä»¥ [Enter] æŒ‰é”®æ¥éš”å¼€æ¯ä¸ªæŒ‡ä»¤,ä¾‹å¦‚ä¸Šé¢çš„èŒƒä¾‹ä¸­æˆ‘å°±ä½¿ç”¨äº†ä¸‰æ¬¡ [enter] å–”!</li><li>é€»è¾‘è¿ç®—å½“ä¸­ï¼Œå¦‚æœæ˜¯<strong>ç­‰äº</strong>çš„æƒ…å†µï¼Œåˆ™åŠ¡å¿…ä½¿ç”¨ä¸¤ä¸ªç­‰å·â€œ==â€ï¼</li><li>æ ¼å¼åŒ–è¾“å‡ºæ—¶ï¼Œåœ¨printfçš„æ ¼å¼è®¾ç½®å½“ä¸­ï¼ŒåŠ¡å¿…åŠ ä¸Š<code>\n</code>ï¼Œæ‰èƒ½è¿›è¡Œåˆ†è¡Œ</li><li>ä¸bash shellçš„å˜é‡ä¸åŒï¼Œåœ¨<code>awk</code>å½“ä¸­ï¼Œå˜é‡å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€åŠ ä¸Š<code>$</code>ç¬¦å·</li></ul><p>åˆ©ç”¨ awk è¿™ä¸ªç©æ„å„¿,å°±å¯ä»¥å¸®æˆ‘ä»¬å¤„ç†å¾ˆå¤šæ—¥å¸¸å·¥ä½œäº†å‘¢!çœŸæ˜¯å¥½ç”¨çš„å¾ˆ~ æ­¤å¤–, awk<br>çš„è¾“å‡ºæ ¼å¼å½“ä¸­,å¸¸å¸¸ä¼šä»¥ printf æ¥è¾…åŠ©,æ‰€ä»¥, æœ€å¥½ä½ å¯¹ printf ä¹Ÿç¨å¾®ç†Ÿæ‚‰ä¸€ä¸‹æ¯”è¾ƒå¥½å•¦!<br>å¦å¤–, awk çš„åŠ¨ä½œå†… {} ä¹Ÿæ˜¯æ”¯æŒ if (æ¡ä»¶) çš„å–”! ä¸¾ä¾‹æ¥è¯´,ä¸Šé¢çš„æŒ‡ä»¤å¯ä»¥ä¿®æ”¹æˆä¸ºè¿™<br>æ ·:<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat pay.txt | \</span><br><span class="line">&gt; awk '&#123;if (NR==<span class="number">1</span>) printf <span class="string">"%10s %10s %10s %10s %10s<span class="subst">\n</span>"</span>,$<span class="number">1</span>,$<span class="number">2</span>,$<span class="number">3</span>,$<span class="number">4</span>,<span class="string">"Total"</span>&#125;</span><br><span class="line">&gt; NR &gt;= <span class="number">2</span> &#123;Total = $<span class="number">2</span>+$<span class="number">3</span>+$<span class="number">4</span></span><br><span class="line">&gt; printf <span class="string">"%10s %10s %10s %10s %10.2f<span class="subst">\n</span>"</span>,$<span class="number">1</span>,$<span class="number">2</span>,$<span class="number">3</span>,$<span class="number">4</span>,Total&#125;'</span><br><span class="line"># output</span><br><span class="line">      Name        <span class="number">1</span>st        <span class="number">2</span>nd        <span class="number">3</span>th      Total</span><br><span class="line">        Vd      <span class="number">23000</span>      <span class="number">24000</span>      <span class="number">25000</span>   <span class="number">72000.00</span></span><br><span class="line">        Di      <span class="number">21000</span>      <span class="number">20000</span>      <span class="number">23000</span>   <span class="number">64000.00</span></span><br><span class="line">        Bd      <span class="number">43000</span>      <span class="number">42000</span>      <span class="number">41000</span>  <span class="number">126000.00</span></span><br></pre></td></tr></table></figure></p><h4 id="3-4-3ã€-æ–‡ä»¶æ¯”è¾ƒå·¥å…·"><a href="#3-4-3ã€-æ–‡ä»¶æ¯”è¾ƒå·¥å…·" class="headerlink" title="3.4.3ã€ æ–‡ä»¶æ¯”è¾ƒå·¥å…·"></a>3.4.3ã€ æ–‡ä»¶æ¯”è¾ƒå·¥å…·</h4><p>ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°æ–‡ä»¶çš„æ¯”å¯¹å•Š?é€šå¸¸æ˜¯<strong>åŒä¸€ä¸ªè½¯ä»¶çš„ä¸åŒç‰ˆæœ¬ä¹‹é—´,æ¯”è¾ƒé…ç½®æ–‡ä»¶ä¸åŸå§‹æ–‡ä»¶çš„å·®åˆ«</strong>ã€‚å¾ˆå¤šæ—¶å€™æ‰€è°“çš„æ–‡ä»¶æ¯”å¯¹,é€šå¸¸æ˜¯ç”¨åœ¨ASCIIçº¯æ–‡æœ¬æ–‡ä»¶çš„æ¯”å¯¹ä¸Šçš„!é‚£ä¹ˆæ¯”å¯¹æ–‡ä»¶çš„æŒ‡ä»¤æœ‰å“ªäº›?æœ€å¸¸è§çš„å°±æ˜¯diffå•°!å¦å¤–,é™¤äº†diffæ¯”å¯¹ä¹‹å¤–,æˆ‘ä»¬è¿˜å¯ä»¥å€Ÿç”±cmpæ¥æ¯”å¯¹éçº¯æ–‡æœ¬æ–‡ä»¶!åŒæ—¶,ä¹Ÿèƒ½å¤Ÿå€Ÿç”± diff åˆ›å»ºçš„åˆ†ææ¡£,ä»¥å¤„ç†è¡¥ä¸(patch)åŠŸèƒ½çš„æ–‡ä»¶å‘¢!å°±æ¥ç©ç©å…ˆ!</p><ul><li><b style="color: red">diff</b></li></ul><p><code>diff</code>å°±æ˜¯ç”¨åœ¨æ¯”å¯¹ä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´çš„å·®å¼‚çš„,å¹¶ä¸”æ˜¯<strong>ä»¥è¡Œä¸ºå•ä½æ¥æ¯”å¯¹çš„</strong>!ä¸€èˆ¬æ˜¯ç”¨åœ¨ASCIIçº¯æ–‡æœ¬æ–‡ä»¶çš„æ¯”å¯¹ä¸Šã€‚ç”±äºæ˜¯ä»¥è¡Œä¸ºæ¯”å¯¹çš„å•ä½,å› æ­¤<strong><code>diff</code>é€šå¸¸æ˜¯ç”¨åœ¨åŒä¸€çš„æ–‡ä»¶(æˆ–è½¯ä»¶)çš„æ–°æ—§ç‰ˆæœ¬åŒºåˆ«ä¸Š</strong>! ä¸¾ä¾‹æ¥è¯´,å‡å¦‚æˆ‘ä»¬è¦å°†<code>/etc/passwd</code>å¤„ç†æˆä¸ºä¸€ä¸ªæ–°çš„ç‰ˆæœ¬<code>pd</code>,å¤„ç†æ–¹å¼ä¸º:å°†ç¬¬å››è¡Œåˆ é™¤,ç¬¬å…­è¡Œåˆ™å–ä»£æˆä¸ºâ€œno six lineâ€,æ–°çš„æ–‡ä»¶æ”¾ç½®åˆ° <code>/shell_learning/test</code> é‡Œé¢,é‚£ä¹ˆåº”è¯¥æ€ä¹ˆåš?</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cd ~<span class="regexp">/Desktop/shell</span>_learning</span><br><span class="line">mkdir test</span><br><span class="line">cp /etc/passwd pd</span><br><span class="line">cat pd | sed -e <span class="string">'4d'</span> -e <span class="string">'6c no six line'</span> &gt; pd.new</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">cat -n pd.new | head -n <span class="number">6</span></span><br><span class="line">     <span class="number">1</span>  <span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line">     <span class="number">2</span>  <span class="symbol">daemon:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:daemon</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">     <span class="number">3</span>  <span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">2</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">     <span class="number">4</span>  <span class="symbol">sync:</span><span class="symbol">x:</span><span class="number">4</span><span class="symbol">:</span><span class="number">65534</span><span class="symbol">:sync</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sync</span></span><br><span class="line">     <span class="number">5</span>  no six line</span><br><span class="line">     <span class="number">6</span>  <span class="symbol">man:</span><span class="symbol">x:</span><span class="number">6</span><span class="symbol">:</span><span class="number">12</span><span class="symbol">:man</span><span class="symbol">:/var/cache/man</span><span class="symbol">:/usr/sbin/nologin</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥è®¨è®ºä¸€ä¸‹å…³äº<code>diff</code>çš„ç”¨æ³•å§ï¼<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">diff [-bBi] <span class="keyword">from</span>-<span class="built_in">file</span> <span class="keyword">to</span>-<span class="built_in">file</span></span><br><span class="line"><span class="comment"># parasï¼š</span></span><br><span class="line">    <span class="keyword">from</span>-<span class="built_in">file</span> : ä¸€ä¸ªæ–‡ä»¶å,ä½œä¸ºåŸå§‹æ¯”å¯¹æ–‡ä»¶çš„æ–‡ä»¶å;</span><br><span class="line">    <span class="keyword">to</span>-<span class="built_in">file</span> : ä¸€ä¸ªæ–‡ä»¶å,ä½œä¸ºç›®çš„æ¯”å¯¹æ–‡ä»¶çš„æ–‡ä»¶å;</span><br><span class="line">    æ³¨æ„,<span class="keyword">from</span>-<span class="built_in">file</span> æˆ– <span class="keyword">to</span>-<span class="built_in">file</span> å¯ä»¥ - å–ä»£,é‚£ä¸ª - ä»£è¡¨â€œStandard inputâ€ä¹‹æ„ã€‚</span><br><span class="line">    -b  :å¿½ç•¥ä¸€è¡Œå½“ä¸­,ä»…æœ‰å¤šä¸ªç©ºç™½çš„å·®å¼‚(ä¾‹å¦‚ <span class="string">"about me"</span> ä¸ <span class="string">"about       me"</span> è§†ä¸ºç›¸åŒ</span><br><span class="line">    -B  :å¿½ç•¥ç©ºç™½è¡Œçš„å·®å¼‚ã€‚</span><br><span class="line">    -i  :å¿½ç•¥å¤§å°å†™çš„ä¸åŒã€‚</span><br></pre></td></tr></table></figure></p><p><span style="color:red"><b>èŒƒä¾‹ä¸€:</b></span>æ¯”å¯¹<code>pd</code>ä¸<code>pd.new</code>çš„å·®å¼‚<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">diff pd pd.new </span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="number">4</span>d3      &lt;==å·¦è¾¹ç¬¬å››è¡Œè¢«åˆ é™¤(d)äº†,åŸºå‡†æ˜¯å³è¾¹ç¬¬ä¸‰è¡Œ</span><br><span class="line">&lt; <span class="symbol">sys:</span><span class="symbol">x:</span><span class="number">3</span><span class="symbol">:</span><span class="number">3</span><span class="symbol">:sys</span><span class="symbol">:/dev</span><span class="symbol">:/usr/sbin/nologin</span>   &lt;===è¿™è¾¹åˆ—å‡ºå·¦è¾¹(&lt;)æ–‡ä»¶è¢«åˆ é™¤çš„é‚£ä¸€è¡Œå†…å®¹</span><br><span class="line"><span class="number">6</span>c5      &lt;==å·¦è¾¹æ–‡ä»¶çš„ç¬¬å…­è¡Œè¢«æ›¿æ¢(c)æˆå³è¾¹æ–‡ä»¶çš„ç¬¬äº”è¡Œ</span><br><span class="line">&lt; <span class="symbol">games:</span><span class="symbol">x:</span><span class="number">5</span><span class="symbol">:</span><span class="number">60</span><span class="symbol">:games</span><span class="symbol">:/usr/games</span><span class="symbol">:/usr/sbin/nologin</span>   &lt;===å·¦è¾¹(&lt;)æ–‡ä»¶çš„ç¬¬å…­è¡Œå†…å®¹</span><br><span class="line">---</span><br><span class="line">&gt; no six line     &lt;==å³è¾¹(&gt;)æ–‡ä»¶ç¬¬äº”è¡Œå†…å®¹</span><br></pre></td></tr></table></figure></p><blockquote><p> å¾ˆèªæ˜å§ï¼ç”¨<code>diff</code>æŠŠæˆ‘ä»¬åˆšåˆšçš„å¤„ç†ç»™æ¯”å¯¹å®Œæ¯•äº†ï¼<br><br> <code>diff</code>ä¹Ÿå¯ä»¥æ¯”è¾ƒæ•´ä¸ªç›®å½•ä¸‹çš„åŒºåˆ«<br><br> <code>diff</code>è¿˜å¯ä»¥æ¯”è¾ƒä¸åŒç›®å½•ä¸‹çš„ç›¸åŒæ–‡ä»¶åçš„å†…å®¹</p></blockquote><ul><li><b style="color: red">cmp</b></li></ul><p>ç›¸å¯¹äº<code>diff</code>çš„å¹¿æ³›ç”¨é€”,<code>cmp</code>ä¼¼ä¹å°±ç”¨çš„æ²¡æœ‰è¿™ä¹ˆå¤šäº†~<code>cmp</code>ä¸»è¦ä¹Ÿæ˜¯åœ¨æ¯”å¯¹ä¸¤ä¸ªæ–‡ä»¶,ä»–<br>ä¸»è¦åˆ©ç”¨â€œå­—èŠ‚â€å•ä½å»æ¯”å¯¹, å› æ­¤,å½“ç„¶ä¹Ÿå¯ä»¥æ¯”å¯¹<code>binary file</code>å•°~(è¿˜æ˜¯è¦å†æé†’å–”,<code>diff</code>ä¸»è¦æ˜¯ä»¥â€œè¡Œâ€ä¸ºå•ä½æ¯”å¯¹,<code>cmp</code>åˆ™æ˜¯ä»¥â€œå­—èŠ‚â€ä¸ºå•ä½å»æ¯”å¯¹,è¿™å¹¶ä¸ç›¸åŒ!)<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cmp [-l] file1 file2</span><br><span class="line"><span class="meta"># paras:</span></span><br><span class="line">    -l :å°†æ‰€æœ‰çš„ä¸åŒç‚¹çš„å­—èŠ‚å¤„éƒ½åˆ—å‡ºæ¥ã€‚å› ä¸º cmp é»˜è®¤ä»…ä¼šè¾“å‡ºç¬¬ä¸€ä¸ªå‘ç°çš„ä¸åŒç‚¹ã€‚</span><br><span class="line"><span class="meta"># examples:</span></span><br><span class="line">    cmp pd pd.<span class="keyword">new</span> </span><br><span class="line">    <span class="meta"># output</span></span><br><span class="line">    pd pd.<span class="keyword">new</span> differ: <span class="keyword">byte</span> <span class="number">120</span>, <span class="built_in">line</span> <span class="number">4</span></span><br></pre></td></tr></table></figure></p><ul><li><b style="color: red">patch</b></li></ul><p>patch è¿™ä¸ªæŒ‡ä»¤ä¸ diff å¯æ˜¯æœ‰å¯†ä¸å¯åˆ†çš„å…³ç³»å•Š!æˆ‘ä»¬å‰é¢æåˆ°,diff å¯ä»¥ç”¨æ¥åˆ†è¾¨ä¸¤ä¸ªç‰ˆæœ¬<br>ä¹‹é—´çš„å·®å¼‚, ä¸¾ä¾‹æ¥è¯´,åˆšåˆšæˆ‘ä»¬æ‰€åˆ›å»ºçš„<code>pd</code>åŠ<code>pd.new</code>ä¹‹é—´å°±æ˜¯ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„æ–‡ä»¶ã€‚é‚£ä¹ˆ,å¦‚æœè¦â€œå‡çº§â€å‘¢?å°±æ˜¯â€œå°†æ—§çš„æ–‡ä»¶å‡çº§æˆä¸ºæ–°çš„æ–‡ä»¶â€æ—¶,åº”è¯¥è¦æ€ä¹ˆåšå‘¢?å…¶å®ä¹Ÿä¸éš¾å•¦!å°±æ˜¯â€œå…ˆæ¯”è¾ƒå…ˆæ—§ç‰ˆæœ¬çš„å·®å¼‚,å¹¶å°†å·®å¼‚æ¡£åˆ¶ä½œæˆä¸ºè¡¥ä¸æ–‡ä»¶,å†ç”±è¡¥ä¸æ–‡ä»¶æ›´æ–°æ—§æ–‡ä»¶â€å³å¯ã€‚ä¸¾ä¾‹æ¥è¯´,æˆ‘ä»¬å¯ä»¥è¿™æ ·åšæµ‹è¯•:</p><p><b style="color: red">èŒƒä¾‹ä¸€ï¼š</b>ä»¥<code>pd</code>ä¸<code>pd.new</code>åˆ¶ä½œè¡¥ä¸æ–‡ä»¶<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">diff -Naur pd pd.new  &gt; pd.patch</span><br><span class="line">cat pd.patch</span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">--- pd  <span class="number">2018</span>-<span class="number">04</span>-<span class="number">11</span> <span class="number">13</span><span class="symbol">:</span><span class="number">03</span><span class="symbol">:</span><span class="number">58.165695684</span> +080<span class="number">0</span>  &lt;== æ–°æ—§æ–‡ä»¶çš„ä¿¡æ¯</span><br><span class="line">+++ pd.new  <span class="number">2018</span>-<span class="number">04</span>-<span class="number">11</span> <span class="number">13</span><span class="symbol">:</span>08<span class="symbol">:</span><span class="number">07</span>.<span class="number">710232163</span> +080<span class="number">0</span></span><br><span class="line">@@ -<span class="number">1</span>,<span class="number">9</span> +<span class="number">1</span>,<span class="number">8</span> @@           &lt;== æ–°æ—§æ–‡ä»¶è¦ä¿®æ”¹æ•°æ®çš„ç•Œå®šèŒƒå›´ï¼Œæ—§æ–‡ä»¶<span class="number">1</span>-<span class="number">9</span>è¡Œï¼Œæ–°æ–‡ä»¶<span class="number">1</span>-<span class="number">8</span>è¡Œ</span><br><span class="line"> <span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"> <span class="symbol">daemon:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:daemon</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line"> <span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">2</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">-<span class="symbol">sys:</span><span class="symbol">x:</span><span class="number">3</span><span class="symbol">:</span><span class="number">3</span><span class="symbol">:sys</span><span class="symbol">:/dev</span><span class="symbol">:/usr/sbin/nologin</span>   &lt;== å·¦ä¾§æ–‡ä»¶è¢«åˆ é™¤</span><br><span class="line"> <span class="symbol">sync:</span><span class="symbol">x:</span><span class="number">4</span><span class="symbol">:</span><span class="number">65534</span><span class="symbol">:sync</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sync</span>     &lt;== å·¦ä¾§æ–‡ä»¶è¢«åˆ é™¤</span><br><span class="line">-<span class="symbol">games:</span><span class="symbol">x:</span><span class="number">5</span><span class="symbol">:</span><span class="number">60</span><span class="symbol">:games</span><span class="symbol">:/usr/games</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">+no six line                            &lt;== å³ä¾§æ–°æ–‡ä»¶åŠ å…¥</span><br><span class="line"> <span class="symbol">man:</span><span class="symbol">x:</span><span class="number">6</span><span class="symbol">:</span><span class="number">12</span><span class="symbol">:man</span><span class="symbol">:/var/cache/man</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line"> <span class="symbol">lp:</span><span class="symbol">x:</span><span class="number">7</span><span class="symbol">:</span><span class="number">7</span><span class="symbol">:lp</span><span class="symbol">:/var/spool/lpd</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line"> <span class="symbol">mail:</span><span class="symbol">x:</span><span class="number">8</span><span class="symbol">:</span><span class="number">8</span><span class="symbol">:mail</span><span class="symbol">:/var/mail</span><span class="symbol">:/usr/sbin/nologin</span></span><br></pre></td></tr></table></figure></p><p>ä¸€èˆ¬æ¥è¯´,ä½¿ç”¨<code>diff</code>åˆ¶ä½œå‡ºæ¥çš„æ¯”è¾ƒæ–‡ä»¶é€šå¸¸ä½¿ç”¨æ‰©å±•åä¸º<code>.patch</code>å•°ã€‚è‡³äºå†…å®¹å°±å¦‚åŒä¸Šé¢ä»‹ç»çš„æ ·å­ã€‚åŸºæœ¬ä¸Šå°±æ˜¯ä»¥è¡Œä¸ºå•ä½,çœ‹çœ‹å“ªè¾¹æœ‰ä¸€æ ·ä¸ä¸ä¸€æ ·çš„,æ‰¾åˆ°ä¸€æ ·çš„åœ°æ–¹,ç„¶åå°†ä¸ä¸€æ ·çš„åœ°æ–¹å–ä»£æ‰! ä»¥ä¸Šé¢è¡¨æ ¼ä¸ºä¾‹,æ–°æ–‡ä»¶çœ‹åˆ°-ä¼šåˆ é™¤,çœ‹åˆ°+ä¼šåŠ å…¥!å¥½äº†,é‚£ä¹ˆå¦‚ä½•å°†<strong>æ—§çš„æ–‡ä»¶æ›´æ–°æˆä¸ºæ–°çš„å†…å®¹</strong>å‘¢? å°±æ˜¯å°†<code>pd</code>æ”¹æˆä¸<code>pd.new</code>ç›¸åŒ!å¯ä»¥è¿™æ ·åš:<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">patch</span> -pN &lt; <span class="keyword">patch</span>_file &lt;==æ›´æ–°</span><br><span class="line"><span class="keyword">patch</span> -R -pN &lt; <span class="keyword">patch</span>_file &lt;==è¿˜åŸ</span><br><span class="line"><span class="comment"># paras:</span></span><br><span class="line">-p :åé¢å¯ä»¥æ¥â€œå–æ¶ˆå‡ å±‚ç›®å½•â€çš„æ„æ€ã€‚</span><br><span class="line">-R :ä»£è¡¨è¿˜åŸ,å°†æ–°çš„æ–‡ä»¶è¿˜åŸæˆåŸæ¥æ—§çš„ç‰ˆæœ¬ã€‚</span><br></pre></td></tr></table></figure></p><p><b style="color: red">èŒƒä¾‹äºŒï¼š</b>å°†åˆšæ‰åˆ¶ä½œå‡ºæ¥çš„<code>patch file</code>ç”¨æ¥æ›´æ–°æ—§ç‰ˆæ•°æ®<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">patch -p<span class="number">0</span> &lt; pd.patch</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">patching file pd</span><br><span class="line"></span><br><span class="line">heany<span class="variable">@heany</span><span class="symbol">:~/Desktop/shell-learning</span><span class="variable">$ </span>ll pd*</span><br><span class="line">-rw-r--r-- <span class="number">1</span> heany heany <span class="number">2253</span> <span class="number">4</span>æœˆ  <span class="number">11</span> <span class="number">13</span><span class="symbol">:</span><span class="number">43</span> pd</span><br><span class="line">-rw-r--r-- <span class="number">1</span> heany heany <span class="number">2253</span> <span class="number">4</span>æœˆ  <span class="number">11</span> <span class="number">13</span><span class="symbol">:</span>08 pd.new</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸¤ä¸ªæ–‡ä»¶å¤§å°ä¸€æ¨¡ä¸€æ ·</span></span><br></pre></td></tr></table></figure></p><p><b style="color: red">èŒƒä¾‹ä¸‰ï¼š</b>å°†åˆšæ‰åˆ¶ä½œå‡ºæ¥çš„<code>patch file</code>æ¢å¤æ—§æ–‡ä»¶çš„å†…å®¹<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">patch -R -p<span class="number">0</span> &lt; pd.patch</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">patching file pd</span><br><span class="line"></span><br><span class="line">heany<span class="variable">@heany</span><span class="symbol">:~/Desktop/shell-learning</span><span class="variable">$ </span>ll pd*</span><br><span class="line">-rw-r--r-- <span class="number">1</span> heany heany <span class="number">2326</span> <span class="number">4</span>æœˆ  <span class="number">11</span> <span class="number">13</span><span class="symbol">:</span><span class="number">47</span> pd</span><br><span class="line">-rw-r--r-- <span class="number">1</span> heany heany <span class="number">2253</span> <span class="number">4</span>æœˆ  <span class="number">11</span> <span class="number">13</span><span class="symbol">:</span>08 pd.new</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ–‡ä»¶æ¢å¤æˆæ—§çš„ç‰ˆæœ¬äº†</span></span><br></pre></td></tr></table></figure></p><blockquote><p> ä¸ºä»€ä¹ˆè¿™é‡Œä¼šä½¿ç”¨<code>-p0</code>å‘¢?å› ä¸ºæˆ‘ä»¬åœ¨æ¯”å¯¹æ–°æ—§ç‰ˆçš„æ•°æ®æ—¶æ˜¯åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹,å› æ­¤ä¸éœ€è¦å‡å»ç›®å½•å•¦!å¦‚æœæ˜¯ä½¿ç”¨æ•´ä½“ç›®å½•æ¯”å¯¹(diffæ—§ç›®å½• æ–°ç›®å½•)æ—¶, å°±å¾—è¦ä¾æ®åˆ›å»º<code>patch</code>æ–‡ä»¶ä»¶æ‰€åœ¨ç›®å½•æ¥è¿›è¡Œç›®å½•çš„åˆ å‡å•°!</p></blockquote><h4 id="3-4-4ã€-æ–‡ä»¶æ‰“å°å‡†å¤‡ï¼špr"><a href="#3-4-4ã€-æ–‡ä»¶æ‰“å°å‡†å¤‡ï¼špr" class="headerlink" title="3.4.4ã€ æ–‡ä»¶æ‰“å°å‡†å¤‡ï¼špr"></a>3.4.4ã€ æ–‡ä»¶æ‰“å°å‡†å¤‡ï¼š<code>pr</code></h4><p>å¦‚æœä½ æ›¾ç»ä½¿ç”¨è¿‡ä¸€äº›å›¾å½¢æ¥å£çš„æ–‡ä¹¦å¤„ç†è½¯ä»¶çš„è¯,é‚£ä¹ˆå¾ˆå®¹æ˜“å‘ç°,å½“æˆ‘ä»¬åœ¨æ‰“å°çš„æ—¶<br>å€™, å¯ä»¥åŒæ—¶é€‰æ‹©ä¸è®¾ç½®æ¯ä¸€é¡µæ‰“å°æ—¶çš„æ ‡å¤´å§!ä¹Ÿå¯ä»¥è®¾ç½®é¡µç å‘¢!é‚£ä¹ˆ,å¦‚æœæˆ‘æ˜¯åœ¨<br>Linux ä¸‹é¢æ‰“å°çº¯æ–‡æœ¬æ–‡ä»¶å‘¢ å¯ä¸å¯ä»¥å…·æœ‰æ ‡é¢˜å•Š?å¯ä¸å¯ä»¥åŠ å…¥é¡µç å•Š?å‘µå‘µ!å½“ç„¶å¯ä»¥<br>å•Š!ä½¿ç”¨ pr å°±èƒ½å¤Ÿè¾¾åˆ°è¿™ä¸ªåŠŸèƒ½äº†ã€‚ä¸è¿‡, pr çš„å‚æ•°å®åœ¨å¤ªå¤šäº†,è¯´ä¸å®Œ,ä¸€èˆ¬æ¥<br>è¯´,ä»…ä½¿ç”¨æœ€ç®€å•çš„æ–¹å¼æ¥å¤„ç†å°±è¡Œã€‚ä¸¾ä¾‹æ¥è¯´,å¦‚æœæƒ³è¦æ‰“å°<code>pd</code>å‘¢?<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">heany<span class="variable">@heany</span><span class="symbol">:~/Desktop/shell-learning</span><span class="variable">$ </span>pr pd</span><br><span class="line"></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">11</span> <span class="number">13</span><span class="symbol">:</span><span class="number">47</span>                        pd                        Page <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="symbol">daemon:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:daemon</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">2</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">....................ä¸‹é¢çœç•¥..........</span><br></pre></td></tr></table></figure></p><h2 id="å››ã€-å­¦ä¹ Shell-Scripts"><a href="#å››ã€-å­¦ä¹ Shell-Scripts" class="headerlink" title="å››ã€ å­¦ä¹ Shell Scripts"></a>å››ã€ å­¦ä¹ <b style="color: red">Shell Scripts</b></h2><h3 id="4-1ã€ä»€ä¹ˆæ˜¯shell-script"><a href="#4-1ã€ä»€ä¹ˆæ˜¯shell-script" class="headerlink" title="4.1ã€ä»€ä¹ˆæ˜¯shell script"></a>4.1ã€ä»€ä¹ˆæ˜¯shell script</h3><p><code>shell script</code>å¯ä»¥ç®€å•çš„è¢«çœ‹æˆæ˜¯æ‰¹å¤„ç†æ–‡ä»¶,ä¹Ÿå¯ä»¥è¢«è¯´æˆæ˜¯ä¸€ä¸ªç¨‹åºè¯­è¨€,ä¸”è¿™ä¸ªç¨‹åºè¯­è¨€ç”±äºéƒ½æ˜¯åˆ©ç”¨<code>shell</code>ä¸ç›¸å…³å·¥å…·æŒ‡ä»¤, æ‰€ä»¥ä¸éœ€è¦ç¼–è¯‘å³å¯æ‰§è¡Œ,ä¸”æ‹¥æœ‰ä¸é”™çš„é™¤é”™(debug)å·¥å…·,æ‰€ä»¥,ä»–å¯ä»¥å¸®åŠ©ç³»ç»Ÿç®¡ç†å‘˜å¿«é€Ÿçš„ç®¡ç†å¥½ä¸»æœºã€‚</p><p><code>shell script</code>å…¶å®å°±æ˜¯çº¯æ–‡æœ¬æ–‡ä»¶,æˆ‘ä»¬å¯ä»¥ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶,ç„¶åè®©è¿™ä¸ªæ–‡ä»¶æ¥å¸®æˆ‘ä»¬ä¸€æ¬¡æ‰§è¡Œå¤šä¸ªæŒ‡ä»¤,æˆ–è€…æ˜¯åˆ©ç”¨ä¸€äº›è¿ç®—ä¸é€»è¾‘åˆ¤æ–­æ¥å¸®æˆ‘ä»¬è¾¾æˆæŸäº›åŠŸèƒ½ã€‚æ‰€ä»¥å•¦,è¦ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹æ—¶,å½“ç„¶å°±éœ€è¦å…·å¤‡æœ‰ bash æŒ‡ä»¤ä¸‹è¾¾çš„ç›¸å…³è®¤è¯†ã€‚ä¸‹è¾¾æŒ‡ä»¤éœ€è¦æ³¨æ„çš„äº‹é¡¹åœ¨ç¬¬å››ç« çš„å¼€å§‹ä¸‹è¾¾æŒ‡ä»¤å°èŠ‚å†…å·²ç»æè¿‡,æœ‰ç–‘é—®è¯·è‡ªè¡Œå›å»ç¿»é˜…ã€‚ åœ¨<code>shell script</code>çš„æ’°å†™ä¸­è¿˜éœ€è¦ç”¨åˆ°ä¸‹é¢çš„æ³¨æ„äº‹é¡¹:</p><pre><code>1. æŒ‡ä»¤çš„æ‰§è¡Œæ˜¯ä»ä¸Šè€Œä¸‹ã€ä»å·¦åˆ°å³çš„åˆ†æä¸æ‰§è¡Œ;2. æŒ‡ä»¤çš„ä¸‹è¾¾ï¼šæŒ‡ä»¤ã€é€‰é¡¹ä¸å‚æ•°é—´çš„å¤šä¸ªç©ºç™½éƒ½ä¼šè¢«å¿½ç•¥æ‰;3. ç©ºç™½è¡Œä¹Ÿå°†è¢«å¿½ç•¥æ‰,å¹¶ä¸” [tab] æŒ‰é”®æ‰€å¾—çš„ç©ºç™½åŒæ ·è§†ä¸ºç©ºæ ¼é”®;4. å¦‚æœè¯»å–åˆ°ä¸€ä¸ªEnterç¬¦å·ï¼ˆCRï¼‰ï¼Œå°±å°è¯•å¼€å§‹æ‰§è¡Œè¯¥è¡Œï¼ˆè¯¥ä¸²ï¼‰å‘½ä»¤;5. è‡³äºå¦‚æœä¸€è¡Œçš„å†…å®¹å¤ªå¤šï¼Œåˆ™å¯ä»¥ä½¿ç”¨&quot;[Enter]&quot;æ¥å»¶ä¼¸è‡³ä¸‹ä¸€è¡Œ;6. â€œ # â€å¯åšä¸ºæ³¨è§£!ä»»ä½•åŠ åœ¨ # åé¢çš„æ•°æ®å°†å…¨éƒ¨è¢«è§†ä¸ºæ³¨è§£æ–‡å­—è€Œè¢«å¿½ç•¥!</code></pre><p>å¦‚æ­¤ä¸€æ¥,æˆ‘ä»¬åœ¨<code>script</code>å†…æ‰€æ’°å†™çš„ç¨‹åº,å°±ä¼šè¢«ä¸€è¡Œä¸€è¡Œçš„æ‰§è¡Œã€‚ç°åœ¨æˆ‘ä»¬å‡è®¾ä½ å†™çš„è¿™ä¸ªç¨‹åºæ–‡ä»¶åæ˜¯<code>/home/heany/Desktop/shell-learning/shell.sh</code>å¥½äº†,é‚£å¦‚ä½•æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶?å¾ˆç®€å•,å¯ä»¥æœ‰ä¸‹é¢å‡ ä¸ªæ–¹æ³•:</p><ul><li><p>ç›´æ¥ä¸‹è¾¾æŒ‡ä»¤ï¼š<code>shell.sh</code>æ–‡ä»¶å¿…é¡»è¦å…·å¤‡å¯è¯»ä¸å¯æ‰§è¡Œï¼ˆrxï¼‰çš„æƒé™ï¼Œç„¶åï¼š</p><p>  ç»å¯¹è·¯å¾„ï¼šä½¿ç”¨<code>/home/heany/Desktop/shell-learning/shell.sh</code>æ¥ä¸‹è¾¾æŒ‡ä»¤;<br><br>  ç›¸å¯¹è·¯å¾„ï¼šå‡è®¾å·¥ä½œç›®å½•åœ¨<code>/home/heany/Desktop/shell-learning</code>ï¼Œåˆ™ä½¿ç”¨<code>./shell.sh</code>æ¥æ‰§è¡Œ;<br><br>  å˜é‡<code>PATH</code>åŠŸèƒ½ï¼šå°†<code>shell.sh</code>æ”¾åœ¨PATHæŒ‡å®šçš„ç›®å½•å†…ï¼Œä¾‹å¦‚ï¼š<code>~/bin/</code></p></li><li><p>ä»¥<code>bash</code>ç¨‹åºæ¥æ‰§è¡Œï¼šé€šè¿‡â€bash shell.shâ€æˆ–<code>sh shell.sh</code>æ¥æ‰§è¡Œã€‚</p></li><li>ç¼–å†™ç¬¬ä¸€ä¸ª<code>script</code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Program:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    This program shows <span class="string">"Hello World!"</span> <span class="keyword">in</span> your screen.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> History:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2018/04/11  VBird   First release</span></span><br><span class="line">PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin</span><br><span class="line">export PATH</span><br><span class="line">echo -e "Hello World! \a \n"</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure></li></ul><p>ç¨‹åºè¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li><strong>ç¬¬ä¸€è¡Œ<code>#!/bin/bash</code>åœ¨å®£å‘Šè¿™ä¸ªscriptä½¿ç”¨çš„shellåç§°</strong>: å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯bash ,æ‰€ä»¥,å¿…é¡»è¦ä»¥<code>#!/bin/bash</code>æ¥å®£å‘Šè¿™ä¸ªæ–‡ä»¶å†…çš„è¯­æ³•ä½¿ç”¨bashè¯­æ³•!é‚£ä¹ˆå½“è¿™ä¸ªç¨‹åºè¢«æ‰§è¡Œæ—¶,ä»–å°±èƒ½å¤Ÿè½½å…¥<code>bash</code>çš„ç›¸å…³ç¯å¢ƒé…ç½®æ–‡ä»¶ (ä¸€èˆ¬æ¥è¯´å°±æ˜¯<code>non-login shell</code>çš„ ~/.bashrc), å¹¶ä¸”æ‰§è¡Œ<code>bash</code>æ¥ä½¿æˆ‘ä»¬ä¸‹é¢çš„æŒ‡ä»¤èƒ½å¤Ÿæ‰§è¡Œ!è¿™å¾ˆé‡è¦çš„!(åœ¨å¾ˆå¤šçŠ¶å†µä¸­,å¦‚æœæ²¡æœ‰è®¾ç½®å¥½è¿™ä¸€è¡Œ,é‚£ä¹ˆè¯¥ç¨‹åºå¾ˆå¯èƒ½ä¼šæ— æ³•æ‰§è¡Œ,å› ä¸ºç³»ç»Ÿå¯èƒ½æ— æ³•åˆ¤æ–­è¯¥ç¨‹åºéœ€è¦ä½¿ç”¨ä»€ä¹ˆ shell æ¥æ‰§è¡Œå•Š!)</li><li><strong>ç¨‹åºå†…å®¹çš„è¯´æ˜</strong>: æ•´ä¸ª script å½“ä¸­,é™¤äº†ç¬¬ä¸€è¡Œçš„<code>#!</code>æ˜¯ç”¨æ¥å®£å‘Šshellçš„ä¹‹å¤–,å…¶ä»–çš„<code>#</code>éƒ½æ˜¯â€œæ³¨è§£â€ç”¨é€”! æ‰€ä»¥ä¸Šé¢çš„ç¨‹åºå½“ä¸­,ç¬¬äºŒè¡Œä»¥ä¸‹å°±æ˜¯ç”¨æ¥è¯´æ˜æ•´ä¸ªç¨‹åºçš„åŸºæœ¬æ•°æ®ã€‚ä¸€èˆ¬æ¥è¯´, å»ºè®®ä½ ä¸€å®šè¦å…»æˆè¯´æ˜è¯¥ script çš„:1. å†…å®¹ä¸åŠŸèƒ½; 2. ç‰ˆæœ¬ä¿¡æ¯; 3.ä½œè€…ä¸è”ç»œæ–¹å¼; 4. åˆ›å»ºæ—¥æœŸ;5. å†å²çºªå½• ç­‰ç­‰ã€‚è¿™å°†æœ‰åŠ©äºæœªæ¥ç¨‹åºçš„æ”¹å†™ä¸ debugå‘¢!</li><li><strong>ä¸»è¦ç¯å¢ƒå˜é‡çš„å£°æ˜</strong>: å»ºè®®åŠ¡å¿…è¦å°†ä¸€äº›é‡è¦çš„ç¯å¢ƒå˜é‡è®¾ç½®å¥½,ä¸ªäººè®¤ä¸º,<code>PATH</code>ä¸<code>LANG</code> (å¦‚æœæœ‰ä½¿ç”¨åˆ°è¾“å‡ºç›¸å…³çš„ä¿¡æ¯æ—¶) æ˜¯å½“ä¸­æœ€é‡è¦çš„! å¦‚æ­¤ä¸€æ¥,åˆ™å¯è®©æˆ‘ä»¬è¿™æ”¯ç¨‹åºåœ¨è¿›è¡Œæ—¶,å¯ä»¥ç›´æ¥ä¸‹è¾¾ä¸€äº›å¤–éƒ¨æŒ‡ä»¤,è€Œä¸å¿…å†™ç»å¯¹è·¯å¾„å‘¢!æ¯”è¾ƒæ–¹ä¾¿å•¦ï¼</li><li><strong>ä¸»è¦ç¨‹åºéƒ¨åˆ†</strong>å°±å°†ä¸»è¦çš„ç¨‹åºå†™å¥½å³å¯ï¼åœ¨è¿™ä¸ªä¾‹å­å½“ä¸­ï¼Œå°±æ˜¯echoé‚£ä¸€è¡Œã€‚</li><li><p><strong>å‘ŠçŸ¥æ‰§è¡Œç»“æœ</strong>ï¼šä¸€ä¸ªå‘½ä»¤çš„æ‰§è¡ŒæˆåŠŸä¸å¦ï¼Œå¯ä»¥ä½¿ç”¨<code>$?</code>è¿™ä¸ªå˜é‡æ¥è§‚å¯Ÿï½é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨<code>exit</code>è¿™ä¸ªæŒ‡ä»¤æ¥è®©ç¨‹åºä¸­æ–­ï¼Œå¹¶ä¸”å›ä¼ ä¸€ä¸ªæ•°å€¼ç»™ç³»ç»Ÿã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­å½“ä¸­,æˆ‘ä½¿ç”¨<code>exit 0</code>,è¿™ä»£è¡¨ç¦»å¼€<code>script</code>å¹¶ä¸”å›ä¼ ä¸€ä¸ª<code>0</code>ç»™ç³»ç»Ÿ, æ‰€ä»¥æˆ‘æ‰§è¡Œå®Œè¿™ä¸ª<code>script</code>å,è‹¥æ¥ç€ä¸‹è¾¾<code>echo $?</code> åˆ™å¯å¾—åˆ°<code>0</code>çš„å€¼å–”! æ›´èªæ˜çš„è¯»è€…åº”è¯¥ä¹ŸçŸ¥é“äº†!åˆ©ç”¨è¿™ä¸ª<code>exit n</code>(n æ˜¯æ•°å­—) çš„åŠŸèƒ½,æˆ‘<br>ä»¬è¿˜å¯ä»¥è‡ªè®¢é”™è¯¯è®¯æ¯, è®©è¿™æ”¯ç¨‹åºå˜å¾—æ›´åŠ çš„<code>smart</code>å‘¢!</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod a+x hello.sh</span><br><span class="line"><span class="string">./hello.sh</span></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure></li><li><p><b style="color: red;font-size: 24px">ç¼–å†™<code>shell script</code>çš„è‰¯å¥½ä¹ æƒ¯</b></p></li></ul><p>ä¸€ä¸ªè‰¯å¥½ä¹ æƒ¯çš„å…»æˆæ˜¯å¾ˆé‡è¦çš„~å¤§å®¶åœ¨åˆšå¼€å§‹æ’°å†™ç¨‹åºçš„æ—¶å€™,æœ€å®¹æ˜“å¿½ç•¥è¿™éƒ¨åˆ†, è®¤ä¸º<br>ç¨‹åºå†™å‡ºæ¥å°±å¥½äº†,å…¶ä»–çš„ä¸é‡è¦ã€‚å…¶å®,å¦‚æœç¨‹åºçš„è¯´æ˜èƒ½å¤Ÿæ›´æ¸…æ¥š,é‚£ä¹ˆå¯¹ä½ è‡ªå·±æ˜¯æœ‰<br>å¾ˆå¤§çš„å¸®åŠ©çš„ã€‚<b style="color: red">è¦å­¦ä¼šæ¯”è¾ƒä»”ç»†çš„å°†ç¨‹åºçš„è®¾è®¡è¿‡ç¨‹ç»™å®ƒè®°å½•ä¸‹æ¥ï¼Œè€Œä¸”è®°å½•ä¸€äº›å†å²è®°å½•</b>ã€‚åœ¨æ¯ä¸ª<code>script</code>çš„æ–‡ä»¶å¼€å§‹å¤„è®°å½•å¥½ï¼š</p><pre><code>1. `script`çš„åŠŸèƒ½2. `script`çš„ç‰ˆæœ¬ä¿¡æ¯3. `script`çš„ä½œè€…ä¸è”ç³»æ–¹å¼4. `script`çš„ç‰ˆæƒå£°æ˜æ–¹å¼5. `script`çš„`History`ï¼ˆå†å²è®°å½•ï¼‰6. `script`å†…æ¯”è¾ƒç‰¹æ®Šçš„æŒ‡ä»¤ï¼Œä½¿ç”¨â€œç»å¯¹è·¯å¾„â€çš„æ–¹å¼ä¸‹è¾¾7. `script`è¿è¡Œæ—¶éœ€è¦çš„ç¯å¢ƒå˜é‡é¢„å…ˆå®£å‘Šä¸è®¾ç½®8. åœ¨è¾ƒä¸ºç‰¹æ®Šç¨‹åºä»£ç éƒ¨åˆ†ï¼ŒåŠ ä¸Šé€‚å½“çš„æ³¨é‡Šè¯´æ˜</code></pre><blockquote><p> ç¨‹åºä»£ç çš„ç¼–å†™æœ€å¥½ä½¿ç”¨åµŒå¥—æ–¹å¼ï¼Œ<strong>æœ€å¥½èƒ½ä»¥<code>[tab]</code>æŒ‰é”®çš„ç©ºæ ¼ç¼©æ’</strong>è¿™æ ·ä»£ç çœ‹èµ·æ¥éå¸¸æ¼‚äº®ä¸æœ‰æ¡ç†ã€‚</p></blockquote><h3 id="4-2ã€-ç®€å•çš„shellç»ƒä¹ "><a href="#4-2ã€-ç®€å•çš„shellç»ƒä¹ " class="headerlink" title="4.2ã€ ç®€å•çš„shellç»ƒä¹ "></a>4.2ã€ ç®€å•çš„<code>shell</code>ç»ƒä¹ </h3><h4 id="4-2-1ã€-ç®€å•èŒƒä¾‹"><a href="#4-2-1ã€-ç®€å•èŒƒä¾‹" class="headerlink" title="4.2.1ã€ ç®€å•èŒƒä¾‹"></a>4.2.1ã€ ç®€å•èŒƒä¾‹</h4><ul><li>äº¤äº’å¼è„šæœ¬ï¼šå˜é‡å†…å®¹ç”±ç”¨æˆ·å†³å®š</li></ul><p>è¯·ä½ ä»¥<code>read</code>å‘½ä»¤çš„ç”¨é€”,ç¼–å†™ä¸€ä¸ª<code>script</code>,ä»–å¯ä»¥è®©ä½¿ç”¨è€…è¾“å…¥first nameä¸last name,æœ€åå¹¶ä¸”åœ¨å±å¹•ä¸Šæ˜¾ç¤º:â€œYour full name is: â€çš„å†…å®¹:<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># showname.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># paragram:</span></span><br><span class="line"><span class="comment">#       User inputs his first name and last name. Program shows his full name.</span></span><br><span class="line"><span class="comment"># History</span></span><br><span class="line"><span class="comment"># 2018/04/11   heany  First release</span></span><br><span class="line">PATH=<span class="regexp">/bin:/sbin</span><span class="symbol">:/usr/bin</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/local/bin</span><span class="symbol">:/usr/local/sbin</span><span class="symbol">:~/bin</span></span><br><span class="line">export PATH</span><br><span class="line"><span class="comment"># æç¤ºä½¿ç”¨è€…è¾“å…¥</span></span><br><span class="line">read -p <span class="string">"Please input your first name: "</span> firstname</span><br><span class="line"><span class="comment"># æç¤ºä½¿ç”¨è€…è¾“å…¥</span></span><br><span class="line">read -p <span class="string">"Please input your last name: "</span> lastname</span><br><span class="line"><span class="comment"># ç»“æœç”±å±å¹•è¾“å‡º</span></span><br><span class="line">echo -e <span class="string">"\nYour full name is: $&#123;firstname&#125; $&#123;lastname&#125;"</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰§è¡Œè„šæœ¬</span></span><br><span class="line"> .  showname.sh</span><br><span class="line">Please input your first <span class="symbol">name:</span> heany</span><br><span class="line">Please input your last <span class="symbol">name:</span> boy</span><br><span class="line"></span><br><span class="line">Your full name <span class="symbol">is:</span> heany boy</span><br></pre></td></tr></table></figure></p><ul><li>éšæ—¥æœŸå˜åŒ–ï¼šåˆ©ç”¨<code>data</code>è¿›è¡Œæ–‡ä»¶çš„åˆ›å»º</li></ul><p>æƒ³åƒä¸€ä¸ªçŠ¶å†µ,å‡è®¾æˆ‘çš„æœåŠ¡å™¨å†…æœ‰æ•°æ®åº“,æ•°æ®åº“æ¯å¤©çš„æ•°æ®éƒ½ä¸å¤ªä¸€æ ·,å› æ­¤å½“æˆ‘å¤‡ä»½æ—¶,å¸Œæœ›å°†æ¯å¤©çš„æ•°æ®éƒ½å¤‡ä»½æˆä¸åŒçš„æ–‡ä»¶å,è¿™æ ·æ‰èƒ½å¤Ÿè®©æ—§çš„æ•°æ®ä¹Ÿèƒ½å¤Ÿä¿å­˜ä¸‹æ¥ä¸è¢«è¦†ç›–ã€‚å“‡!ä¸åŒæ–‡ä»¶åå‘¢!è¿™çœŸå›°æ‰°å•Š?éš¾é“è¦æˆ‘æ¯å¤©å»ä¿®æ”¹<code>script</code>?</p><p>ä¸éœ€è¦å•Š!è€ƒè™‘æ¯å¤©çš„â€œæ—¥æœŸâ€å¹¶ä¸ç›¸åŒ,æ‰€ä»¥æˆ‘å¯ä»¥å°†æ–‡ä»¶åå–æˆç±»ä¼¼:<code>backup.2015-07-16.data</code>, ä¸å°±å¯ä»¥æ¯å¤©ä¸€ä¸ªä¸åŒæ–‡ä»¶åäº†å—?å‘µå‘µ!ç¡®å®å¦‚æ­¤ã€‚é‚£ä¸ª<code>2015-07-16</code>æ€ä¹ˆæ¥çš„?é‚£å°±æ˜¯é‡ç‚¹å•¦!æ¥ä¸‹æ¥å‡ºä¸ªç›¸å…³çš„ä¾‹å­: å‡è®¾æˆ‘æƒ³è¦åˆ›å»ºä¸‰ä¸ªç©ºçš„æ–‡ä»¶ (é€šè¿‡ touch)æ–‡ä»¶åæœ€å¼€å¤´ç”±ä½¿ç”¨è€…è¾“å…¥å†³å®š,å‡è®¾ä½¿ç”¨è€…è¾“å…¥<code>filename</code>å¥½äº†,é‚£ä»Šå¤©çš„æ—¥æœŸæ˜¯<code>2015/07/16</code>, æˆ‘æƒ³è¦ä»¥å‰å¤©ã€æ˜¨å¤©ã€ä»Šå¤©çš„æ—¥æœŸæ¥åˆ›å»ºè¿™äº›æ–‡ä»¶,äº¦å³filename_20150714,filename_20150715, filename_20150716 ,è¯¥å¦‚ä½•æ˜¯å¥½?<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># program:</span></span><br><span class="line"><span class="comment">#       Program creates three files, which named by user's input and date command.</span></span><br><span class="line"><span class="comment"># History:</span></span><br><span class="line"><span class="comment"># 2018/04/11    heany   First release</span></span><br><span class="line">PATH=<span class="regexp">/bin:/sbin</span><span class="symbol">:/usr/bin</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/local/bin</span><span class="symbol">:/usr/local/sbin</span><span class="symbol">:~/bin</span></span><br><span class="line">export PATH</span><br><span class="line"><span class="comment"># 1. è®©ä½¿ç”¨è€…è¾“å…¥æ–‡ä»¶åç§°,å¹¶å–å¾— fileuser è¿™ä¸ªå˜é‡;</span></span><br><span class="line">echo -e <span class="string">"I will use 'touch' command to create 3 files."</span> <span class="comment"># çº¯ç²¹æ˜¾ç¤ºä¿¡æ¯</span></span><br><span class="line">read -p <span class="string">"Please input your filename: "</span> fileuser         <span class="comment"># æç¤ºä½¿ç”¨è€…è¾“å…¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. ä¸ºäº†é¿å…ä½¿ç”¨è€…éšæ„æŒ‰Enter,åˆ©ç”¨å˜é‡åŠŸèƒ½åˆ†ææ–‡ä»¶åæ˜¯å¦æœ‰è®¾ç½®</span></span><br><span class="line">filename=<span class="variable">$&#123;</span><span class="symbol">fileuser:</span>-<span class="string">"filename"</span>&#125;                <span class="comment"># å¼€å§‹åˆ¤æ–­æœ‰å¦é…ç½®æ–‡ä»¶å</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å¼€å§‹åˆ©ç”¨ date æŒ‡ä»¤æ¥å–å¾—æ‰€éœ€è¦çš„æ–‡ä»¶åäº†;</span></span><br><span class="line">date1=<span class="variable">$(</span>date --date=<span class="string">'2 days ago'</span> +%Y%m%d)       <span class="comment"># å‰ä¸¤å¤©çš„æ—¥æœŸ</span></span><br><span class="line">date2=<span class="variable">$(</span>date --date=<span class="string">'1 days ago'</span> +%Y%m%d)       <span class="comment"># å‰ä¸€å¤©çš„æ—¥æœŸ</span></span><br><span class="line">date3=<span class="variable">$(</span>date +%Y%m%d)                           <span class="comment"># ä»Šå¤©çš„æ—¥æœŸ</span></span><br><span class="line">file1=<span class="variable">$&#123;</span>filename&#125;<span class="variable">$&#123;</span>date1&#125;                       <span class="comment"># ä¸‹é¢ä¸‰è¡Œåœ¨é…ç½®æ–‡ä»¶å</span></span><br><span class="line">file2=<span class="variable">$&#123;</span>filename&#125;<span class="variable">$&#123;</span>date2&#125;</span><br><span class="line">file3=<span class="variable">$&#123;</span>filename&#125;<span class="variable">$&#123;</span>date3&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p> åœ¨ä¸€ä¸²å‘½ä»¤ä¸­å¦‚æœè¿˜éœ€è¦é€šè¿‡å…¶ä»–çš„å‘½ä»¤æä¾›çš„ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨åå•å¼•å·`å‘½ä»¤`æˆ–<code>$</code>(å‘½ä»¤)ã€‚<code>filename=${fileuser:-&quot;filename&quot;}</code>ï¼Œè¿™æ¡å‘½ä»¤ç”¨æ¥åˆ¤æ–­<code>fileuser</code>æ˜¯å¦å·²ç»èµ‹å€¼ï¼Œ<code>:-</code>æ˜¯ä¸€èµ·çš„ï¼Œ<code>fileuser</code>å¦‚æœæœ‰å€¼çš„è¯ï¼Œå°±ç”¨æ‰€æ‹¥æœ‰çš„å€¼èµ‹ç»™<code>filename</code>å˜é‡ï¼Œå¦‚æœæ²¡æœ‰å€¼çš„è¯ï¼Œå°±æŠŠâ€filenameâ€èµ‹ç»™<code>fileuser</code>ï¼Œå†èµ‹ç»™<code>filename</code>å˜é‡ã€‚</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">v</span>=$(uname -r)</span><br><span class="line">echo <span class="variable">$v</span></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">4.13.0-38-generic</span><br><span class="line"></span><br><span class="line"><span class="attribute">vv</span>=`uname -r`</span><br><span class="line">echo <span class="variable">$vv</span></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">4.13.0-38-generic</span><br></pre></td></tr></table></figure><ul><li>æ•°å€¼è¿ç®—ï¼šç®€å•çš„åŠ å‡ä¹˜é™¤</li></ul><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>declare</code>æ¥å®šä¹‰å˜é‡çš„ç±»å‹å§? å½“å˜é‡å®šä¹‰æˆä¸ºæ•´æ•°åæ‰èƒ½å¤Ÿè¿›è¡ŒåŠ å‡è¿ç®—å•Š!æ­¤å¤–,æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨<strong><code>$((è®¡ç®—å¼))</code></strong>æ¥è¿›è¡Œæ•°å€¼è¿ç®—çš„ã€‚å¯æƒœçš„æ˜¯,<code>bash shell</code>é‡Œå¤´é»˜è®¤ä»…æ”¯æŒåˆ°æ•´æ•°çš„æ•°æ®è€Œå·²ã€‚OK!é‚£æˆ‘ä»¬æ¥ç©ç©çœ‹,å¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨è€…è¾“å…¥ä¸¤ä¸ªå˜é‡, ç„¶åå°†ä¸¤ä¸ªå˜é‡çš„å†…å®¹ç›¸ä¹˜,æœ€åè¾“å‡ºç›¸ä¹˜çš„ç»“æœ,é‚£å¯ä»¥æ€ä¹ˆåš?<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Program:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       User inputs 2 <span class="built_in">integer</span> numbers; program will cross thest two numbers.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> History:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2018/04/11    heany   First release</span></span><br><span class="line"></span><br><span class="line">PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin</span><br><span class="line">export PATH</span><br><span class="line"></span><br><span class="line">echo -e "You SHOULD input 2 numbers, I will multiplying them! \n"</span><br><span class="line">read -p "first number: " firstnu</span><br><span class="line">read -p "second number: " secnu</span><br><span class="line">total=$(($&#123;firstnu&#125;*$&#123;secnu&#125;))</span><br><span class="line">echo -e "\nThe result of $firstnu x $secnu is ==&gt; $total"</span><br></pre></td></tr></table></figure></p><blockquote><p> åœ¨æ•°å€¼è®¡ç®—ä¸Šï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<strong><code>declare -i total=$fistnu*$secnu</code></strong>,ä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå› ä¸ºæ¯”è¾ƒç¹çï¼Œä¸å®¹æ˜“è®°ã€‚ä½¿ç”¨ä¸Šé¢ç¨‹åºä¸­çš„é‚£ç§æ–¹å¼æ¥è®¡ç®—æ•°å€¼ã€‚</p></blockquote><p>å¦‚æœæƒ³è¦è®¡ç®—å«æœ‰å°æ•°ç‚¹çš„æ•°æ®æ—¶ï¼Œå…¶å®å¯ä»¥é€šè¿‡<code>bc</code>è¿™ä¸ªæŒ‡ä»¤çš„ååŠ©ï¼Œä¾‹å¦‚ï¼š</p><pre><code>echo &quot;123.123*55.9&quot; | bc# output6882.575</code></pre><h3 id="4-3ã€-å–„ç”¨åˆ¤æ–­å¼"><a href="#4-3ã€-å–„ç”¨åˆ¤æ–­å¼" class="headerlink" title="4.3ã€ å–„ç”¨åˆ¤æ–­å¼"></a>4.3ã€ å–„ç”¨åˆ¤æ–­å¼</h3><p><code>$?</code>è¿™ä¸ªå˜é‡ä»£è¡¨çš„æ˜¯ä¸Šä¸€æ¡å‘½ä»¤æ‰§è¡Œçš„æƒ…å†µï¼Œè‹¥æ²¡é—®é¢˜åˆ™å›ä¼ ç ä¸º<code>0</code>,è‹¥å­˜åœ¨é—®é¢˜ï¼Œå›ä¼ é”™è¯¯ä»£ç (é0), æ­¤å¤–,ä¹Ÿé€šè¿‡<code>&amp;&amp;</code>åŠ<code>||</code>æ¥ä½œä¸ºå‰ä¸€ä¸ªæŒ‡ä»¤æ‰§è¡Œå›ä¼ å€¼å¯¹äºåä¸€ä¸ªæŒ‡ä»¤æ˜¯å¦è¦è¿›è¡Œçš„ä¾æ®ã€‚æˆ‘ä»¬çŸ¥é“æƒ³è¦åˆ¤æ–­ä¸€ä¸ªç›®å½•æ˜¯å¦å­˜åœ¨, ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯lsè¿™ä¸ªæŒ‡ä»¤æ­é…æ•°æ®æµé‡å¯¼å‘,æœ€åé…åˆ<code>$?</code>æ¥å†³å®šåç»­çš„æŒ‡ä»¤è¿›è¡Œä¸å¦ã€‚ä½†æ˜¯å¦æœ‰æ›´ç®€å•çš„æ–¹å¼å¯ä»¥æ¥è¿›è¡Œâ€œæ¡ä»¶åˆ¤æ–­â€å‘¢?æœ‰çš„~é‚£å°±æ˜¯<code>test</code>è¿™ä¸ªæŒ‡ä»¤ã€‚</p><h4 id="4-3-1ã€-åˆ©ç”¨testæŒ‡ä»¤çš„æµ‹è¯•åŠŸèƒ½"><a href="#4-3-1ã€-åˆ©ç”¨testæŒ‡ä»¤çš„æµ‹è¯•åŠŸèƒ½" class="headerlink" title="4.3.1ã€ åˆ©ç”¨testæŒ‡ä»¤çš„æµ‹è¯•åŠŸèƒ½"></a>4.3.1ã€ åˆ©ç”¨<code>test</code>æŒ‡ä»¤çš„æµ‹è¯•åŠŸèƒ½</h4><p>å½“æˆ‘ä»¬è¦æ£€æµ‹ç³»ç»Ÿä¸Šé¢æŸäº›æ–‡ä»¶æˆ–è€…æ˜¯ç›¸å…³çš„å±æ€§æ—¶ï¼Œåˆ©ç”¨<code>test</code>è¿™ä¸ªæŒ‡ä»¤æ¥å·¥ä½œçœŸæ˜¯å¥½ç”¨å¾—ç‚¸äº†ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘è¦æ£€æŸ¥<code>/heany</code>æ˜¯å¦å­˜åœ¨æ—¶ï¼Œä½¿ç”¨ï¼š</p><pre><code>test -e /heany</code></pre><p>æ‰§è¡Œç»“æœä¸ä¼šæ˜¾ç¤ºä»»ä½•ä¿¡æ¯ï¼Œä½†æœ€åæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>$?</code>æˆ–<code>&amp;&amp;åŠ||</code>æ¥å±•ç°æ•´ä¸ªç»“æœï¼ä¾‹å¦‚æˆ‘ä»¬åœ¨å°†ä¸Šé¢çš„ä¾‹å­æ”¹å†™æˆè¿™æ ·ï¼š</p><pre><code>test -e /heany &amp;&amp; echo &quot;exist&quot; || echo &quot;No exist&quot;# outputNo exist  ==&gt; ç»“æœæ˜¾ç¤ºä¸å­˜åœ¨</code></pre><p>æœ€ç»ˆçš„ç»“æœå¯ä»¥å‘ŠçŸ¥æˆ‘ä»¬æ˜¯<code>exist</code>è¿˜æ˜¯<code>Not exist</code>å‘¢!é‚£æˆ‘çŸ¥é“<code>-e</code>æ˜¯æµ‹è¯•ä¸€ä¸ªâ€œä¸œè¥¿â€åœ¨ä¸åœ¨,<br>å¦‚æœè¿˜æƒ³è¦æµ‹è¯•ä¸€ä¸‹è¯¥æ–‡ä»¶åæ˜¯å•¥ç©æ„å„¿æ—¶,è¿˜æœ‰å“ªäº›æ ‡å¿—å¯ä»¥æ¥åˆ¤æ–­çš„å‘¢?å‘µå‘µ!æœ‰ä¸‹é¢è¿™äº›ä¸œè¥¿å–”!</p><ol><li>å…³äºæŸä¸ªæ–‡ä»¶åçš„â€æ–‡ä»¶ç±»å‹â€åˆ¤æ–­ï¼Œå¦‚<code>test -e filename</code>è¡¨ç¤ºå­˜åœ¨ä¸å¦</li></ol><table><thead><tr><th style="text-align:center">æµ‹è¯•çš„æ ‡å¿—</th><th style="text-align:center">ä»£è¡¨æ„ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">-e</td><td style="text-align:center">è¯¥æ–‡ä»¶åæ˜¯å¦å­˜åœ¨</td></tr><tr><td style="text-align:center">-f</td><td style="text-align:center">è¯¥æ–‡ä»¶åæ˜¯å¦å­˜åœ¨ä¸”é—®æ–‡ä»¶</td></tr><tr><td style="text-align:center">-d</td><td style="text-align:center">è¯¥æ–‡ä»¶åæ˜¯å¦å­˜åœ¨ä¸”ä¸ºç›®å½•</td></tr><tr><td style="text-align:center">-b</td><td style="text-align:center">è¯¥æ–‡ä»¶åæ˜¯å¦å­˜åœ¨ä¸”ä¸ºä¸€ä¸ª<code>block device</code>è®¾å¤‡</td></tr><tr><td style="text-align:center">-c</td><td style="text-align:center">è¯¥æ–‡ä»¶åæ˜¯å¦å­˜åœ¨ä¸”ä¸ºä¸€ä¸ª<code>character device</code>è®¾å¤‡</td></tr><tr><td style="text-align:center">-S</td><td style="text-align:center">è¯¥æ–‡ä»¶åæ˜¯å¦å­˜åœ¨ä¸”ä¸ºä¸€ä¸ªSocketæ–‡ä»¶</td></tr><tr><td style="text-align:center">-p</td><td style="text-align:center">è¯¥æ–‡ä»¶åæ˜¯å¦å­˜åœ¨ä¸”ä¸ºä¸€ä¸ªFIFOï¼ˆpipeï¼‰æ–‡ä»¶</td></tr><tr><td style="text-align:center">-L</td><td style="text-align:center">è¯¥æ–‡ä»¶åæ˜¯å¦å­˜åœ¨ä¸”ä¸ºä¸€ä¸ªé“¾æ¥æ–‡ä»¶</td></tr></tbody></table><ol start="2"><li>å…³äºæ–‡ä»¶çš„æƒé™ä¾¦æµ‹ï¼Œå¦‚<code>test -r filename</code>è¡¨ç¤ºå¯è¯»å¦ï¼ˆä½†rootæƒé™å¸¸æœ‰ä¾‹å¤–ï¼‰</li></ol><p><img src="https://wx4.sinaimg.cn/mw1024/e0db46edgy1fq90rrorbrj20m607p0u0.jpg" align="center"></p><ol start="3"><li>ä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´çš„æ¯”è¾ƒï¼Œå¦‚ï¼š<code>test file1 -nt file2</code></li></ol><table><thead><tr><th style="text-align:center">æµ‹è¯•çš„æ ‡å¿—</th><th style="text-align:center">ä»£è¡¨æ„ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">-nt</td><td style="text-align:center">(newer than)åˆ¤æ–­<code>file1</code>æ˜¯å¦æ¯”<code>file2</code>æ–°</td></tr><tr><td style="text-align:center">-ot</td><td style="text-align:center">(older than)åˆ¤æ–­<code>file1</code>æ˜¯å¦æ¯”<code>file2</code>æ—§</td></tr><tr><td style="text-align:center">-ef</td><td style="text-align:center">åˆ¤æ–­ file1 ä¸ file2 æ˜¯å¦ä¸ºåŒä¸€æ–‡ä»¶,<br>å¯ç”¨åœ¨åˆ¤æ–­<code>hard link</code>çš„åˆ¤å®šä¸Šã€‚<br>ä¸»è¦æ„ä¹‰åœ¨åˆ¤å®š,ä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦å‡æŒ‡å‘åŒä¸€ä¸ª<code>inode</code></td></tr></tbody></table><ol start="4"><li>å…³äºä¸¤ä¸ªæ•´æ•°ä¹‹é—´çš„åˆ¤å®šï¼Œä¾‹å¦‚ï¼š<code>test n1 -eq n2</code></li></ol><p><img src="https://wx4.sinaimg.cn/mw1024/e0db46edgy1fq90rrpaszj20mf06n74s.jpg" align="center"></p><ol start="5"><li>åˆ¤å®šå­—ä¸²çš„æ•°æ®</li></ol><p><img src="https://wx3.sinaimg.cn/mw1024/e0db46edgy1fq90rrp8zij20mc050mxw.jpg" align="center"></p><ol start="6"><li>å¤šé‡æ¡ä»¶åˆ¤å®šï¼Œä¾‹å¦‚ï¼š<code>test -r filename -a -x filename</code></li></ol><table><thead><tr><th style="text-align:center">æµ‹è¯•çš„æ ‡å¿—</th><th style="text-align:center">ä»£è¡¨æ„ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">-a</td><td style="text-align:center">ä¸¤ä¸ªæ¡ä»¶åŒæ—¶æˆç«‹ï¼<br>ä¾‹å¦‚ <code>test -r file -a -x file</code>,åˆ™fileåŒæ—¶å…·æœ‰rä¸xæƒé™æ—¶ã€‚æ‰å›ä¼ true</td></tr><tr><td style="text-align:center">-o</td><td style="text-align:center">(or)ä¸¤çŠ¶å†µä»»ä½•ä¸€ä¸ªæˆç«‹!ä¾‹å¦‚ test -r file -o -x file,åˆ™ file å…·æœ‰ r æˆ– x æƒé™æ—¶,å°±å¯å›ä¼  trueã€‚</td></tr><tr><td style="text-align:center">!</td><td style="text-align:center">åç›¸çŠ¶æ€,å¦‚<code>test ! -x file</code>,å½“fileä¸å…·æœ‰xæ—¶,å›ä¼ <code>true</code></td></tr></tbody></table><p>ç°åœ¨æˆ‘ä»¬åˆ©ç”¨<code>test</code>æ¥å¸®æˆ‘ä»¬å†™å‡ ä¸ªç®€å•çš„ä¾‹å­ã€‚é¦–å…ˆï¼Œåˆ¤æ–­ä¸€ä¸‹ï¼Œè®©ä½¿ç”¨è€…è¾“å…¥ä¸€ä¸ªæ–‡ä»¶åï¼Œæˆ‘ä»¬åˆ¤æ–­ï¼š</p><ol><li>è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™ç»™äºˆä¸€ä¸ªâ€Filename does not existâ€çš„ä¿¡æ¯ï¼Œå¹¶ä¸­æ–­ç¨‹åº; </li><li>è‹¥è¿™ä¸ªæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™åˆ¤æ–­ä»–æ˜¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œç»“æœè¾“å‡ºâ€œFilename is regular fileâ€æˆ–â€Filename is directoryâ€</li><li>åˆ¤æ–­ä¸€ä¸‹ï¼Œæ‰§è¡Œè€…çš„èº«ä»½å¯¹è¿™ä¸ªæ–‡ä»¶æˆ–ç›®å½•æ‰€æ‹¥æœ‰çš„æƒé™ï¼Œå¹¶è¾“å‡ºæƒé™æ•°æ®ï¼</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Program:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       User input a filename, program will check flowing:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       1. exist?  2. file/directory?  3. file permisions</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> History:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2018/04/11    heany   First release</span></span><br><span class="line"></span><br><span class="line">PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin</span><br><span class="line">export PATH</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1. è®©ä½¿ç”¨è€…è¾“å…¥æ–‡ä»¶å,å¹¶ä¸”åˆ¤æ–­ä½¿ç”¨è€…æ˜¯å¦çœŸçš„æœ‰è¾“å…¥å­—ä¸²?</span></span><br><span class="line">echo -e "Please input a filename, I will check the filename's type and permission. \n\n"</span><br><span class="line">read -p "Input a filename : " filename</span><br><span class="line">test -z $&#123;filename&#125; &amp;&amp; echo "You MUST input a filename." &amp;&amp; exit 0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨?è‹¥ä¸å­˜åœ¨åˆ™æ˜¾ç¤ºä¿¡æ¯å¹¶ç»“æŸè„šæœ¬</span></span><br><span class="line">test ! -e $&#123;filename&#125; &amp;&amp; echo "The filename '$&#123;filename&#125;' DO NOT exist" &amp;&amp; exit 0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. å¼€å§‹åˆ¤æ–­æ–‡ä»¶ç±»å‹ä¸å±æ€§</span></span><br><span class="line">test -f $&#123;filename&#125; &amp;&amp; filetype="regulare file"</span><br><span class="line">test -d $&#123;filename&#125; &amp;&amp; filetype="directory"</span><br><span class="line">test -r $&#123;filename&#125; &amp;&amp; perm="readable"</span><br><span class="line">test -w $&#123;filename&#125; &amp;&amp; perm="$&#123;perm&#125; writable"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4. å¼€å§‹è¾“å‡ºä¿¡æ¯!</span></span><br><span class="line">echo "The filename: $&#123;filename&#125; is a $&#123;filetype&#125;"</span><br><span class="line">echo "And the permissions for you are : $&#123;perm&#125;"</span><br></pre></td></tr></table></figure><h4 id="4-3-2ã€-åˆ©ç”¨åˆ¤æ–­ç¬¦å·"><a href="#4-3-2ã€-åˆ©ç”¨åˆ¤æ–­ç¬¦å·" class="headerlink" title="4.3.2ã€ åˆ©ç”¨åˆ¤æ–­ç¬¦å·[]"></a>4.3.2ã€ åˆ©ç”¨åˆ¤æ–­ç¬¦å·<code>[]</code></h4><p>é™¤äº†æˆ‘ä»¬å¾ˆå–œæ¬¢ä½¿ç”¨çš„<code>test</code>ä¹‹å¤–,å…¶å®,æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨åˆ¤æ–­ç¬¦å·<code>[ ]</code>(å°±æ˜¯ä¸­æ‹¬å·å•¦)æ¥è¿›è¡Œæ•°æ®çš„åˆ¤æ–­å‘¢! ä¸¾ä¾‹æ¥è¯´,å¦‚æœæˆ‘æƒ³è¦çŸ¥é“<code>${HOME}</code>è¿™ä¸ªå˜é‡æ˜¯å¦ä¸ºç©ºçš„,å¯ä»¥è¿™æ ·åš:</p><pre><code>[ -z &quot;$HOME&quot;] ; echo $?</code></pre><blockquote><p> ä½¿ç”¨ä¸­æ‹¬å·å¿…é¡»è¦ç‰¹åˆ«æ³¨æ„,å› ä¸ºä¸­æ‹¬å·ç”¨åœ¨å¾ˆå¤šåœ°æ–¹,åŒ…æ‹¬ä¸‡ç”¨å­—ç¬¦ä¸æ­£åˆ™è¡¨è¾¾å¼ç­‰ç­‰,æ‰€ä»¥å¦‚æœè¦åœ¨ bash çš„è¯­æ³•å½“ä¸­ä½¿ç”¨ä¸­æ‹¬å·ä½œä¸º<code>shell</code>çš„åˆ¤æ–­å¼æ—¶,å¿…é¡»è¦æ³¨æ„<b style="color: red">ä¸­æ‹¬å·çš„ä¸¤ç«¯éœ€è¦æœ‰ç©ºç™½å­—ç¬¦æ¥åˆ†éš”!</b> å‡è®¾æˆ‘ç©ºç™½é”®ä½¿ç”¨â€œâ–¡â€ç¬¦å·æ¥è¡¨ç¤º,é‚£ä¹ˆ,åœ¨è¿™äº›åœ°æ–¹ä½ éƒ½éœ€è¦æœ‰ç©ºç™½é”®:</p></blockquote><pre><code>[ &quot;$HOME&quot; == &quot;$MAIL&quot;][â–¡&quot;$HOME&quot;â–¡==â–¡&quot;$MAIL&quot;â–¡]</code></pre><p>å¯æ˜¯å·®å¾ˆå¤šçš„å–”!å¦å¤–,<strong>ä¸­æ‹¬å·çš„ä½¿ç”¨æ–¹æ³•ä¸<code>test</code>å‡ ä¹ä¸€æ¨¡ä¸€æ ·å•Š~ </strong>åªæ˜¯ä¸­æ‹¬å·æ¯”è¾ƒå¸¸ç”¨åœ¨æ¡ä»¶åˆ¤æ–­å¼<code>if ..... then ..... fi</code>çš„æƒ…å†µä¸­å°±æ˜¯äº†ã€‚å¥½,é‚£æˆ‘ä»¬ä¹Ÿä½¿ç”¨ä¸­æ‹¬å·çš„åˆ¤æ–­æ¥åšä¸€ä¸ªå°æ¡ˆä¾‹å¥½äº†,æ¡ˆä¾‹è®¾ç½®å¦‚ä¸‹:</p><pre><code>1. å½“æ‰§è¡Œä¸€ä¸ªç¨‹åºçš„æ—¶å€™,è¿™ä¸ªç¨‹åºä¼šè®©ä½¿ç”¨è€…é€‰æ‹© Y æˆ– N ,2. å¦‚æœä½¿ç”¨è€…è¾“å…¥Yæˆ–yæ—¶ï¼Œå°±æ˜¾ç¤º&quot;OKï¼Œ continue&quot;3. å¦‚æœä½¿ç”¨è€…è¾“å…¥ n æˆ– N æ—¶,å°±æ˜¾ç¤ºâ€œ Oh, interrupt !â€4. å¦‚æœä¸æ˜¯ Y/y/N/n ä¹‹å†…çš„å…¶ä»–å­—ç¬¦,å°±æ˜¾ç¤ºâ€œ I don&apos;t know what your choice is â€</code></pre><p>åˆ©ç”¨ä¸­æ‹¬å·ã€&amp;&amp;ä¸||æ¥ç»§ç»­å§ï¼<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Program:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       This program shows the user<span class="string">'s choice.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> History:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2018/04/11    heany   First release</span></span><br><span class="line"></span><br><span class="line">PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin</span><br><span class="line">export PATH</span><br><span class="line"></span><br><span class="line">read -p "Please input (Y/N): " yn</span><br><span class="line">[ "$&#123;yn&#125;" == "Y" -o "$&#123;yn&#125;" == "y" ] &amp;&amp; echo "OK, continue" &amp;&amp; exit 0</span><br><span class="line">[ "$&#123;yn&#125;" == "N" -o "$&#123;yn&#125;" == "n" ] &amp;&amp; echo "Oh, interrupt!" &amp;&amp; exit 0</span><br><span class="line">echo "I don't know what your choice is" &amp;&amp; exit 0</span><br></pre></td></tr></table></figure></p><blockquote><p> è¿™é‡Œä½¿ç”¨<code>-o</code>æ¥é“¾æ¥ä¸¤ä¸ªåˆ¤æ–­</p></blockquote><h4 id="4-3-3ã€-Shell-Scriptçš„é»˜è®¤å˜é‡ï¼ˆ-0-1â€¦ï¼‰"><a href="#4-3-3ã€-Shell-Scriptçš„é»˜è®¤å˜é‡ï¼ˆ-0-1â€¦ï¼‰" class="headerlink" title="4.3.3ã€ Shell Scriptçš„é»˜è®¤å˜é‡ï¼ˆ$0,$1â€¦ï¼‰"></a>4.3.3ã€ <strong><code>Shell Script</code></strong>çš„é»˜è®¤å˜é‡ï¼ˆ$0,$1â€¦ï¼‰</h4><p>æˆ‘ä»¬çŸ¥é“æŒ‡ä»¤å¯ä»¥å¸¦æœ‰é€‰é¡¹ä¸å‚æ•°,ä¾‹å¦‚<code>ls -la</code>å¯ä»¥å¯Ÿçœ‹åŒ…å«éšè—æ–‡ä»¶çš„æ‰€æœ‰å±æ€§ä¸æƒé™ã€‚é‚£ä¹ˆ<code>shell script</code>èƒ½ä¸èƒ½åœ¨è„šæœ¬æ–‡ä»¶ååé¢å¸¦æœ‰å‚æ•°å‘¢?å¾ˆæœ‰è¶£å–”!ä¸¾ä¾‹æ¥è¯´,å¦‚æœä½ æƒ³è¦é‡æ–°å¯åŠ¨ç³»ç»Ÿçš„ç½‘ç»œ,å¯ä»¥è¿™æ ·åš:</p><pre><code>file /etc/init.d/network/etc/init.d/network restart   # é‡å¯</code></pre><p>restart æ˜¯é‡æ–°å¯åŠ¨çš„æ„æ€,ä¸Šé¢çš„æŒ‡ä»¤å¯ä»¥â€œé‡æ–°å¯åŠ¨ /etc/init.d/network è¿™æ”¯ç¨‹åºâ€çš„æ„æ€!å””!é‚£ä¹ˆå¦‚æœä½ åœ¨ /etc/init.d/network åé¢åŠ ä¸Š stop å‘¢?æ²¡é”™!å°±å¯ä»¥ç›´æ¥å…³é—­è¯¥æœåŠ¡äº†!è¿™ä¹ˆç¥å¥‡å•Š? é”™å•Š!å¦‚æœä½ è¦ä¾æ®ç¨‹åºçš„æ‰§è¡Œç»™äºˆä¸€äº›å˜é‡å»è¿›è¡Œä¸åŒçš„ä»»åŠ¡æ—¶,æœ¬ç« ä¸€å¼€å§‹æ˜¯ä½¿ç”¨ read çš„åŠŸèƒ½!ä½† read åŠŸèƒ½çš„é—®é¢˜æ˜¯ä½ å¾—è¦æ‰‹åŠ¨ç”±é”®ç›˜è¾“å…¥ä¸€äº›åˆ¤æ–­å¼ã€‚å¦‚æœé€šè¿‡æŒ‡ä»¤åé¢æ¥å‚æ•°, é‚£ä¹ˆä¸€ä¸ªæŒ‡ä»¤å°±èƒ½å¤Ÿå¤„ç†å®Œæ¯•è€Œä¸éœ€è¦æ‰‹åŠ¨å†æ¬¡è¾“å…¥ä¸€äº›å˜é‡è¡Œä¸º!è¿™æ ·ä¸‹è¾¾æŒ‡ä»¤ä¼šæ¯”è¾ƒç®€å•æ–¹ä¾¿å•¦!</p><p>script æ˜¯æ€ä¹ˆè¾¾æˆè¿™ä¸ªåŠŸèƒ½çš„å‘¢?å…¶å® script é’ˆå¯¹å‚æ•°å·²ç»æœ‰è®¾ç½®å¥½ä¸€äº›å˜é‡åç§°äº†!å¯¹åº”å¦‚ä¸‹:<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/path/<span class="keyword">to</span>/scriptname     opt1    opt2    opt3    opt4</span><br><span class="line">        $0               $1      $2      $3      $4</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å¤Ÿæ¸…æ¥šäº†å§?æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶åä¸º<code>$0</code>è¿™ä¸ªå˜é‡,ç¬¬ä¸€ä¸ªæ¥çš„å‚æ•°å°±æ˜¯<code>$1</code>å•Š~ æ‰€ä»¥,åªè¦æˆ‘ä»¬åœ¨ script é‡Œé¢å–„ç”¨<code>$1</code>çš„è¯,å°±å¯ä»¥å¾ˆç®€å•çš„ç«‹å³ä¸‹è¾¾æŸäº›æŒ‡ä»¤åŠŸèƒ½äº†!é™¤äº†è¿™äº›æ•°å­—çš„å˜é‡ä¹‹å¤–, æˆ‘ä»¬è¿˜æœ‰ä¸€äº›è¾ƒä¸ºç‰¹æ®Šçš„å˜é‡å¯ä»¥åœ¨<code>script</code>å†…ä½¿ç”¨æ¥è°ƒç”¨è¿™äº›å‚æ•°å–”!</p><pre><code>$# :ä»£è¡¨åæ¥çš„å‚æ•°â€œä¸ªæ•°â€,ä»¥ä¸Šè¡¨ä¸ºä¾‹è¿™é‡Œæ˜¾ç¤ºä¸ºâ€œ 4 â€;$@ :ä»£è¡¨â€œ &quot;$1&quot; &quot;$2&quot; &quot;$3&quot; &quot;$4&quot; â€ä¹‹æ„,æ¯ä¸ªå˜é‡æ˜¯ç‹¬ç«‹çš„(ç”¨åŒå¼•å·æ‹¬èµ·æ¥);$* :ä»£è¡¨â€œ &quot;$1&lt;u&gt;c&lt;/u&gt;$2&lt;u&gt;c&lt;/u&gt;$3&lt;u&gt;c&lt;/u&gt;$4&quot; â€,&lt;br&gt;    å…¶ä¸­ &lt;u&gt;c&lt;/u&gt; ä¸ºåˆ†éš”å­—ç¬¦,é»˜è®¤ä¸ºç©ºç™½é”®, æ‰€ä»¥æœ¬ä¾‹ä¸­ä»£è¡¨â€œ &quot;$1 $2 $3 $4&quot; â€ä¹‹æ„ã€‚</code></pre><p>æ¥ç»ƒä¹ ï¼šå‡è®¾æˆ‘ä»¬è¦æ‰§è¡Œä¸€ä¸ªå¯ä»¥æºå¸¦å‚æ•°çš„<code>script</code>ï¼Œæ‰§è¡Œè¯¥è„šæœ¬åå±å¹•ä¼šæ˜¾ç¤ºå¦‚ä¸‹æ•°æ®ï¼š</p><pre><code>ç¨‹åºçš„æ–‡ä»¶åä¸ºä½•ï¼Ÿå…±æœ‰å‡ ä¸ªå‚æ•°ï¼Ÿè‹¥å‚æ•°çš„ä¸ªæ•°å°äº2åˆ™å‘ŠçŸ¥ä½¿ç”¨è€…å‚æ•°æ•°é‡å¤ªå°‘å…¨éƒ¨çš„å‚æ•°å†…å®¹ä¸ºä½•ï¼Ÿç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä½•ï¼Ÿç¬¬äºŒä¸ªå‚æ•°ä¸ºä½•ï¼Ÿ</code></pre><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Program:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       Program shows the script name, parameters and so on....</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> History:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2018/04/12    heany   First release</span></span><br><span class="line"></span><br><span class="line">PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin</span><br><span class="line">export PATH</span><br><span class="line"></span><br><span class="line">echo "The script name is ===&gt;  $0"</span><br><span class="line">echo "Total parameter number is ===&gt; $#"</span><br><span class="line">[ "$#" -lt 2 ] &amp;&amp; echo "The number of parameter is less than 2.  Stop here."\</span><br><span class="line">        &amp;&amp; exit 0</span><br><span class="line">echo "Your whole parameter is ==&gt; '$@'"</span><br><span class="line">echo "The 1st parameter   ===&gt; $1"</span><br><span class="line">echo "The 2nd parameter   ===&gt; $2"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è„šæœ¬æ‰§è¡Œ</span></span><br><span class="line">sh how_paras.sh I am a boy</span><br><span class="line"><span class="meta">#</span><span class="bash"> output</span></span><br><span class="line">The script name is ===&gt;  how_paras.sh</span><br><span class="line">Total parameter number is ===&gt; 4</span><br><span class="line">Your whole parameter is ==&gt; 'I am a boy'</span><br><span class="line">The 1st parameter   ===&gt; I</span><br><span class="line">The 2nd parameter   ===&gt; am</span><br></pre></td></tr></table></figure><ul><li><code>shift</code>ï¼šé€ æˆå‚æ•°å˜é‡å·ç åç§»</li></ul><p>ä»€ä¹ˆæ˜¯åç§»ï¼ˆshiftï¼‰å‘¢ï¼Ÿæˆ‘ä»¬ç”¨ä¸‹é¢çš„èŒƒä¾‹æ¥è¯´æ˜ä¸‹ï¼Œæˆ‘ä»¬å°†<code>how_paras.sh</code>çš„å†…å®¹ç¨ä½œå˜åŒ–ï¼Œç”¨æ¥æ˜¾ç¤ºæ¯æ¬¡åç§»åå‚æ•°çš„å˜åŒ–æƒ…å†µï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Program:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       Program shows the effect of <span class="built_in">shift</span> <span class="keyword">function</span>....</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> History:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2018/04/12    heany   First release</span></span><br><span class="line"></span><br><span class="line">PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin</span><br><span class="line">export PATH</span><br><span class="line"></span><br><span class="line">echo "Total parameter number is ===&gt;  $#"</span><br><span class="line">echo "Your whole parameter is   ===&gt; '$@'"</span><br><span class="line"></span><br><span class="line">shift   # è¿›è¡Œç¬¬ä¸€æ¬¡"ä¸€ä¸ªå˜é‡çš„ shift"</span><br><span class="line">echo "Total parameter number is ===&gt;  $#"</span><br><span class="line">echo "Your whole parameter is   ===&gt; '$@'"</span><br><span class="line"></span><br><span class="line">shift 3 #è¿›è¡Œç¬¬äºŒæ¬¡"ä¸‰ä¸ªå˜é‡çš„ shift"</span><br><span class="line">echo "Total parameter number is ===&gt;  $#"</span><br><span class="line">echo "Your whole parameter is   ===&gt; '$@'"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> execute script</span></span><br><span class="line">sh paras_shift.sh one two three four five six </span><br><span class="line"><span class="meta">#</span><span class="bash"> output</span></span><br><span class="line">Total parameter number is ===&gt;  6</span><br><span class="line">Your whole parameter is   ===&gt; 'one two three four five six'</span><br><span class="line">Total parameter number is ===&gt;  5</span><br><span class="line">Your whole parameter is   ===&gt; 'two three four five six'</span><br><span class="line">Total parameter number is ===&gt;  2</span><br><span class="line">Your whole parameter is   ===&gt; 'five six'</span><br></pre></td></tr></table></figure></p><p>å…‰çœ‹ç»“æœä½ å°±å¯ä»¥çŸ¥é“å•¦,é‚£ä¸ª<code>shift</code>ä¼šç§»åŠ¨å˜é‡,è€Œä¸”<code>shift</code>åé¢å¯ä»¥æ¥æ•°å­—,ä»£è¡¨æ‹¿æ‰æœ€å‰é¢çš„å‡ ä¸ªå‚æ•°çš„æ„æ€ã€‚ ä¸Šé¢çš„æ‰§è¡Œç»“æœä¸­,ç¬¬ä¸€æ¬¡è¿›è¡Œ<code>shift</code> åä»–çš„æ˜¾ç¤ºæƒ…å†µæ˜¯<code>one two three four five six</code>,æ‰€ä»¥å°±å‰©ä¸‹äº”ä¸ªå•¦!ç¬¬äºŒæ¬¡ç›´æ¥æ‹¿æ‰ä¸‰ä¸ª,å°±å˜æˆ<code>two three four five six</code>å•¦!è¿™æ ·è¿™ä¸ªæ¡ˆä¾‹å¯ä»¥äº†è§£äº†å—?ç†è§£äº†<code>shift</code>çš„åŠŸèƒ½äº†å—?</p><h3 id="4-4ã€-æ¡ä»¶åˆ¤æ–­å¼"><a href="#4-4ã€-æ¡ä»¶åˆ¤æ–­å¼" class="headerlink" title="4.4ã€ æ¡ä»¶åˆ¤æ–­å¼"></a>4.4ã€ æ¡ä»¶åˆ¤æ–­å¼</h3><h4 id="4-4-1ã€-åˆ©ç”¨if-then"><a href="#4-4-1ã€-åˆ©ç”¨if-then" class="headerlink" title="4.4.1ã€ åˆ©ç”¨if .... then"></a>4.4.1ã€ åˆ©ç”¨<code>if .... then</code></h4><ul><li>å•å±‚ã€ç®€å•æ¡ä»¶åˆ¤æ–­</li></ul><p>å¦‚æœä½ åªæœ‰ä¸€ä¸ªåˆ¤æ–­å¼è¦è¿›è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç®€å•çš„è¿™æ ·çœ‹ï¼š</p><pre><code>if [ æ¡ä»¶åˆ¤æ–­å¼ ]; then    å½“æ¡ä»¶åˆ¤æ–­å¼æˆç«‹æ—¶ï¼Œå¯ä»¥è¿›è¡Œå‘½ä»¤å·¥ä½œå†…å®¹fi &lt;=== å°†`if`åè¿‡æ¥å†™ï¼Œå°±æˆä¸º`fi`ï¼Œç»“æŸ`if`çš„æ„æ€ã€‚</code></pre><p>æ¡ä»¶åˆ¤æ–­å¼æœ‰å¤šä¸ªæ¡ä»¶æ—¶ï¼Œå¯ä»¥å°†å¤šä¸ªæ¡ä»¶å†™å…¥ä¸€ä¸ªä¸­æ‹¬å·é‡Œé¢ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªä¸­æ‹¬å·æ¥éš”å¼€ã€‚æ‹¬å·ä¹‹é—´ï¼Œåˆ™ç”¨<code>&amp;&amp;ä¸||</code>æ¥éš”å¼€ã€‚ä¸¾ä¸Šé¢çš„<code>ans_yn.sh</code>ä¾‹å­æ¥è¯´æ˜ï¼Œä¿®æ”¹é‡Œé¢çš„åˆ¤æ–­å¼ï¼š</p><pre><code>[ &quot;$yn&quot; == &quot;Y&quot; -o &quot;$yn&quot; == &quot;y&quot; ] ä¸Šå¼å¯æ›¿æ¢ä¸º [ &quot;$yn&quot; == &quot;Y&quot; ] || [ &quot;$yn&quot; == &quot;y&quot; ]</code></pre><blockquote><p> è¿™æ ·ç¬¦åˆäººä»¬çš„ä¹ æƒ¯é—®é¢˜ï¼Œæˆ‘ä»¬éƒ½å–œæ¬¢ä¸€ä¸ªä¸­æ‹¬å·ä»…æœ‰ä¸€ä¸ªåˆ¤åˆ«å¼ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†<code>ans_yn.sh</code>è¿™ä¸ªè„šæœ¬ä¿®æ”¹æˆä¸º<code>if ... then</code>çš„æ ·å¼ï¼š</p></blockquote><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Program:</span></span><br><span class="line"><span class="comment">#       This program shows the user's choice.</span></span><br><span class="line"><span class="comment"># History:</span></span><br><span class="line"><span class="comment"># 2018/04/11    heany   First release</span></span><br><span class="line"></span><br><span class="line">PATH=<span class="regexp">/bin:/sbin</span><span class="symbol">:/usr/bin</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/local/bin</span><span class="symbol">:/usr/local/sbin</span><span class="symbol">:~/bin</span></span><br><span class="line">export PATH</span><br><span class="line"></span><br><span class="line">read -p <span class="string">"Please input (Y/N): "</span> yn</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"$yn"</span> == <span class="string">"Y"</span> ] <span class="params">||</span> [ <span class="string">"$yn"</span> == <span class="string">"y"</span> ]; <span class="keyword">then</span></span><br><span class="line">        echo <span class="string">"OK, continue."</span></span><br><span class="line">        exit <span class="number">0</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"$yn"</span> == <span class="string">"N"</span> ] <span class="params">||</span> [ <span class="string">"$yn"</span> == <span class="string">"n"</span> ]; <span class="keyword">then</span></span><br><span class="line">        echo <span class="string">"Oh, interrupt!"</span></span><br><span class="line">        exit <span class="number">0</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo <span class="string">"I don't know what your choice is"</span> &amp;&amp; exit <span class="number">0</span></span><br></pre></td></tr></table></figure><ul><li>å¤šé‡ã€å¤æ‚æ¡ä»¶åˆ¤æ–­å¼</li></ul><p>åœ¨åŒä¸€ä¸ªæ•°æ®çš„åˆ¤æ–­ä¸­,å¦‚æœè¯¥æ•°æ®éœ€è¦è¿›è¡Œå¤šç§ä¸åŒçš„åˆ¤æ–­æ—¶,åº”è¯¥æ€ä¹ˆä½œ?ä¸¾ä¾‹æ¥è¯´,ä¸Šé¢çš„ ans_yn.sh è„šæœ¬ä¸­,æˆ‘ä»¬åªè¦è¿›è¡Œä¸€æ¬¡ ${yn} çš„åˆ¤æ–­å°±å¥½ (ä»…è¿›è¡Œä¸€æ¬¡ if ),ä¸æƒ³è¦ä½œå¤šæ¬¡ if çš„åˆ¤æ–­ã€‚ æ­¤æ—¶ä½ å°±å¾—è¦çŸ¥é“ä¸‹é¢çš„è¯­æ³•äº†:</p><pre><code># ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œåˆ†æˆåŠŸè¿›è¡Œä¸å¤±è´¥è¿›è¡Œ(else)if [ æ¡ä»¶åˆ¤æ–­å¼ä¸€ ]; then    å½“æ¡ä»¶åˆ¤æ–­å¼æˆç«‹æ—¶ï¼Œå¯ä»¥è¿›è¡Œçš„æŒ‡ä»¤å·¥ä½œå†…å®¹ï¼šelif [ æ¡ä»¶åˆ¤æ–­å¼äºŒ ]; then    å½“æ¡ä»¶åˆ¤æ–­å¼äºŒæˆç«‹æ—¶ï¼Œå¯ä»¥è¿›è¡Œçš„æŒ‡ä»¤å·¥ä½œå†…å®¹else    å½“æ¡ä»¶åˆ¤æ–­å¼ä¸€å’ŒäºŒéƒ½ä¸æˆç«‹æ—¶ï¼Œå¯ä»¥è¿›è¡Œçš„æŒ‡ä»¤å·¥ä½œå†…å®¹;fi </code></pre><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä½ ä¸å¸Œæœ›ä½¿ç”¨è€…ç”±é”®ç›˜è¾“å…¥é¢å¤–çš„æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸Šé¢æåˆ°çš„å‚æ•°åŠŸèƒ½ï¼ˆ$1ï¼‰ï¼Œè®©ä½¿ç”¨è€…åœ¨ä¸‹è¾¾å‘½ä»¤æ—¶å°±å°†å‚æ•°å¸¦è¿›å»ï¼ç°åœ¨æˆ‘ä»¬æƒ³è®©ä½¿ç”¨è€…è¾“å…¥<code>hello</code>è¿™ä¸ªå…³é”®å­—æ—¶ï¼Œåˆ©ç”¨å‚æ•°çš„æ–¹æ³•å¯ä»¥è¿™æ ·ä¾åºè®¾è®¡ï¼š</p><pre><code>1. åˆ¤æ–­`$1`æ˜¯å¦ä¸ºhelloï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°±æ˜¾ç¤ºâ€œhelloï¼Œhow are youï¼Ÿâ€2. å¦‚æœæ²¡æœ‰åŠ ä»»ä½•å‚æ•°,å°±æç¤ºä½¿ç”¨è€…å¿…é¡»è¦ä½¿ç”¨çš„å‚æ•°ä¸‹è¾¾æ³•;3. è€Œå¦‚æœåŠ å…¥çš„å‚æ•°ä¸æ˜¯ hello ,å°±æé†’ä½¿ç”¨è€…ä»…èƒ½ä½¿ç”¨ hello ä¸ºå‚æ•°ã€‚</code></pre><p>ä¹‹å‰æˆ‘ä»¬å·²ç»å­¦ä¼šäº†<code>grep</code>è¿™ä¸ªå¥½ç”¨çš„ç©æ„å„¿ï¼Œé‚£ä¹ˆå¤šå­¦ä¸€ä¸ªå«åš<code>netstat</code>çš„å‘½ä»¤ï¼Œè¿™ä¸ªæŒ‡ä»¤å¯ä»¥æŸ¥è¯¢åˆ°ç›®å‰ä¸»æœºæœ‰æ‰“å¼€çš„ç½‘ç»œæœåŠ¡ç«¯å£ï¼ˆservice portsï¼‰,æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>netstat -tuln</code>æ¥å–å¾—ç›®å‰ä¸»æœºæœ‰å¯åŠ¨çš„æœåŠ¡ï¼Œè€Œä¸”å–å¾—çš„ä¿¡æ¯æœ‰ç‚¹åƒè¿™æ ·ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">netstat</span> <span class="selector-tag">-tuln</span></span><br><span class="line"><span class="selector-tag">Active</span> <span class="selector-tag">Internet</span> <span class="selector-tag">connections</span> (<span class="selector-tag">only</span> <span class="selector-tag">servers</span>)</span><br><span class="line"><span class="selector-tag">Proto</span> <span class="selector-tag">Recv-Q</span> <span class="selector-tag">Send-Q</span> <span class="selector-tag">Local</span> <span class="selector-tag">Address</span>           <span class="selector-tag">Foreign</span> <span class="selector-tag">Address</span>         <span class="selector-tag">State</span>      </span><br><span class="line"><span class="selector-tag">tcp</span>        0      0 0<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-pseudo">:5355</span>            0<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span>:*               <span class="selector-tag">LISTEN</span>     </span><br><span class="line"><span class="selector-tag">tcp</span>        0      0 0<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-pseudo">:22</span>              0<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span>:*               <span class="selector-tag">LISTEN</span>     </span><br><span class="line"><span class="selector-tag">tcp</span>        0      0 127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:631</span>           0<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span>:*               <span class="selector-tag">LISTEN</span>     </span><br><span class="line"><span class="selector-tag">tcp</span>        0      0 127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:1080</span>          0<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span>:*               <span class="selector-tag">LISTEN</span>    </span><br><span class="line"><span class="selector-tag">udp</span>        0      0 0<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-pseudo">:5353</span>            0<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span>:*                          </span><br><span class="line"><span class="selector-tag">udp</span>        0      0 0<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-pseudo">:5353</span>            0<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span>:*                      </span><br><span class="line">#å°åŒ…æ ¼å¼           æœ¬åœ°<span class="selector-tag">IP</span>ï¼šç«¯å£              è¿œç¨‹<span class="selector-tag">IP</span>ï¼šç«¯å£              æ˜¯å¦ç›‘å¬</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢çš„é‡ç‚¹æ˜¯â€œLocal Address (æœ¬åœ°ä¸»æœºçš„IPä¸ç«¯å£å¯¹åº”)â€é‚£ä¸ªå­—æ®µ,ä»–ä»£è¡¨çš„æ˜¯æœ¬æœºæ‰€å¯åŠ¨çš„ç½‘ç»œæœåŠ¡! IPçš„éƒ¨åˆ†è¯´æ˜çš„æ˜¯è¯¥æœåŠ¡ä½äºé‚£ä¸ªæ¥å£ä¸Š,è‹¥ä¸º 127.0.0.1 åˆ™æ˜¯ä»…é’ˆå¯¹æœ¬æœºå¼€æ”¾,è‹¥æ˜¯ 0.0.0.0 æˆ– ::: åˆ™ä»£è¡¨å¯¹æ•´ä¸ª<code>Internet</code>å¼€æ”¾ã€‚ æ¯ä¸ªç«¯å£ (port) éƒ½æœ‰å…¶ç‰¹å®šçš„ç½‘ç»œæœåŠ¡,å‡ ä¸ªå¸¸è§çš„ port ä¸ç›¸å…³ç½‘ç»œæœåŠ¡çš„å…³ç³»æ˜¯:</p><pre><code>80ï¼šwww22:ssh21:ftp25:mail111:RPC(è¿œç«¯ç¨‹åºè°ƒç”¨)631:CUPSï¼ˆæ‰“å°æœåŠ¡åŠŸèƒ½ï¼‰</code></pre><p>å‡è®¾æˆ‘çš„ä¸»æœºæœ‰å…´è¶£è¦ä¾¦æµ‹çš„æ˜¯æ¯”è¾ƒå¸¸è§çš„ port 21, 22, 25åŠ 80 æ—¶,é‚£æˆ‘å¦‚ä½•é€šè¿‡<code>netstat</code>å»ä¾¦æµ‹æˆ‘çš„ä¸»æœºæ˜¯å¦æœ‰æ‰“å¼€è¿™å››ä¸ªä¸»è¦çš„ç½‘ç»œæœåŠ¡ç«¯å£å‘¢?ç”±äºæ¯ä¸ªæœåŠ¡çš„å…³é”®å­—éƒ½æ˜¯æ¥åœ¨å†’å·<code>:</code>åé¢, æ‰€ä»¥å¯ä»¥å€Ÿç”±æå–ç±»ä¼¼<code>:80</code>æ¥ä¾¦æµ‹çš„!é‚£æˆ‘å°±å¯ä»¥ç®€å•çš„è¿™æ ·å»å†™è¿™ä¸ªç¨‹åºå–”:</p><h4 id="4-4-2ã€-åˆ©ç”¨case-esac"><a href="#4-4-2ã€-åˆ©ç”¨case-esac" class="headerlink" title="4.4.2ã€ åˆ©ç”¨case ... esac"></a>4.4.2ã€ åˆ©ç”¨<code>case ... esac</code></h4><p>è¯­æ³•å¦‚ä¸‹ï¼š</p><pre><code>case $å˜é‡åç§° in      &lt;=== å…³é”®å­—ä¸ºcaseã€‚è¿˜æœ‰å˜é‡å‰æœ‰$    &quot;ç¬¬ä¸€ä¸ªå˜é‡å†…å®¹&quot;)   &lt;=== æ¯ä¸ªå˜é‡å†…å®¹å»ºè®®ç”¨åŒå¼•å·æ‹¬èµ·æ¥ï¼Œå…³é”®å­—åˆ™ä¸ºå°æ‹¬å·ï¼‰        ç¨‹åºæ®µ        ;;            &lt;=== æ¯ä¸ªç±»åˆ«ç»“å°¾iä½¿ç”¨ä¸¤ä¸ªè¿ç»­çš„åˆ†å·æ¥å¤„ç†    &quot;ç¬¬äºŒä¸ªå˜é‡å†…å®¹&quot;ï¼‰        ç¨‹åºæ®µ        ;;    *)                &lt;=== æœ€åä¸€ä¸ªå˜é‡å†…å®¹éƒ½ä¼šç”¨*æ¥ä»£è¡¨æ‰€æœ‰å…¶ä»–å€¼        ä¸åŒ…æ‹¬ç¬¬ä¸€ä¸ªå˜é‡å†…å®¹ä¸ç¬¬äºŒä¸ªå˜é‡å†…å®¹çš„å…¶ä»–ç¨‹åºæ‰§è¡Œæ®µ        exit 1        ;;esac                  &lt;=== æœ€ç»ˆçš„caseç»“å°¾ï¼Œâ€œåè¿‡æ¥å†™â€</code></pre><p>è¿™ä¹ˆè¯´æˆ–è®¸ä½ çš„æ„Ÿå—æ€§è¿˜ä¸é«˜,å¥½,æˆ‘ä»¬ç›´æ¥å†™ä¸ªç¨‹åºæ¥ç©ç©:è®©ä½¿ç”¨è€…èƒ½å¤Ÿè¾“å…¥ one, two,three , å¹¶ä¸”å°†ä½¿ç”¨è€…çš„å˜é‡æ˜¾ç¤ºåˆ°å±å¹•ä¸Š,å¦‚æœä¸æ˜¯ one, two, three æ—¶,å°±å‘ŠçŸ¥ä½¿ç”¨è€…ä»…æœ‰è¿™ä¸‰ç§é€‰æ‹©ã€‚<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Program:</span></span><br><span class="line"><span class="comment">#        This script only accepts the flowing parameter: one, two or three.</span></span><br><span class="line"><span class="comment"># History:</span></span><br><span class="line"><span class="comment"># 2018/04/12    heany   Fist release</span></span><br><span class="line">PATH=<span class="regexp">/bin:/sbin</span><span class="symbol">:/usr/bin</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/local/bin</span><span class="symbol">:/usr/local/sbin</span><span class="symbol">:~/bin</span></span><br><span class="line">export PATH</span><br><span class="line"></span><br><span class="line">echo <span class="string">"This program will print your selection !"</span></span><br><span class="line"><span class="comment"># read -p "Input your choice: " choice          # æš‚æ—¶å–æ¶ˆ,å¯ä»¥æ›¿æ¢!</span></span><br><span class="line"><span class="comment"># case $&#123;choice&#125; in                     # æš‚æ—¶å–æ¶ˆ,å¯ä»¥æ›¿æ¢!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$&#123;</span><span class="number">1</span>&#125; <span class="keyword">in</span>            <span class="comment"># ç°åœ¨ä½¿ç”¨,å¯ä»¥ç”¨ä¸Šé¢ä¸¤è¡Œæ›¿æ¢!</span></span><br><span class="line">        <span class="string">"one"</span>)</span><br><span class="line">                echo <span class="string">"Your choice is ONE"</span></span><br><span class="line">                ;;</span><br><span class="line">        <span class="string">"two"</span>)</span><br><span class="line">                echo <span class="string">"Your choice is TWO"</span></span><br><span class="line">                ;;</span><br><span class="line">        <span class="string">"three"</span>)</span><br><span class="line">                echo <span class="string">"Your choice is THREE"</span></span><br><span class="line">                ;;</span><br><span class="line">        *)</span><br><span class="line">                echo <span class="string">"Usage $&#123;0&#125; &#123;one|two|three&#125;"</span></span><br><span class="line">                ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure></p><h4 id="4-4-3ã€-åˆ©ç”¨functionåŠŸèƒ½"><a href="#4-4-3ã€-åˆ©ç”¨functionåŠŸèƒ½" class="headerlink" title="4.4.3ã€ åˆ©ç”¨functionåŠŸèƒ½"></a>4.4.3ã€ åˆ©ç”¨<code>function</code>åŠŸèƒ½</h4><p>ä»€ä¹ˆæ˜¯â€œå‡½æ•° (function)â€åŠŸèƒ½å•Š?ç®€å•çš„è¯´,å…¶å®, å‡½æ•°å¯ä»¥åœ¨ shell script å½“ä¸­åšå‡ºä¸€ä¸ªç±»ä¼¼è‡ªè®¢æ‰§è¡ŒæŒ‡ä»¤çš„ä¸œè¥¿,æœ€å¤§çš„åŠŸèƒ½æ˜¯, å¯ä»¥ç®€åŒ–æˆ‘ä»¬å¾ˆå¤šçš„ç¨‹åºç ~ä¸¾ä¾‹æ¥è¯´,ä¸Šé¢çš„show123.sh å½“ä¸­,æ¯ä¸ªè¾“å…¥ç»“æœ one, two, three å…¶å®è¾“å‡ºçš„å†…å®¹éƒ½ä¸€æ ·å•Š~é‚£ä¹ˆæˆ‘å°±å¯ä»¥ä½¿ç”¨ function æ¥ç®€åŒ–äº†! function çš„è¯­æ³•æ˜¯è¿™æ ·çš„:</p><pre><code>function fname(){    ç¨‹åºæ®µ}</code></pre><blockquote><p>  ç”±äº<code>shell script</code>çš„æ‰§è¡Œæ–¹å¼æ˜¯ç”±ä¸Šè€Œä¸‹,ç”±å·¦è€Œå³, å› æ­¤åœ¨<code>shell script</code>å½“ä¸­çš„<b style="color: red"><code>function</code>çš„è®¾ç½®ä¸€å®šè¦åœ¨ç¨‹åºçš„æœ€å‰é¢</b>, è¿™æ ·æ‰èƒ½å¤Ÿåœ¨æ‰§è¡Œæ—¶è¢«æ‰¾åˆ°å¯ç”¨çš„ç¨‹åºæ®µå–”(è¿™ä¸€ç‚¹ä¸ä¼ ç»Ÿç¨‹åºè¯­è¨€å·®å¼‚ç›¸å½“å¤§!åˆæ¬¡æ¥è§¦çš„æœ‹å‹è¦å°å¿ƒ!)! å¥½~æˆ‘ä»¬å°†ä¸Šé¢çš„è„šæœ¬æ”¹å†™<br>ä¸€ä¸‹,è‡ªå®šä¹‰ä¸€ä¸ªåä¸º<code>printit</code>çš„å‡½æ•°æ¥ä½¿ç”¨:</p></blockquote><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># History:</span></span><br><span class="line"><span class="comment"># 2018/04/12    heany   First release</span></span><br><span class="line"></span><br><span class="line">PATH=<span class="regexp">/bin:/sbin</span><span class="symbol">:/usr/bin</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/local/bin</span><span class="symbol">:/usr/local/sbin</span><span class="symbol">:~/bin</span></span><br><span class="line">export PATH</span><br><span class="line"></span><br><span class="line">function printit()&#123;</span><br><span class="line">        echo -n <span class="string">"Your choice is "</span>     <span class="comment"># åŠ ä¸Š -n å¯ä»¥ä¸æ¢è¡Œç»§ç»­åœ¨åŒä¸€è¡Œæ˜¾ç¤º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">echo <span class="string">"This program will print your selection !"</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$&#123;</span><span class="number">1</span>&#125; <span class="keyword">in</span></span><br><span class="line">        <span class="string">"one"</span>)</span><br><span class="line">                printit; echo <span class="variable">$1</span> | tr <span class="string">'a-z'</span> <span class="string">'A-Z'</span>  <span class="comment"># å°†å‚æ•°åšå¤§å°å†™è½¬æ¢!</span></span><br><span class="line">                ;;</span><br><span class="line">        <span class="string">"two"</span>)</span><br><span class="line">                printit; echo <span class="variable">$1</span> | tr <span class="string">'a-z'</span> <span class="string">'A-Z'</span></span><br><span class="line">                ;;</span><br><span class="line">        <span class="string">"three"</span>)</span><br><span class="line">                printit; echo <span class="variable">$1</span> | tr <span class="string">'a-z'</span> <span class="string">'A-Z'</span></span><br><span class="line">                ;;</span><br><span class="line">        *)      </span><br><span class="line">                echo <span class="string">"Usage $&#123;0&#125; &#123;one|two|three&#125;"</span></span><br><span class="line"><span class="string">"show123_function.sh"</span> <span class="number">29</span>L, <span class="number">591</span>C written                       <span class="number">11</span>,<span class="number">53</span>-<span class="number">55</span>      <span class="number">50</span>%</span><br></pre></td></tr></table></figure><h3 id="4-5ã€-å¾ªç¯ï¼ˆloopï¼‰"><a href="#4-5ã€-å¾ªç¯ï¼ˆloopï¼‰" class="headerlink" title="4.5ã€ å¾ªç¯ï¼ˆloopï¼‰"></a>4.5ã€ å¾ªç¯ï¼ˆ<code>loop</code>ï¼‰</h3><p>é™¤äº† ifâ€¦thenâ€¦fi è¿™ç§æ¡ä»¶åˆ¤æ–­å¼ä¹‹å¤–,å¾ªç¯å¯èƒ½æ˜¯ç¨‹åºå½“ä¸­æœ€é‡è¦çš„ä¸€ç¯äº†~ å¾ªç¯å¯ä»¥ä¸æ–­çš„æ‰§è¡ŒæŸä¸ªç¨‹åºæ®µè½,ç›´åˆ°ä½¿ç”¨è€…è®¾ç½®çš„æ¡ä»¶è¾¾æˆä¸ºæ­¢ã€‚æ‰€ä»¥,é‡ç‚¹æ˜¯é‚£ä¸ªâ€œæ¡ä»¶çš„è¾¾æˆâ€æ˜¯ä»€ä¹ˆã€‚é™¤äº†è¿™ç§ä¾æ®åˆ¤æ–­å¼è¾¾æˆä¸å¦çš„ä¸å®šå¾ªç¯ä¹‹å¤–,å¾ªç¯å½¢æ€,å¯ç§°ä¸ºå›ºå®šå¾ªç¯çš„å½¢æ€å‘¢!ä¸‹é¢æˆ‘ä»¬å°±æ¥è°ˆä¸€è°ˆ:</p><h4 id="4-5-1ã€-while-do-done-until-do-doneï¼ˆä¸å®šå¾ªç¯ï¼‰"><a href="#4-5-1ã€-while-do-done-until-do-doneï¼ˆä¸å®šå¾ªç¯ï¼‰" class="headerlink" title="4.5.1ã€ while do done,until do doneï¼ˆä¸å®šå¾ªç¯ï¼‰"></a>4.5.1ã€ <code>while do done</code>,<code>until do done</code>ï¼ˆä¸å®šå¾ªç¯ï¼‰</h4><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸å®šå¾ªç¯æœ€å¸¸è§çš„å°±æ˜¯ä¸‹é¢è¿™ä¸¤ç§çŠ¶æ€äº†ï¼š</p><pre><code>while [ condition ] &lt;=== ä¸­æ‹¬å·å†…çš„çŠ¶æ€å°±æ˜¯åˆ¤åˆ«å¼do    ä»£ç æ®µdone</code></pre><p><code>while</code>çš„ä¸­æ–‡æ˜¯â€œå½“â€¦æ—¶â€ï¼Œæ‰€ä»¥ï¼Œè¿™ç§æ–¹å¼è¯´çš„æ˜¯å½“<code>condition</code>æ¡ä»¶æˆç«‹æ—¶ï¼Œå°±è¿›è¡Œå¾ªç¯ï¼Œç›´åˆ°<code>condition</code>çš„æ¡ä»¶ä¸æˆç«‹æ‰åœæ­¢çš„æ„æ€ã€‚è¿˜æœ‰å¦ä¸ºä¸€ç§ä¸å®šå¾ªç¯çš„æ–¹å¼ï¼š</p><pre><code>until [ condition ]do    ä»£ç æ®µdone</code></pre><p>è¿™ç§æ–¹å¼æ°æ°ä¸ while ç›¸å,å®ƒè¯´çš„æ˜¯â€œå½“ condition æ¡ä»¶æˆç«‹æ—¶,å°±ç»ˆæ­¢å¾ªç¯, å¦åˆ™å°±æŒç»­<br>è¿›è¡Œå¾ªç¯çš„ç¨‹åºæ®µã€‚â€æ˜¯å¦åˆšå¥½ç›¸åå•Š~æˆ‘ä»¬ä»¥ while æ¥åšä¸ªç®€å•çš„ç»ƒä¹ å¥½äº†ã€‚ å‡è®¾æˆ‘è¦è®©ä½¿<br>ç”¨è€…è¾“å…¥ yes æˆ–è€…æ˜¯ YES æ‰ç»“æŸç¨‹åºçš„æ‰§è¡Œ,å¦åˆ™å°±ä¸€ç›´è¿›è¡Œå‘ŠçŸ¥ä½¿ç”¨è€…è¾“å…¥å­—ä¸²ã€‚<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Program:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       Repeat question until user input correct answer.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> History:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2018/04/12    leagle  First release</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">while</span></span></span><br><span class="line">while [ "$yn" != "yes" -a "$yn" != "YES" ] </span><br><span class="line">do</span><br><span class="line">        read -p "Please input yes/YES to stop this program: " yn</span><br><span class="line">done    </span><br><span class="line">echo "OK! you input the correct answer."</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> until</span></span><br><span class="line">until [ "$yn" == "yes" -o "$yn" == "YES" ] </span><br><span class="line">do</span><br><span class="line">        read -p "Please input yes/YES to stop this program: " yn</span><br><span class="line">done</span><br><span class="line">echo "OK! you input the correct answer."</span><br></pre></td></tr></table></figure></p><h4 id="4-5-2ã€-for-do-done-å›ºå®šå¾ªç¯"><a href="#4-5-2ã€-for-do-done-å›ºå®šå¾ªç¯" class="headerlink" title="4.5.2ã€ for ... do ...done(å›ºå®šå¾ªç¯)"></a>4.5.2ã€ <code>for ... do ...done</code>(å›ºå®šå¾ªç¯)</h4><p><code>for</code>å¾ªç¯çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>for var in con1 con2 con3 ...do    codedone</code></pre><p>ç®€å•ç»ƒä¹ ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Program:</span></span><br><span class="line"><span class="comment">#       Using for ... loop to print 3 animal.</span></span><br><span class="line"><span class="comment"># History:</span></span><br><span class="line"><span class="comment"># 2018/04/12    leagle  First release</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> animal <span class="keyword">in</span> dog cat elephant</span><br><span class="line"><span class="keyword">do</span>      </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"There are <span class="variable">$&#123;animal&#125;</span>s ...."</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><p>è®©æˆ‘ä»¬æƒ³åƒå¦å¤–ä¸€ç§çŠ¶å†µ,ç”±äºç³»ç»Ÿä¸Šé¢çš„å„ç§å¸å·éƒ½æ˜¯å†™åœ¨ /etc/passwd å†…çš„ç¬¬ä¸€ä¸ªå­—æ®µ,ä½ èƒ½ä¸èƒ½é€šè¿‡ç®¡çº¿å‘½ä»¤çš„ cut æ‰å‡ºå•çº¯çš„å¸å·åç§°å,ä»¥<code>id</code>åˆ†åˆ«æ£€æŸ¥ä½¿ç”¨è€…çš„è¯†åˆ«ç ä¸ç‰¹æ®Šå‚æ•°å‘¢?ç”±äºä¸åŒçš„ Linux ç³»ç»Ÿä¸Šé¢çš„å¸å·éƒ½ä¸ä¸€æ ·!æ­¤æ—¶å®é™…å»æ‰<code>/etc/passwd</code>å¹¶ä½¿ç”¨å¾ªç¯å¤„ç†,å°±æ˜¯ä¸€ä¸ªå¯è¡Œçš„æ–¹æ¡ˆäº†!ç¨‹åºå¯ä»¥å¦‚ä¸‹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Program:</span></span><br><span class="line"><span class="comment">#       Use id, finger command to check system account's information.</span></span><br><span class="line"><span class="comment"># History:</span></span><br><span class="line"><span class="comment"># 2018/04/12    leagle  First release</span></span><br><span class="line"></span><br><span class="line">users=$(cut -d <span class="string">':'</span> -f1 ./pd.txt)         <span class="comment"># æè·å¸å·åç§°</span></span><br><span class="line"><span class="keyword">for</span> username <span class="keyword">in</span> <span class="variable">$&#123;users&#125;</span>        <span class="comment"># å¼€å§‹å¾ªç¯è¿›è¡Œ!</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        id <span class="variable">$&#123;username&#125;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œä¸Šé¢çš„è„šæœ¬å,ä½ çš„ç³»ç»Ÿå¸å·å°±ä¼šè¢«æ‰å‡ºæ¥æ£€æŸ¥å•¦!è¿™ä¸ªåŠ¨ä½œè¿˜å¯ä»¥ç”¨åœ¨æ¯ä¸ªå¸å·çš„åˆ é™¤ã€é‡æ•´ä¸Šé¢å‘¢! æ¢ä¸ªè§’åº¦æ¥çœ‹,å¦‚æœæˆ‘ç°åœ¨éœ€è¦ä¸€è¿ä¸²çš„æ•°å­—æ¥è¿›è¡Œå¾ªç¯å‘¢?ä¸¾ä¾‹æ¥è¯´,æˆ‘æƒ³è¦åˆ©ç”¨ ping è¿™ä¸ªå¯ä»¥åˆ¤æ–­ç½‘ç»œçŠ¶æ€çš„æŒ‡ä»¤, æ¥è¿›è¡Œç½‘ç»œçŠ¶æ€çš„å®é™…ä¾¦æµ‹æ—¶,æˆ‘æƒ³è¦ä¾¦æµ‹çš„ç½‘åŸŸæ˜¯æœ¬æœºæ‰€åœ¨çš„ 192.168.1.1~192.168.1.100,ç”±äºæœ‰ 100 å°ä¸»æœº, æ€»ä¸ä¼šè¦æˆ‘åœ¨ for åé¢è¾“å…¥ 1 åˆ° 100 å§?æ­¤æ—¶ä½ å¯ä»¥è¿™æ ·åšå–”!<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Program:</span></span><br><span class="line"><span class="comment">#       Use ping command to check the network's PC state.</span></span><br><span class="line"><span class="comment"># History:</span></span><br><span class="line"><span class="comment"># 2018/04/12    leagle  First release</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">network</span>=<span class="string">"192.168.1"</span>     # å…ˆå®šä¹‰ä¸€ä¸ªç½‘åŸŸçš„å‰é¢éƒ¨åˆ†!</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> sitenu <span class="keyword">in</span> $(seq 1 100)        # seq ä¸º sequence(è¿ç»­) çš„ç¼©å†™ä¹‹æ„</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        # ä¸‹é¢çš„ç¨‹åºåœ¨å–å¾—<span class="built_in"> ping </span>çš„å›ä¼ å€¼æ˜¯æ­£ç¡®çš„è¿˜æ˜¯å¤±è´¥çš„!</span><br><span class="line">       <span class="built_in"> ping </span>-c 1 -w 1 <span class="variable">$&#123;network&#125;</span>.<span class="variable">$&#123;sitenu&#125;</span> &amp;&gt; /dev/<span class="literal">null</span> &amp;&amp; <span class="attribute">result</span>=0 || <span class="attribute">result</span>=1</span><br><span class="line"></span><br><span class="line">        # å¼€å§‹æ˜¾ç¤ºç»“æœæ˜¯æ­£ç¡®çš„å¯åŠ¨ (UP) è¿˜æ˜¯é”™è¯¯çš„æ²¡æœ‰è¿é€š (DOWN)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">"<span class="variable">$&#123;result&#125;</span>"</span> == 0 ]; then</span><br><span class="line">                echo <span class="string">"Server <span class="variable">$&#123;network&#125;</span>.<span class="variable">$&#123;sitenu&#125;</span> is UP."</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                echo <span class="string">"Server <span class="variable">$&#123;network&#125;</span>.<span class="variable">$&#123;sitenu&#125;</span> is DOWN."</span></span><br><span class="line">        fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p><blockquote><p> æ³¨æ„é‚£ä¸ª<code>$(seq 1 100)</code>é‚£ä¸ªä½ç½®ï¼Œé‚£ä¸ªæ˜¯è¿ç»­äº§ç”Ÿ1-100ä¸ªæ•°ã€‚</p></blockquote><p>æœ€å,è®©æˆ‘ä»¬æ¥ç©åˆ¤æ–­å¼åŠ ä¸Šå¾ªç¯çš„åŠŸèƒ½!æˆ‘æƒ³è¦è®©ä½¿ç”¨è€…è¾“å…¥æŸä¸ªç›®å½•æ–‡ä»¶å,ç„¶åæˆ‘æ‰¾å‡ºæŸç›®å½•å†…çš„æ–‡ä»¶åçš„æƒé™,è¯¥å¦‚ä½•æ˜¯å¥½?å¯ä»¥è¿™æ ·åšå•¦~<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Program:</span></span><br><span class="line"><span class="comment">#       Use input dir name, I find the permission of files.</span></span><br><span class="line"><span class="comment"># History:</span></span><br><span class="line"><span class="comment"># 2018/04/12    leagle  First release</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. å…ˆçœ‹çœ‹è¿™ä¸ªç›®å½•æ˜¯å¦å­˜åœ¨å•Š?</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please input a directory: "</span> dir</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$&#123;dir&#125;</span>"</span> == <span class="string">""</span> -o ! -d <span class="string">"<span class="variable">$&#123;dir&#125;</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The <span class="variable">$&#123;dir&#125;</span> is NOT exist in your system."</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å¼€å§‹æµ‹è¯•æ–‡ä»¶~</span></span><br><span class="line">filelist=$(ls <span class="variable">$&#123;dir&#125;</span>)   <span class="comment"># åˆ—å‡ºæ‰€æœ‰åœ¨è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶åç§°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> filename <span class="keyword">in</span> <span class="variable">$&#123;filelist&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        perm=<span class="string">""</span></span><br><span class="line">        <span class="built_in">test</span> -r <span class="string">"<span class="variable">$&#123;dir&#125;</span>/<span class="variable">$&#123;filename&#125;</span>"</span> &amp;&amp; perm=<span class="string">"<span class="variable">$&#123;perm&#125;</span> readable"</span></span><br><span class="line">        <span class="built_in">test</span> -w <span class="string">"<span class="variable">$&#123;dir&#125;</span>/<span class="variable">$&#123;filename&#125;</span>"</span> &amp;&amp; perm=<span class="string">"<span class="variable">$&#123;perm&#125;</span> writable"</span></span><br><span class="line">        <span class="built_in">test</span> -x <span class="string">"<span class="variable">$&#123;dir&#125;</span>/<span class="variable">$&#123;filename&#125;</span>"</span> &amp;&amp; perm=<span class="string">"<span class="variable">$&#123;perm&#125;</span> executable"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The file <span class="variable">$&#123;dir&#125;</span>/<span class="variable">$&#123;filename&#125;</span>'s permission is <span class="variable">$&#123;perm&#125;</span> "</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><h4 id="4-5-3-for-do-doneçš„æ•°å€¼å¤„ç†"><a href="#4-5-3-for-do-doneçš„æ•°å€¼å¤„ç†" class="headerlink" title="4.5.3 for ... do ...doneçš„æ•°å€¼å¤„ç†"></a>4.5.3 <code>for ... do ...done</code>çš„æ•°å€¼å¤„ç†</h4><p>é™¤äº†ä¸Šè¿°çš„æ–¹æ³•ä¹‹å¤–ï¼Œ<code>for</code>å¾ªç¯è¿˜æœ‰å¦å¤–ä¸€ç§å†™æ³•ï¼Œç±»ä¼¼äº<code>Cè¯­è¨€</code>ä¸­çš„<code>forå¾ªç¯</code>ï¼è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>for ((åˆå§‹å€¼;é™åˆ¶å€¼;æ‰§è¡Œæ­¥é•¿))do    codedone</code></pre><p>è¿™ç§è¯­æ³•å¾ˆé€‚åˆç”¨äºæ•°å€¼æ–¹å¼çš„è¿ç®—å½“ä¸­ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯,åœ¨â€œæ‰§è¡Œæ­¥é˜¶â€çš„è®¾ç½®ä¸Š,å¦‚æœæ¯æ¬¡å¢åŠ  1 ,åˆ™å¯ä»¥ä½¿ç”¨ç±»ä¼¼<code>i++</code>çš„æ–¹å¼,äº¦å³æ˜¯ i æ¯æ¬¡å¾ªç¯éƒ½ä¼šå¢åŠ ä¸€çš„æ„æ€ã€‚å¥½,æˆ‘ä»¬ä»¥è¿™ç§æ–¹å¼æ¥è¿›è¡Œ 1 ç´¯åŠ åˆ°ä½¿ç”¨è€…è¾“å…¥çš„å¾ªç¯å§!<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Program:</span></span><br><span class="line"><span class="comment">#       Try to calculate "1+2+3+...+$&#123;yourinput&#125;".</span></span><br><span class="line"><span class="comment"># History:</span></span><br><span class="line"><span class="comment"># 2018/04/12    leagle  First release</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please input a number, I will count for 1+2+...+your_input: "</span> nu</span><br><span class="line"></span><br><span class="line">s=0</span><br><span class="line"><span class="keyword">for</span> (( i=1; i&lt;=<span class="variable">$nu</span>; i=i+1))</span><br><span class="line"><span class="keyword">do</span>      </span><br><span class="line">        s=$((<span class="variable">$s</span>+<span class="variable">$i</span>))</span><br><span class="line"><span class="keyword">done</span>    </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The result of '1+2+...+<span class="variable">$nu</span>' is ===&gt; <span class="variable">$s</span>"</span></span><br></pre></td></tr></table></figure></p><h3 id="4-6ã€-Shell-Scriptçš„è¿½è¸ªä¸Debug"><a href="#4-6ã€-Shell-Scriptçš„è¿½è¸ªä¸Debug" class="headerlink" title="4.6ã€ Shell Scriptçš„è¿½è¸ªä¸Debug"></a>4.6ã€ <code>Shell Script</code>çš„è¿½è¸ªä¸<code>Debug</code></h3><p><code>scripts</code>åœ¨æ‰§è¡Œä¹‹å‰,æœ€æ€•çš„å°±æ˜¯å‡ºç°è¯­æ³•é”™è¯¯çš„é—®é¢˜äº†!é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•<code>debug</code> å‘¢?æœ‰æ²¡æœ‰åŠæ³•ä¸éœ€è¦é€šè¿‡ç›´æ¥æ‰§è¡Œè¯¥<code>scripts</code>å°±å¯ä»¥æ¥åˆ¤æ–­æ˜¯å¦æœ‰é—®é¢˜å‘¢?å‘µå‘µ!å½“ç„¶æ˜¯æœ‰çš„!æˆ‘ä»¬å°±ç›´æ¥ä»¥ bash çš„ç›¸å…³å‚æ•°æ¥è¿›è¡Œåˆ¤æ–­å§!</p><pre><code># è¯­æ³•å¦‚ä¸‹ï¼šsh [-nvx] scripts.sh# paras:-n ï¼šä¸è¦æ‰§è¡Œscriptï¼Œä»…æŸ¥è¯¢è¯­æ³•çš„é—®é¢˜;-v ï¼šåœ¨æ‰§è¡Œscriptä¹‹å‰ï¼Œå…ˆå°†scriptsçš„å†…å®¹è¾“å‡ºåˆ°å±å¹•ä¸Š;-x ï¼šå°†ä½¿ç”¨åˆ°çš„scriptå†…å®¹æ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œè¿™æ˜¯å¾ˆæœ‰ç”¨çš„å‚æ•°ï¼</code></pre><p>ä¸€äº›èŒƒä¾‹æµ‹è¯•ï¼š<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bash -x ans_yn-<span class="number">2</span>.sh </span><br><span class="line">+ PATH=<span class="regexp">/bin:/sbin</span><span class="symbol">:/usr/bin</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/local/bin</span><span class="symbol">:/usr/local/sbin</span><span class="symbol">:/home/heany/bin</span></span><br><span class="line">+ export PATH</span><br><span class="line">+ read -p <span class="string">'Please input (Y/N): '</span> yn</span><br><span class="line">Please input (Y/N): y</span><br><span class="line">+ <span class="string">'['</span> y == Y <span class="string">']'</span></span><br><span class="line">+ <span class="string">'['</span> y == y <span class="string">']'</span></span><br><span class="line">+ echo <span class="string">'OK, continue.'</span></span><br><span class="line">OK, continue.</span><br><span class="line">+ exit <span class="number">0</span></span><br></pre></td></tr></table></figure></p><h2 id="äº”ã€-ç»“æŸè¯­"><a href="#äº”ã€-ç»“æŸè¯­" class="headerlink" title="äº”ã€ ç»“æŸè¯­"></a>äº”ã€ ç»“æŸè¯­</h2><p>&emsp;&emsp;è¿™ä¸ªç³»åˆ—ç»ˆäºç»“æŸäº†ï¼Œç å­—è°ƒbugå¾ˆè¾›è‹¦å“‡ï½ä½†æ˜¯ä»ä¸­å­¦åˆ°äº†å¾ˆå¤šæœ‰ç”¨çš„çŸ¥è¯†ï¼Œè§£å†³äº†ä¹‹å‰å¾ˆå¤šæä¸æ¸…æ¥šçš„é—®é¢˜ï¼Œæ€»ä¹‹å¾ˆæ£’å•¦ï¼æœ¬æ–‡è½¬è½½è‡ª<b>é¸Ÿå“¥çš„Linuxç§æˆ¿èœï¼šåŸºç¡€å­¦ä¹ ç¯‡ ç¬¬å››ç‰ˆ</b>ã€‚æ€»ä¹‹è¿™æœ¬ä¹¦éå¸¸é€‚åˆå…¥é—¨å­¦ä¹ ï½å¼ºçƒˆæ¨èï¼ï¼ï¼</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä¸€ã€-å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€ å‰è¨€&lt;/h2&gt;&lt;p&gt;æœ€è¿‘å¼€å§‹ä½¿ç”¨Linuxç³»ç»Ÿï¼Œç»å¸¸æ“ä½œterminalï¼Œç»å¸¸ä½¿ç”¨Linuxä¸‹çš„bashæ¥è¿›è¡Œä¸€äº›é‡å¤çš„æ“ä½œï¼Œå› æ­¤æƒ³å­¦ä¹ 
      
    
    </summary>
    
      <category term="Script" scheme="http://heany.github.io/categories/Script/"/>
    
    
      <category term="Shell linux" scheme="http://heany.github.io/tags/Shell-linux/"/>
    
  </entry>
  
  <entry>
    <title>hexoå¸¸ç”¨å‘½ä»¤</title>
    <link href="http://heany.github.io/2017/10/28/hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>http://heany.github.io/2017/10/28/hexoå¸¸ç”¨å‘½ä»¤/</id>
    <published>2017-10-28T06:18:08.000Z</published>
    <updated>2019-01-26T14:47:30.578Z</updated>
    
    <content type="html"><![CDATA[<p>ç°åœ¨æ¥ä»‹ç»å¸¸ç”¨çš„Hexo å‘½ä»¤</p><pre><code>npm install hexo -g #å®‰è£…Hexonpm update hexo -g #å‡çº§ hexo init #åˆå§‹åŒ–åšå®¢</code></pre><p>å‘½ä»¤ç®€å†™</p><pre><code>hexo n &quot;æˆ‘çš„åšå®¢&quot; == hexo new &quot;æˆ‘çš„åšå®¢&quot; #æ–°å»ºæ–‡ç« hexo g == hexo generate #ç”Ÿæˆhexo s == hexo server #å¯åŠ¨æœåŠ¡é¢„è§ˆhexo d == hexo deploy #éƒ¨ç½²hexo server #Hexoä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ— é¡»é‡å¯æœåŠ¡å™¨hexo server -s #é™æ€æ¨¡å¼hexo server -p 5000 #æ›´æ”¹ç«¯å£hexo server -i 192.168.1.1 #è‡ªå®šä¹‰ IPhexo clean #æ¸…é™¤ç¼“å­˜ï¼Œè‹¥æ˜¯ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥è¿™æ¡å‘½ä»¤</code></pre><blockquote><p> åšå®¢æ­å»ºå¥½ä»¥åï¼Œå‘è¡¨æ–‡ç« æ­¥éª¤åŠå‘½ä»¤</p></blockquote><blockquote><ul><li>step1ï¼šåˆ‡æ¢åˆ°å·¥ä½œç›®å½•ï¼Œæ‰§è¡Œ<code>hexo n &quot;æ–‡ç« çš„title&quot;</code> , ç„¶åçœ‹åˆ°<code>source/_posts</code>ä¼šå‡ºç°åˆšåˆšæ–°å»ºçš„<code>æ–‡ç« çš„title.md</code></li><li>step2ï¼šè¿›å»ç¼–è¾‘åˆšåˆšç”Ÿæˆçš„mdæ–‡ä»¶</li><li>step3ï¼šæ‰§è¡Œå‘½ä»¤<code>hexo clean</code></li><li>step4: æ‰§è¡Œå‘½ä»¤<code>hexo g</code></li><li>step5: æ‰§è¡Œå‘½ä»¤<code>hexo d</code>ç­‰å¾…ä¸€ä¼šå°±èƒ½çœ‹åˆ°åšå®¢ä¸»é¡µå‡ºç°äº†åˆšåˆšç¼–å†™çš„æ–‡ç« </li></ul></blockquote><p>å¸è½½hexoï¼š</p><pre><code>npm uninstall hexo-cli -g #3.0.0ç‰ˆæœ¬æ‰§è¡Œnpm uninstall hexo -g # ä¹‹å‰ç‰ˆæœ¬æ‰§è¡Œ</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç°åœ¨æ¥ä»‹ç»å¸¸ç”¨çš„Hexo å‘½ä»¤&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install hexo -g #å®‰è£…Hexo
npm update hexo -g #å‡çº§ 
hexo init #åˆå§‹åŒ–åšå®¢
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‘½ä»¤ç®€å†™&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;h
      
    
    </summary>
    
      <category term="Website" scheme="http://heany.github.io/categories/Website/"/>
    
    
      <category term="hexoå¸¸ç”¨å‘½ä»¤" scheme="http://heany.github.io/tags/hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•æ‰¹é‡åˆ é™¤å¾®åš</title>
    <link href="http://heany.github.io/2017/10/28/%E5%A6%82%E4%BD%95%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E5%BE%AE%E5%8D%9A/"/>
    <id>http://heany.github.io/2017/10/28/å¦‚ä½•æ‰¹é‡åˆ é™¤å¾®åš/</id>
    <published>2017-10-28T05:44:52.000Z</published>
    <updated>2019-01-26T14:47:30.579Z</updated>
    
    <content type="html"><![CDATA[<!-->æœ€è¿‘æƒ³åˆ æ‰è‡ªå·±çš„æ‰€æœ‰å¾®åšï¼Œå¯æ˜¯å¾®åšå®˜æ–¹å¹¶æ²¡æœ‰ç›¸å…³çš„åŠŸèƒ½ï¼Œç½‘ä¸Šä¹Ÿæœ‰ä¸€äº›å·¥å…·èƒ½å¤Ÿå®ç°ï¼Œä½†æ˜¯éƒ½æ”¶è´¹ã€‚æ‰€ä»¥æˆ‘æœäº†ä¸€äº›æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•ï¼Œæ¥å®ç°åˆ é™¤æ‰€æœ‰å¾®åšã€‚<a id="more"></a><blockquote><p> step1: æ‰“å¼€Chromeï¼Œæ–°å¼€ä¸€ä¸ªæ ‡ç­¾é¡µï¼Œè¿›å…¥æˆ‘çš„å¾®åšâ€œæˆ‘çš„é¦–é¡µâ€</p></blockquote><blockquote><p> step2ï¼šæ‰“å¼€Chromeçš„å¼€å‘è€…å·¥å…·ï¼ˆæŒ‰F12ï¼‰</p></blockquote><blockquote><p> step3: ç‚¹å‡»consoleï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œå°†ä¸‹é¢çš„ä»£ç è´´è¿›å»ï¼Œå›è½¦è¿è¡Œ</p></blockquote><p><img src="http://static.zybuluo.com/Heany/ab4akric80zrgsp8bypxtnk3/weibo1.png" alt="æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œç‚¹å‡»console"></p><p><strong>å°†ä¸‹é¢çš„ä»£ç è´´è¿‘è¿›consoleé‡Œ</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         Weibored.js</span></span><br><span class="line"><span class="comment">// @namespace    http://vito.sdf.org</span></span><br><span class="line"><span class="comment">// @version      0.2.0</span></span><br><span class="line"><span class="comment">// @description  åˆ é™¤æ‰€æœ‰å¾®åš</span></span><br><span class="line"><span class="comment">// @match        http://weibo.com/p/*</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">s.setAttribute(</span><br><span class="line">  <span class="string">'src'</span>,</span><br><span class="line">  <span class="string">'https://lib.sinaapp.com/js/jquery/2.0.3/jquery-2.0.3.min.js'</span></span><br><span class="line">);</span><br><span class="line">s.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!$(<span class="string">'a[action-type="feed_list_delete"]'</span>)) &#123;</span><br><span class="line">      $(<span class="string">'a.next'</span>).click();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      $(<span class="string">'a[action-type="feed_list_delete"]'</span>)[<span class="number">0</span>].click();</span><br><span class="line">      $(<span class="string">'a[action-type="ok"]'</span>)[<span class="number">0</span>].click();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// scroll bottom let auto load</span></span><br><span class="line">    $(<span class="string">'html, body'</span>).animate(&#123; <span class="attr">scrollTop</span>: $(<span class="built_in">document</span>).height() &#125;, <span class="string">'slow'</span>);</span><br><span class="line">  &#125;, <span class="number">800</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">document</span>.head.appendChild(s);</span><br></pre></td></tr></table></figure></p><p><img src="http://static.zybuluo.com/Heany/1ix1xrp45l4k28c2yiv9k28n/weibo2.png" alt="è´´ä»£ç "></p><p><strong>å›è½¦è¿è¡Œ</strong><br><img src="http://static.zybuluo.com/Heany/7lg9wxch0itn7e3vbga54b98/weibo3.png" alt="å›è½¦è¿è¡Œ"></p><p><strong>æ­¤æ—¶èƒ½å¤Ÿçœ‹åˆ°å¾®åšä¸»é¡µå¼€å§‹æ»šåŠ¨</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;!--&gt;
æœ€è¿‘æƒ³åˆ æ‰è‡ªå·±çš„æ‰€æœ‰å¾®åšï¼Œå¯æ˜¯å¾®åšå®˜æ–¹å¹¶æ²¡æœ‰ç›¸å…³çš„åŠŸèƒ½ï¼Œç½‘ä¸Šä¹Ÿæœ‰ä¸€äº›å·¥å…·èƒ½å¤Ÿå®ç°ï¼Œä½†æ˜¯éƒ½æ”¶è´¹ã€‚æ‰€ä»¥æˆ‘æœäº†ä¸€äº›æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•ï¼Œæ¥å®ç°åˆ é™¤æ‰€æœ‰å¾®åšã€‚
    
    </summary>
    
      <category term="å…¶ä»–" scheme="http://heany.github.io/categories/%E5%85%B6%E4%BB%96/"/>
    
    
  </entry>
  
  <entry>
    <title>sublimeæ’ä»¶ï¼šMarkdown</title>
    <link href="http://heany.github.io/2017/10/15/sublime%E6%8F%92%E4%BB%B6%EF%BC%9AMarkdown/"/>
    <id>http://heany.github.io/2017/10/15/sublimeæ’ä»¶ï¼šMarkdown/</id>
    <published>2017-10-15T13:30:12.000Z</published>
    <updated>2019-01-26T14:47:30.579Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-MarkDown-Editingï¼šæ”¯æŒMarkdownè¯­æ³•é«˜äº®ï¼›æ”¯æŒGithub-Favored-Markdownè¯­æ³•ï¼›è‡ªå¸¦3ä¸ªä¸»é¢˜"><a href="#1-MarkDown-Editingï¼šæ”¯æŒMarkdownè¯­æ³•é«˜äº®ï¼›æ”¯æŒGithub-Favored-Markdownè¯­æ³•ï¼›è‡ªå¸¦3ä¸ªä¸»é¢˜" class="headerlink" title="1.MarkDown Editingï¼šæ”¯æŒMarkdownè¯­æ³•é«˜äº®ï¼›æ”¯æŒGithub Favored Markdownè¯­æ³•ï¼›è‡ªå¸¦3ä¸ªä¸»é¢˜"></a>1.<a href="https://github.com/SublimeText-Markdown/MarkdownEditing" target="_blank" rel="noopener">MarkDown Editing</a>ï¼šæ”¯æŒMarkdownè¯­æ³•é«˜äº®ï¼›æ”¯æŒGithub Favored Markdownè¯­æ³•ï¼›è‡ªå¸¦3ä¸ªä¸»é¢˜</h3><a id="more"></a><h3 id="2-MarkdownPreviewï¼šæŒ‰CTRL-Bç”Ÿæˆç½‘é¡µHTMLï¼›åœ¨æœ€å‰é¢æ·»åŠ -TOC-è‡ªåŠ¨ç”Ÿæˆç›®å½•ï¼›"><a href="#2-MarkdownPreviewï¼šæŒ‰CTRL-Bç”Ÿæˆç½‘é¡µHTMLï¼›åœ¨æœ€å‰é¢æ·»åŠ -TOC-è‡ªåŠ¨ç”Ÿæˆç›®å½•ï¼›" class="headerlink" title="2.MarkdownPreviewï¼šæŒ‰CTRL + Bç”Ÿæˆç½‘é¡µHTMLï¼›åœ¨æœ€å‰é¢æ·»åŠ [TOC]è‡ªåŠ¨ç”Ÿæˆç›®å½•ï¼›"></a>2.<a href="https://github.com/revolunet/sublimetext-markdown-preview" target="_blank" rel="noopener">MarkdownPreview</a>ï¼šæŒ‰<code>CTRL + B</code>ç”Ÿæˆç½‘é¡µHTMLï¼›åœ¨æœ€å‰é¢æ·»åŠ [TOC]è‡ªåŠ¨ç”Ÿæˆç›®å½•ï¼›</h3><h3 id="3-Markdown-Extended-Extends-Mononokaiï¼šä¸é”™çš„Markdownä¸»é¢˜ï¼Œæ”¯æŒå¯¹å¤šç§è¯­è¨€çš„é«˜äº®"><a href="#3-Markdown-Extended-Extends-Mononokaiï¼šä¸é”™çš„Markdownä¸»é¢˜ï¼Œæ”¯æŒå¯¹å¤šç§è¯­è¨€çš„é«˜äº®" class="headerlink" title="3.Markdown Extended + Extends Mononokaiï¼šä¸é”™çš„Markdownä¸»é¢˜ï¼Œæ”¯æŒå¯¹å¤šç§è¯­è¨€çš„é«˜äº®"></a>3.<a href="&#39;#&#39;">Markdown Extended + Extends Mononokai</a>ï¼šä¸é”™çš„Markdownä¸»é¢˜ï¼Œæ”¯æŒå¯¹å¤šç§è¯­è¨€çš„é«˜äº®</h3><h3 id="4-OmniMarkupPreviwerï¼šå®æ—¶åœ¨æµè§ˆå™¨ä¸­é¢„ï¼Œè€ŒMarkdownPreviewæ˜¯éœ€è¦æ‰‹åŠ¨ç”Ÿæˆçš„å’ŒF5çš„ã€‚è§ˆå¦‚æœåŒå±çš„è¯ï¼Œåº”è¯¥å…·æœ‰ä¸é”™çš„ä½“éªŒã€‚å¿«æ·é”®å¦‚ä¸‹ï¼š"><a href="#4-OmniMarkupPreviwerï¼šå®æ—¶åœ¨æµè§ˆå™¨ä¸­é¢„ï¼Œè€ŒMarkdownPreviewæ˜¯éœ€è¦æ‰‹åŠ¨ç”Ÿæˆçš„å’ŒF5çš„ã€‚è§ˆå¦‚æœåŒå±çš„è¯ï¼Œåº”è¯¥å…·æœ‰ä¸é”™çš„ä½“éªŒã€‚å¿«æ·é”®å¦‚ä¸‹ï¼š" class="headerlink" title="4.OmniMarkupPreviwerï¼šå®æ—¶åœ¨æµè§ˆå™¨ä¸­é¢„ï¼Œè€ŒMarkdownPreviewæ˜¯éœ€è¦æ‰‹åŠ¨ç”Ÿæˆçš„å’ŒF5çš„ã€‚è§ˆå¦‚æœåŒå±çš„è¯ï¼Œåº”è¯¥å…·æœ‰ä¸é”™çš„ä½“éªŒã€‚å¿«æ·é”®å¦‚ä¸‹ï¼š"></a>4.<a href="http://theo.im/OmniMarkupPreviewer/" target="_blank" rel="noopener">OmniMarkupPreviwer</a>ï¼šå®æ—¶åœ¨æµè§ˆå™¨ä¸­é¢„ï¼Œè€ŒMarkdownPreviewæ˜¯éœ€è¦æ‰‹åŠ¨ç”Ÿæˆçš„å’ŒF5çš„ã€‚è§ˆå¦‚æœåŒå±çš„è¯ï¼Œåº”è¯¥å…·æœ‰ä¸é”™çš„ä½“éªŒã€‚å¿«æ·é”®å¦‚ä¸‹ï¼š</h3><ul><li><code>Ctrl+Alt+o</code>: Preview Markup in Browser</li><li><code>Ctrl+Alt+x</code>: Export Markup as HTML</li><li><code>Ctrl+Alt+c</code>: Copy Markup as HTML.</li></ul><h3 id="5-TableEditorï¼šMarkdownä¸­çš„è¡¨æ ¼ä¹¦å†™ä½“éªŒçœŸå¿ƒä¸å’‹æ ·ï¼Œæ‰€æœ‰æœ‰äººä¸ºè¿™ä¸ªå¼€å‘äº†ä¸€ä¸ªæ’ä»¶ï¼Œå…·æœ‰è¾ƒå¥½çš„è‡ªé€‚åº”æ€§ï¼Œä¼šè‡ªåŠ¨å¯¹é½ï¼Œå¼ºè¿«ç—‡æ‚£è€…å–œæ¬¢ã€‚"><a href="#5-TableEditorï¼šMarkdownä¸­çš„è¡¨æ ¼ä¹¦å†™ä½“éªŒçœŸå¿ƒä¸å’‹æ ·ï¼Œæ‰€æœ‰æœ‰äººä¸ºè¿™ä¸ªå¼€å‘äº†ä¸€ä¸ªæ’ä»¶ï¼Œå…·æœ‰è¾ƒå¥½çš„è‡ªé€‚åº”æ€§ï¼Œä¼šè‡ªåŠ¨å¯¹é½ï¼Œå¼ºè¿«ç—‡æ‚£è€…å–œæ¬¢ã€‚" class="headerlink" title="5.TableEditorï¼šMarkdownä¸­çš„è¡¨æ ¼ä¹¦å†™ä½“éªŒçœŸå¿ƒä¸å’‹æ ·ï¼Œæ‰€æœ‰æœ‰äººä¸ºè¿™ä¸ªå¼€å‘äº†ä¸€ä¸ªæ’ä»¶ï¼Œå…·æœ‰è¾ƒå¥½çš„è‡ªé€‚åº”æ€§ï¼Œä¼šè‡ªåŠ¨å¯¹é½ï¼Œå¼ºè¿«ç—‡æ‚£è€…å–œæ¬¢ã€‚"></a>5.<a href="https://github.com/vkocubinsky/SublimeTableEditor" target="_blank" rel="noopener">TableEditor</a>ï¼šMarkdownä¸­çš„è¡¨æ ¼ä¹¦å†™ä½“éªŒçœŸå¿ƒä¸å’‹æ ·ï¼Œæ‰€æœ‰æœ‰äººä¸ºè¿™ä¸ªå¼€å‘äº†ä¸€ä¸ªæ’ä»¶ï¼Œå…·æœ‰è¾ƒå¥½çš„è‡ªé€‚åº”æ€§ï¼Œä¼šè‡ªåŠ¨å¯¹é½ï¼Œå¼ºè¿«ç—‡æ‚£è€…å–œæ¬¢ã€‚</h3><p>é¦–å…ˆéœ€è¦ç”¨<code>ctrl+shift+p</code>æ‰“å¼€è¿™ä¸ªåŠŸèƒ½ï¼ˆTable Editor: Enable for current syntax or Table Editor: Enable for current view or â€œTable Editor: Set table syntax â€¦ for current viewâ€ï¼‰ï¼Œç„¶åå°±å¯ä»¥ç‹‚ç”¨<code>tab</code>æ¥è‡ªåŠ¨å®Œæˆäº†</p><h3 id="6-Markdown-TOCï¼šç¼–è¾‘MDæ–‡ä»¶çš„æ—¶å€™å¯ä»¥æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆï¼Œå¹¶ä¸”å¯ä»¥æ§åˆ¶ç”Ÿäº§ç›®å½•çš„å±‚æ¬¡ï¼Œä¸è¿‡ä¸ä¼šè‡ªåŠ¨è·³è½¬ã€‚ç¼–è¾‘çš„æ—¶å€™å¯ä»¥çœ‹çœ‹ï¼Œå¦‚æœéœ€è¦ç”Ÿæˆçš„HTMLå…·æœ‰è¶…é“¾æ¥è·³è½¬çš„åŠŸèƒ½ï¼Œè¿˜æ˜¯ç”¨MarkdownPreviewå§ã€‚"><a href="#6-Markdown-TOCï¼šç¼–è¾‘MDæ–‡ä»¶çš„æ—¶å€™å¯ä»¥æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆï¼Œå¹¶ä¸”å¯ä»¥æ§åˆ¶ç”Ÿäº§ç›®å½•çš„å±‚æ¬¡ï¼Œä¸è¿‡ä¸ä¼šè‡ªåŠ¨è·³è½¬ã€‚ç¼–è¾‘çš„æ—¶å€™å¯ä»¥çœ‹çœ‹ï¼Œå¦‚æœéœ€è¦ç”Ÿæˆçš„HTMLå…·æœ‰è¶…é“¾æ¥è·³è½¬çš„åŠŸèƒ½ï¼Œè¿˜æ˜¯ç”¨MarkdownPreviewå§ã€‚" class="headerlink" title="6.Markdown TOCï¼šç¼–è¾‘MDæ–‡ä»¶çš„æ—¶å€™å¯ä»¥æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆï¼Œå¹¶ä¸”å¯ä»¥æ§åˆ¶ç”Ÿäº§ç›®å½•çš„å±‚æ¬¡ï¼Œä¸è¿‡ä¸ä¼šè‡ªåŠ¨è·³è½¬ã€‚ç¼–è¾‘çš„æ—¶å€™å¯ä»¥çœ‹çœ‹ï¼Œå¦‚æœéœ€è¦ç”Ÿæˆçš„HTMLå…·æœ‰è¶…é“¾æ¥è·³è½¬çš„åŠŸèƒ½ï¼Œè¿˜æ˜¯ç”¨MarkdownPreviewå§ã€‚"></a>6.<a href="https://github.com/naokazuterada/MarkdownTOC" target="_blank" rel="noopener">Markdown TOC</a>ï¼šç¼–è¾‘MDæ–‡ä»¶çš„æ—¶å€™å¯ä»¥æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆï¼Œå¹¶ä¸”å¯ä»¥æ§åˆ¶ç”Ÿäº§ç›®å½•çš„å±‚æ¬¡ï¼Œä¸è¿‡ä¸ä¼šè‡ªåŠ¨è·³è½¬ã€‚ç¼–è¾‘çš„æ—¶å€™å¯ä»¥çœ‹çœ‹ï¼Œå¦‚æœéœ€è¦ç”Ÿæˆçš„HTMLå…·æœ‰è¶…é“¾æ¥è·³è½¬çš„åŠŸèƒ½ï¼Œè¿˜æ˜¯ç”¨<strong>MarkdownPreview</strong>å§ã€‚</h3>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-MarkDown-Editingï¼šæ”¯æŒMarkdownè¯­æ³•é«˜äº®ï¼›æ”¯æŒGithub-Favored-Markdownè¯­æ³•ï¼›è‡ªå¸¦3ä¸ªä¸»é¢˜&quot;&gt;&lt;a href=&quot;#1-MarkDown-Editingï¼šæ”¯æŒMarkdownè¯­æ³•é«˜äº®ï¼›æ”¯æŒGithub-Favored-Markdownè¯­æ³•ï¼›è‡ªå¸¦3ä¸ªä¸»é¢˜&quot; class=&quot;headerlink&quot; title=&quot;1.MarkDown Editingï¼šæ”¯æŒMarkdownè¯­æ³•é«˜äº®ï¼›æ”¯æŒGithub Favored Markdownè¯­æ³•ï¼›è‡ªå¸¦3ä¸ªä¸»é¢˜&quot;&gt;&lt;/a&gt;1.&lt;a href=&quot;https://github.com/SublimeText-Markdown/MarkdownEditing&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;MarkDown Editing&lt;/a&gt;ï¼šæ”¯æŒMarkdownè¯­æ³•é«˜äº®ï¼›æ”¯æŒGithub Favored Markdownè¯­æ³•ï¼›è‡ªå¸¦3ä¸ªä¸»é¢˜&lt;/h3&gt;
    
    </summary>
    
      <category term="å¸¸ç”¨å·¥å…·" scheme="http://heany.github.io/categories/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="sublimeæ’ä»¶" scheme="http://heany.github.io/tags/sublime%E6%8F%92%E4%BB%B6/"/>
    
      <category term="Markdown" scheme="http://heany.github.io/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°Githubä¸Š</title>
    <link href="http://heany.github.io/2017/10/15/%E5%A6%82%E4%BD%95%E4%B8%8A%E4%BC%A0%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E5%88%B0Github%E4%B8%8A/"/>
    <id>http://heany.github.io/2017/10/15/å¦‚ä½•ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°Githubä¸Š/</id>
    <published>2017-10-15T13:14:57.000Z</published>
    <updated>2019-01-26T14:47:30.579Z</updated>
    
    <content type="html"><![CDATA[<!-->    æœ€è¿‘åšäº†ä¸€äº›å·¥ä½œï¼Œæƒ³å°†ä»–ä»¬ä¸Šä¼ åˆ°GitHubä¸Šå»ä¿å­˜ï¼Œæˆ‘ä¹ æƒ¯äºæœ¬åœ°ç¼–è¾‘ï¼Œå®Œæˆåå†ä¸€èµ·ä¸Šä¼ åˆ°ä»“åº“ä¸­ï¼Œé•¿æ—¶é—´ä¸ä½¿ç”¨å¾ˆå®¹æ˜“å¿˜ï¼Œæ€»ç»“ç½‘ä¸Šçš„ä¸€äº›æ•™ç¨‹ï¼Œå†™ä½œåšå®¢é‡Œæ–¹ä¾¿è‡ªå·±å¶å°”æŸ¥é˜…ã€‚<a id="more"></a><p>æœ¬æ–‡å‚è€ƒä»¥ä¸‹åšæ–‡<br><a href="http://www.jianshu.com/p/c70ca3a02087" target="_blank" rel="noopener">ä¸¤ç§æ–¹æ³•ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°github</a></p><p>æƒ³çŸ¥é“è¯¦ç»†çš„æ­¥éª¤å¯ä»¥ç‚¹å‡»å‰å¾€å­¦ä¹ ï¼Œè¿™é‡Œæˆ‘åªç®€å•è®°å½•ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ã€‚</p><h4 id="1-GitHubåœ¨çº¿ä¸Šä¼ æ–‡ä»¶å¤¹"><a href="#1-GitHubåœ¨çº¿ä¸Šä¼ æ–‡ä»¶å¤¹" class="headerlink" title="1.GitHubåœ¨çº¿ä¸Šä¼ æ–‡ä»¶å¤¹"></a>1.GitHubåœ¨çº¿ä¸Šä¼ æ–‡ä»¶å¤¹</h4><h5 id="1-1ç‚¹å‡»Upload-files"><a href="#1-1ç‚¹å‡»Upload-files" class="headerlink" title="1.1ç‚¹å‡»Upload files"></a>1.1ç‚¹å‡»<code>Upload files</code></h5><h5 id="1-2-ç›´æ¥æ‹–æ‹½"><a href="#1-2-ç›´æ¥æ‹–æ‹½" class="headerlink" title="1.2 ç›´æ¥æ‹–æ‹½"></a>1.2 ç›´æ¥æ‹–æ‹½</h5><h4 id="2-é€šè¿‡gitå·¥å…·ä¸Šä¼ æœ¬åœ°æ–‡ä»¶å¤¹"><a href="#2-é€šè¿‡gitå·¥å…·ä¸Šä¼ æœ¬åœ°æ–‡ä»¶å¤¹" class="headerlink" title="2.é€šè¿‡gitå·¥å…·ä¸Šä¼ æœ¬åœ°æ–‡ä»¶å¤¹"></a>2.é€šè¿‡gitå·¥å…·ä¸Šä¼ æœ¬åœ°æ–‡ä»¶å¤¹</h4><h5 id="2-1ä¸‹è½½git"><a href="#2-1ä¸‹è½½git" class="headerlink" title="2.1ä¸‹è½½git"></a>2.1ä¸‹è½½git</h5><blockquote><p> ç”±äºéƒ¨åˆ†åŸå› ï¼Œå›½å†…ç›´æ¥å®˜ç½‘ä¸‹è½½gitéå¸¸æ…¢ï¼Œéœ€è¦FQã€‚è¿™é‡Œæä¾›ä¸€ä¸ªå›½å†…çš„ä¸‹è½½ç«™ï¼Œæ–¹ä¾¿ç½‘å‹ä¸‹è½½ã€‚</p></blockquote><p><a href="https://github.com/waylau/git-for-win" target="_blank" rel="noopener"><strong>ç‚¹å‡»å‰å¾€</strong></a></p><h5 id="2-2-ç»‘å®šç”¨æˆ·"><a href="#2-2-ç»‘å®šç”¨æˆ·" class="headerlink" title="2.2 ç»‘å®šç”¨æˆ·"></a>2.2 ç»‘å®šç”¨æˆ·</h5><p>æ‰“å¼€git-bash.exeï¼ˆç›´æ¥åœ¨æ¡Œé¢ä¸Šç‚¹å‡»å³é”®ï¼Œæˆ–è€…ç‚¹å‡»å¼€å§‹æŒ‰é’®æ‰¾åˆ°Git Bashï¼‰</p><p>åœ¨æ‰“å¼€çš„GIt Bashä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ˆç”¨æˆ·å’Œé‚®ç®±ä¸ºä½ githubæ³¨å†Œçš„è´¦å·å’Œé‚®ç®±ï¼‰</p><pre><code>$ git config --global user.name &quot;##&quot;$ git config --global user.email &quot;h##@**.com&quot;</code></pre><h5 id="2-3-è®¾ç½®SSH-Key"><a href="#2-3-è®¾ç½®SSH-Key" class="headerlink" title="2.3 è®¾ç½®SSH Key"></a>2.3 è®¾ç½®SSH Key</h5><h6 id="2-3-1-ç”Ÿæˆssh-key"><a href="#2-3-1-ç”Ÿæˆssh-key" class="headerlink" title="2.3.1 ç”Ÿæˆssh key"></a>2.3.1 ç”Ÿæˆssh key</h6><h6 id="2-3-2-ä¸ºGitHubè´¦å·é…ç½®ssh-key"><a href="#2-3-2-ä¸ºGitHubè´¦å·é…ç½®ssh-key" class="headerlink" title="2.3.2 ä¸ºGitHubè´¦å·é…ç½®ssh key"></a>2.3.2 ä¸ºGitHubè´¦å·é…ç½®ssh key</h6><h5 id="2-4-ä¸Šä¼ æœ¬åœ°é¡¹ç›®åˆ°GitHub"><a href="#2-4-ä¸Šä¼ æœ¬åœ°é¡¹ç›®åˆ°GitHub" class="headerlink" title="2.4 ä¸Šä¼ æœ¬åœ°é¡¹ç›®åˆ°GitHub"></a>2.4 ä¸Šä¼ æœ¬åœ°é¡¹ç›®åˆ°GitHub</h5><blockquote><p><strong>è¿™é‡Œåªè´´ä¸€äº›å‘½ä»¤</strong></p></blockquote><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># åˆå§‹åŒ–</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="meta"># å°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ä¸­</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="meta"># æäº¤</span></span><br><span class="line">git commit -m <span class="string">"æ³¨é‡Š"</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># å…³è”GitHubä»“åº“</span></span><br><span class="line">git remote add origin https:<span class="comment">//github.com/**/##.git</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># ä¸Šä¼ æœ¬åœ°ä»£ç åŠæ–‡ä»¶</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;!--&gt;
    æœ€è¿‘åšäº†ä¸€äº›å·¥ä½œï¼Œæƒ³å°†ä»–ä»¬ä¸Šä¼ åˆ°GitHubä¸Šå»ä¿å­˜ï¼Œæˆ‘ä¹ æƒ¯äºæœ¬åœ°ç¼–è¾‘ï¼Œå®Œæˆåå†ä¸€èµ·ä¸Šä¼ åˆ°ä»“åº“ä¸­ï¼Œé•¿æ—¶é—´ä¸ä½¿ç”¨å¾ˆå®¹æ˜“å¿˜ï¼Œæ€»ç»“ç½‘ä¸Šçš„ä¸€äº›æ•™ç¨‹ï¼Œå†™ä½œåšå®¢é‡Œæ–¹ä¾¿è‡ªå·±å¶å°”æŸ¥é˜…ã€‚
    
    </summary>
    
      <category term="Github" scheme="http://heany.github.io/categories/Github/"/>
    
    
  </entry>
  
  <entry>
    <title>åœ¨sublimeText3ä¸­å®‰è£…pylinteræ–¹æ³•</title>
    <link href="http://heany.github.io/2017/10/15/%E5%9C%A8sublimeText3%E4%B8%AD%E5%AE%89%E8%A3%85pylinter%E6%96%B9%E6%B3%95/"/>
    <id>http://heany.github.io/2017/10/15/åœ¨sublimeText3ä¸­å®‰è£…pylinteræ–¹æ³•/</id>
    <published>2017-10-15T06:03:54.000Z</published>
    <updated>2019-01-26T14:47:30.579Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ä¸‹è½½pylintå®‰è£…åŒ…"><a href="#1-ä¸‹è½½pylintå®‰è£…åŒ…" class="headerlink" title="1.ä¸‹è½½pylintå®‰è£…åŒ…"></a>1.ä¸‹è½½pylintå®‰è£…åŒ…</h2><pre><code>å®˜ç½‘ä¸‹è½½ï¼Œè§£å‹å³å¯&lt;https://pypi.python.org/pypi/pylint&gt;</code></pre><h2 id="2-å®‰è£…-astroid"><a href="#2-å®‰è£…-astroid" class="headerlink" title="2.å®‰è£… astroid"></a>2.å®‰è£… astroid</h2><pre><code>pip install astroid</code></pre><p>æˆ–è€…<br>   &nbsp;&nbsp;&nbsp;&nbsp;æ‰“å¼€<a href="https://bitbucket.org/logilab/astroid" target="_blank" rel="noopener">https://bitbucket.org/logilab/astroid</a>,ä¸‹è½½å‹ç¼©åŒ…ï¼Œè§£å‹ cdåˆ°ä¸‹è½½å¥½çš„æ–‡ä»¶å¤¹å†…ï¼Œç„¶åä½¿ç”¨</p><pre><code>python setup.py install</code></pre><h2 id="3-å®‰è£…isort-ç”¨å¦‚ä¸‹å‘½ä»¤"><a href="#3-å®‰è£…isort-ç”¨å¦‚ä¸‹å‘½ä»¤" class="headerlink" title="3.å®‰è£…isort,ç”¨å¦‚ä¸‹å‘½ä»¤"></a>3.å®‰è£…isort,ç”¨å¦‚ä¸‹å‘½ä»¤</h2><pre><code>pip install isort</code></pre><h2 id="4-å®‰è£…pylint"><a href="#4-å®‰è£…pylint" class="headerlink" title="4.å®‰è£…pylint"></a>4.å®‰è£…pylint</h2><p>   &nbsp;&nbsp;&nbsp;&nbsp;cmdåˆ‡æ¢åˆ°åˆšæ‰ä¸‹è½½è§£å‹pylintæ–‡ä»¶å¤¹å†…ï¼Œè¾“å…¥å‘½ä»¤ï¼š</p><pre><code>python setup.py install</code></pre><h2 id="5-å®‰è£…pylintæ’ä»¶"><a href="#5-å®‰è£…pylintæ’ä»¶" class="headerlink" title="5.å®‰è£…pylintæ’ä»¶"></a>5.å®‰è£…pylintæ’ä»¶</h2><blockquote><p>åœ¨sublimeä¸­ctrl+shift+P ç„¶åè¾“å…¥install ç„¶åè¾“å…¥pylinterï¼Œå›è½¦å³å¯ï¼</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;1-ä¸‹è½½pylintå®‰è£…åŒ…&quot;&gt;&lt;a href=&quot;#1-ä¸‹è½½pylintå®‰è£…åŒ…&quot; class=&quot;headerlink&quot; title=&quot;1.ä¸‹è½½pylintå®‰è£…åŒ…&quot;&gt;&lt;/a&gt;1.ä¸‹è½½pylintå®‰è£…åŒ…&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;å®˜ç½‘ä¸‹è½½ï¼Œè§£å‹å³å¯&amp;lt;https
      
    
    </summary>
    
      <category term="å¸¸ç”¨å·¥å…·" scheme="http://heany.github.io/categories/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="sublime æ’ä»¶" scheme="http://heany.github.io/tags/sublime-%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>python3.xä¸MySQLçš„å®‰è£…ä¸é“¾æ¥</title>
    <link href="http://heany.github.io/2017/10/15/python3-x%E4%B8%8EMySQL%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%93%BE%E6%8E%A5/"/>
    <id>http://heany.github.io/2017/10/15/python3-xä¸MySQLçš„å®‰è£…ä¸é“¾æ¥/</id>
    <published>2017-10-15T06:02:45.000Z</published>
    <updated>2019-01-26T14:47:30.578Z</updated>
    
    <content type="html"><![CDATA[<!--> éœ€è¦ç”¨åˆ°pythonæ¥è¿›è¡Œmysqlæ•°æ®åº“å¤„ç†ï¼Œé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚pythonå¦‚ä½•è¿æ¥MySQLè¿›è¡Œæ•°æ®åº“ç›¸å…³æ“ä½œç­‰ï¼Œæ¥ä¸‹æ¥æˆ‘å°†ä¸€äº›python3ä¸­ä¸€äº›MySQLå¤„ç†çš„ä¸€äº›æ“ä½œå†™åœ¨ä¸‹é¢ã€‚<a id="more"></a><blockquote><p>python2.xç‰ˆæœ¬è¿æ¥MySQLæ•°æ®åº“éœ€è¦å®‰è£…MySQL-pythonåº“ï¼Œæ‰“å¼€ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š</p></blockquote><pre><code>pip install MySQL-pythonæˆ–è€…pip install MySQLdb</code></pre><blockquote><p>python3.xç‰ˆæœ¬é“¾æ¥MySQLæ•°æ®åº“éœ€è¦å®‰è£…PyMySQLåº“ï¼Œæ‰“å¼€ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š</p></blockquote><pre><code>pip install PyMySQL</code></pre><p>è¿˜å¯ä»¥é€šè¿‡Pycharmè½¯ä»¶é‡Œé¢çš„åº“ç®¡ç†æ¥æ·»åŠ pymysql<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql  </span><br><span class="line">      </span><br><span class="line"><span class="comment"># è¿æ¥æ•°æ®åº“  </span></span><br><span class="line">connect = pymysql.Connect(  </span><br><span class="line">    host=<span class="string">'localhost'</span>,  </span><br><span class="line">    port=<span class="number">3306</span>,  </span><br><span class="line">    user=<span class="string">'root'</span>,  </span><br><span class="line">    passwd=<span class="string">'1234'</span>,  </span><br><span class="line">    db=<span class="string">'save'</span>,  </span><br><span class="line">    charset=<span class="string">'utf8'</span>  </span><br><span class="line"> )  </span><br><span class="line">      </span><br><span class="line"><span class="comment"># è·å–æ¸¸æ ‡  </span></span><br><span class="line">cursor = connect.cursor()  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># æ’å…¥æ•°æ®  </span></span><br><span class="line">sql = <span class="string">"INSERT INTO money (name, account, saving) VALUES ( '%s', '%s', %.2f )"</span>  </span><br><span class="line">data = (<span class="string">'é›·å†›'</span>, <span class="string">'13512345678'</span>, <span class="number">10000</span>)  </span><br><span class="line">cursor.execute(sql % data)  </span><br><span class="line">connect.commit()  </span><br><span class="line">print(<span class="string">'æˆåŠŸæ’å…¥'</span>, cursor.rowcount, <span class="string">'æ¡æ•°æ®'</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># ä¿®æ”¹æ•°æ®  </span></span><br><span class="line">sql = <span class="string">"UPDATE money SET saving = %.2f WHERE account = '%s' "</span>  </span><br><span class="line">data = (<span class="number">8888</span>, <span class="string">'13512345678'</span>)  </span><br><span class="line">cursor.execute(sql % data)  </span><br><span class="line">connect.commit()  </span><br><span class="line">print(<span class="string">'æˆåŠŸä¿®æ”¹'</span>, cursor.rowcount, <span class="string">'æ¡æ•°æ®'</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># æŸ¥è¯¢æ•°æ®  </span></span><br><span class="line">sql = <span class="string">"SELECT name,saving FROM money WHERE account = '%s' "</span>  </span><br><span class="line">data = (<span class="string">'13512345678'</span>,)  </span><br><span class="line">cursor.execute(sql % data)  </span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> cursor.fetchall():  </span><br><span class="line">    print(<span class="string">"Name:%s\tSaving:%.2f"</span> % row)  </span><br><span class="line">print(<span class="string">'å…±æŸ¥æ‰¾å‡º'</span>, cursor.rowcount, <span class="string">'æ¡æ•°æ®'</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># åˆ é™¤æ•°æ®  </span></span><br><span class="line">sql = <span class="string">"DELETE FROM money  WHERE account = '%s' LIMIT %d"</span>  </span><br><span class="line">data = (<span class="string">'13512345678'</span>, <span class="number">1</span>)  </span><br><span class="line">cursor.execute(sql % data)  </span><br><span class="line">connect.commit()  </span><br><span class="line">print(<span class="string">'æˆåŠŸåˆ é™¤'</span>, cursor.rowcount, <span class="string">'æ¡æ•°æ®'</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># äº‹åŠ¡å¤„ç†  </span></span><br><span class="line">sql_1 = <span class="string">"UPDATE money SET saving = saving + 1000 WHERE account = '18012345678' "</span>  </span><br><span class="line">sql_2 = <span class="string">"UPDATE money SET expend = expend + 1000 WHERE account = '18012345678' "</span>  </span><br><span class="line">sql_3 = <span class="string">"UPDATE money SET income = income + 2000 WHERE account = '18012345678' "</span>  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">try</span>:  </span><br><span class="line">    cursor.execute(sql_1)  <span class="comment"># å‚¨è“„å¢åŠ 1000  </span></span><br><span class="line">    cursor.execute(sql_2)  <span class="comment"># æ”¯å‡ºå¢åŠ 1000  </span></span><br><span class="line">    cursor.execute(sql_3)  <span class="comment"># æ”¶å…¥å¢åŠ 2000  </span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:  </span><br><span class="line">    connect.rollback()  <span class="comment"># äº‹åŠ¡å›æ»š  </span></span><br><span class="line">    print(<span class="string">'äº‹åŠ¡å¤„ç†å¤±è´¥'</span>, e)  </span><br><span class="line"><span class="keyword">else</span>:  </span><br><span class="line">    connect.commit()  <span class="comment"># äº‹åŠ¡æäº¤  </span></span><br><span class="line">    print(<span class="string">'äº‹åŠ¡å¤„ç†æˆåŠŸ'</span>, cursor.rowcount)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># å…³é—­è¿æ¥  </span></span><br><span class="line">cursor.close()  </span><br><span class="line">connect.close()</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;!--&gt;
 éœ€è¦ç”¨åˆ°pythonæ¥è¿›è¡Œmysqlæ•°æ®åº“å¤„ç†ï¼Œé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚pythonå¦‚ä½•è¿æ¥MySQLè¿›è¡Œæ•°æ®åº“ç›¸å…³æ“ä½œç­‰ï¼Œæ¥ä¸‹æ¥æˆ‘å°†ä¸€äº›python3ä¸­ä¸€äº›MySQLå¤„ç†çš„ä¸€äº›æ“ä½œå†™åœ¨ä¸‹é¢ã€‚
    
    </summary>
    
      <category term="python" scheme="http://heany.github.io/categories/python/"/>
    
    
      <category term="pythonå­¦ä¹ ç¬”è®°" scheme="http://heany.github.io/tags/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>xpathå­¦ä¹ ç¬”è®°</title>
    <link href="http://heany.github.io/2017/10/15/xpath%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://heany.github.io/2017/10/15/xpathå­¦ä¹ ç¬”è®°/</id>
    <published>2017-10-15T06:00:09.000Z</published>
    <updated>2019-01-26T14:47:30.579Z</updated>
    
    <content type="html"><![CDATA[<!-->XPathæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„è§£ææ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿä½œä¸ºçˆ¬è™«å­¦ä¹ çš„åŸºç¡€ï¼Œåœ¨åé¢çš„ selenium ä»¥åŠ scrapy æ¡†æ¶ä¸­éƒ½ä¼šæ¶‰åŠåˆ°è¿™éƒ¨åˆ†çŸ¥è¯†ï¼Œéœ€è¦æŠŠå®ƒçš„è¯­æ³•æŒæ¡æ¸…æ¥šï¼Œä¸ºåé¢çš„æ·±å…¥ç ”ç©¶åšå¥½é“ºå«ã€‚<a id="more"></a><h3 id="å­¦ä¹ å‚è€ƒ"><a href="#å­¦ä¹ å‚è€ƒ" class="headerlink" title="å­¦ä¹ å‚è€ƒ"></a>å­¦ä¹ å‚è€ƒ</h3><p>è½¬è‡ª<a href="http://cuiqingcai.com/2621.html" target="_blank" rel="noopener">Pythonçˆ¬è™«åˆ©å™¨ä¸‰ä¹‹Xpathè¯­æ³•ä¸lxmlåº“çš„ç”¨æ³•</a></p><p>xpathè¯­æ³•å‚è€ƒw3school</p><p><a href="http://www.w3school.com.cn/xpath/index.asp" target="_blank" rel="noopener">w3school</a></p><h3 id="é€‰å–èŠ‚ç‚¹"><a href="#é€‰å–èŠ‚ç‚¹" class="headerlink" title="é€‰å–èŠ‚ç‚¹"></a>é€‰å–èŠ‚ç‚¹</h3><blockquote><p>XPath ä½¿ç”¨è·¯å¾„è¡¨è¾¾å¼åœ¨ XML æ–‡æ¡£ä¸­é€‰å–èŠ‚ç‚¹ã€‚èŠ‚ç‚¹æ˜¯é€šè¿‡æ²¿ç€è·¯å¾„æˆ–è€… step æ¥é€‰å–çš„ã€‚</p></blockquote><h4 id="ä¸‹é¢åˆ—å‡ºäº†æœ€æœ‰ç”¨çš„è·¯å¾„è¡¨è¾¾å¼"><a href="#ä¸‹é¢åˆ—å‡ºäº†æœ€æœ‰ç”¨çš„è·¯å¾„è¡¨è¾¾å¼" class="headerlink" title="ä¸‹é¢åˆ—å‡ºäº†æœ€æœ‰ç”¨çš„è·¯å¾„è¡¨è¾¾å¼"></a>ä¸‹é¢åˆ—å‡ºäº†æœ€æœ‰ç”¨çš„è·¯å¾„è¡¨è¾¾å¼</h4><table><thead><tr><th style="text-align:center">è¡¨è¾¾å¼</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">nodename</td><td style="text-align:center">é€‰å–æ­¤èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</td></tr><tr><td style="text-align:center">/</td><td style="text-align:center">ä»æ ¹ç»“ç‚¹é€‰å–</td></tr><tr><td style="text-align:center">//</td><td style="text-align:center">ä»åŒ¹é…é€‰æ‹©çš„å½“å‰èŠ‚ç‚¹é€‰æ‹©æ–‡æ¡£ä¸­çš„èŠ‚ç‚¹ï¼Œè€Œä¸è€ƒè™‘å®ƒä»¬çš„ä½ç½®</td></tr><tr><td style="text-align:center">.</td><td style="text-align:center">é€‰å–å½“å‰èŠ‚ç‚¹</td></tr><tr><td style="text-align:center">..</td><td style="text-align:center">é€‰å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</td></tr><tr><td style="text-align:center">@</td><td style="text-align:center">é€‰å–å±æ€§</td></tr></tbody></table><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a><b>å®ä¾‹</b></h3><p>åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬å·²ç»åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ä»¥åŠè¡¨è¾¾å¼çš„ç»“æœï¼š</p><p><img src="http://static.zybuluo.com/Heany/pxue0b8hfzi64wtvzwbm2ng3/1.png" alt="1.png-13kB"></p><h3 id="å®ä¾‹Demo"><a href="#å®ä¾‹Demo" class="headerlink" title="å®ä¾‹Demo"></a>å®ä¾‹Demo</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bookstore</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">book</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Harry Potter<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">author</span>&gt;</span>J K. Rowling<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">year</span>&gt;</span>2005<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">price</span>&gt;</span>29.99<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bookstore</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å®ä¾‹æµ‹è¯•</strong></p><blockquote><p>åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬å·²åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ä»¥åŠè¡¨è¾¾å¼çš„ç»“æœï¼š</p></blockquote><p><img src="http://static.zybuluo.com/Heany/xrja55z2gwunx21ji8qv9lgj/2.png" alt="2.png-13kB"></p><h3 id="è°“è¯­"><a href="#è°“è¯­" class="headerlink" title="è°“è¯­"></a><em>è°“è¯­</em></h3><pre><code>è°“è¯­ç”¨æ¥æŸ¥æ‰¾æŸä¸ªç‰¹å®šçš„èŠ‚ç‚¹æˆ–è€…åŒ…å«æŸä¸ªæŒ‡å®šçš„å€¼çš„èŠ‚ç‚¹ã€‚è°“è¯­è¢«åµŒåœ¨æ–¹æ‹¬å·ä¸­ã€‚</code></pre><h3 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a><strong>å®ä¾‹</strong></h3><blockquote><p>åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†å¸¦æœ‰è°“è¯­çš„ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¡¨è¾¾å¼çš„ç»“æœï¼š</p></blockquote><p><img src="http://static.zybuluo.com/Heany/zbzyg484qqbcxo9gbqdeoiqv/3.PNG" alt="3.PNG-31.6kB"></p><p><strong>é€‰å–æœªçŸ¥èŠ‚ç‚¹</strong><br>XPath é€šé…ç¬¦å¯ç”¨æ¥é€‰å–æœªçŸ¥çš„ XML å…ƒç´ ã€‚</p><table><thead><tr><th style="text-align:center">é€šé…ç¬¦</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">*</td><td style="text-align:center">åŒ¹é…ä»»ä½•èŠ‚ç‚¹å…ƒç´ </td></tr><tr><td style="text-align:center">@*</td><td style="text-align:center">åŒ¹é…ä»»ä½•å±æ€§èŠ‚ç‚¹</td></tr><tr><td style="text-align:center">node()</td><td style="text-align:center">åŒ¹é…ä»»ä½•ç±»å‹çš„èŠ‚ç‚¹</td></tr></tbody></table><table><thead><tr><th style="text-align:center">é€šé…ç¬¦</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">*</td><td style="text-align:center">åŒ¹é…ä»»ä½•èŠ‚ç‚¹å…ƒç´ </td></tr><tr><td style="text-align:center">@*</td><td style="text-align:center">åŒ¹é…ä»»ä½•å±æ€§èŠ‚ç‚¹</td></tr><tr><td style="text-align:center">node()</td><td style="text-align:center">åŒ¹é…ä»»ä½•ç±»å‹çš„èŠ‚ç‚¹</td></tr></tbody></table><p>  <strong>å®ä¾‹</strong><br>  åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¿™äº›è¡¨è¾¾å¼çš„ç»“æœï¼š</p><table><thead><tr><th style="text-align:center">è·¯å¾„è¡¨è¾¾å¼</th><th style="text-align:center">ç»“æœ</th></tr></thead><tbody><tr><td style="text-align:center">/bookstore/*</td><td style="text-align:center">é€‰å–bookstoreå…ƒç´ çš„æ‰€æœ‰çš„å­å…ƒç´ </td></tr><tr><td style="text-align:center">//*</td><td style="text-align:center">é€‰å–æ–‡æ¡£ä¸­çš„æ‰€æœ‰å…ƒç´ </td></tr><tr><td style="text-align:center">//title[@*]</td><td style="text-align:center">é€‰å–æ‰€æœ‰å¸¦æœ‰å±æ€§çš„titleå…ƒç´ </td></tr></tbody></table><p>  <strong>é€‰å–è‹¥å¹²è·¯å¾„</strong><br>  é€šè¿‡åœ¨è·¯å¾„è¡¨è¾¾å¼ä¸­ä½¿ç”¨â€œ|â€è¿ç®—ç¬¦ï¼Œå¯ä»¥é€‰æ‹©è‹¥å¹²ä¸ªè·¯å¾„<br>  <em>å®ä¾‹</em><br>  åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¿™äº›è¡¨è¾¾å¼çš„ç»“æœï¼š</p><table><thead><tr><th style="text-align:center">è·¯å¾„è¡¨è¾¾å¼</th><th style="text-align:center">ç»“æœ</th></tr></thead><tbody><tr><td style="text-align:center">//book/title \</td><td style="text-align:center">//book/price</td><td>é€‰å– book å…ƒç´ çš„æ‰€æœ‰ title å’Œ price å…ƒç´ ã€‚</td></tr><tr><td style="text-align:center">//title \</td><td style="text-align:center">//price</td><td>é€‰å–æ–‡æ¡£ä¸­çš„æ‰€æœ‰ title å’Œ price å…ƒç´ ã€‚</td></tr><tr><td style="text-align:center">/bookstore/book/title \</td><td style="text-align:center">//price</td><td>é€‰å–å±äº bookstore å…ƒç´ çš„ book å…ƒç´ çš„æ‰€æœ‰ title å…ƒç´ ï¼Œä»¥åŠæ–‡æ¡£ä¸­æ‰€æœ‰çš„ price å…ƒç´ ã€‚</td></tr></tbody></table><h2 id="Xpathå®ä¾‹æµ‹è¯•"><a href="#Xpathå®ä¾‹æµ‹è¯•" class="headerlink" title="Xpathå®ä¾‹æµ‹è¯•"></a><strong>Xpathå®ä¾‹æµ‹è¯•</strong></h2><p>  æµ‹è¯•Demo:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item-0"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"link1.html"</span>&gt;</span>first item<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item-1"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"link2.html"</span>&gt;</span>second item<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item-inactive"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"link3.html"</span>&gt;</span>third item<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item-1"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"link4.html"</span>&gt;</span>fourth item<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item-0"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"link5.html"</span>&gt;</span>fifth item<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><1> è·å–æ‰€æœ‰çš„<code>&lt;l\&gt;</code>æ ‡ç­¾<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">response</span><span class="selector-class">.xpath</span>(<span class="string">'//li'</span>)</span><br></pre></td></tr></table></figure></1></p><p><2> è·å– <code>&lt;li&gt;</code> æ ‡ç­¾çš„æ‰€æœ‰ class<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">response.xpath(<span class="string">'//li/@class'</span>)</span><br><span class="line"></span><br><span class="line">è¿è¡Œç»“æœ</span><br><span class="line"></span><br><span class="line">[<span class="string">'item-0'</span>, <span class="string">'item-1'</span>, <span class="string">'item-inactive'</span>, <span class="string">'item-1'</span>, <span class="string">'item-0'</span>]</span><br></pre></td></tr></table></figure></2></p><p><3> è·å– <code>&lt;li&gt;</code> æ ‡ç­¾ä¸‹ href ä¸º link1.html çš„ <a> æ ‡ç­¾<br><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">response.xpath('<span class="comment">//li/a[@href="link1.html"]')</span></span><br><span class="line"></span><br><span class="line">è¿è¡Œç»“æœ</span><br><span class="line"><span class="meta">[&lt;Element a at 0x10ffaae18&gt;]</span></span><br></pre></td></tr></table></figure></a></3></p><p><4> è·å– <code>&lt;li&gt;</code> æ ‡ç­¾ä¸‹çš„æ‰€æœ‰ <code>&lt;span&gt;</code> æ ‡ç­¾</4></p><blockquote><p> æ³¨æ„è¿™ç§å†™æ³•æ˜¯ä¸å¯¹çš„ </p></blockquote><pre><code>response.xpath(&apos;//li/span&apos;)</code></pre><blockquote><p>å› ä¸º/æ˜¯ç”¨æ¥è·å–å­å…ƒç´ çš„ï¼Œè€Œ<span>å¹¶ä¸æ˜¯<code>&lt;li&gt;</code>çš„å­å…ƒç´ ï¼Œæ‰€ä»¥è¦ç”¨åŒæ–œæ ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</span></p></blockquote><pre><code>response.xpath(&apos;//li//span&apos;)</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>[&lt;Element span at 0x10d698e18&gt;]</code></pre><p><5> è·å–<code>&lt;li&gt;</code>æ ‡ç­¾ä¸‹çš„æ‰€æœ‰classï¼Œä¸åŒ…æ‹¬<code>&lt;li&gt;</code></5></p><pre><code>result = response.xpath(&apos;&apos;//li/a/@class&apos;)print result</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>[&apos;blod&apos;]</code></pre><p><6> è·å–æœ€åä¸€ä¸ª<code>&lt;li&gt;</code>çš„<code>&lt;a&gt;</code>çš„href<br><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.xpath('<span class="comment">//li[last()]/a/@href')</span></span><br></pre></td></tr></table></figure></6></p><p>è¿è¡Œç»“æœï¼š</p><pre><code>[&apos;link5.html&apos;]</code></pre><p><7> è·å–å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ çš„å†…å®¹<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result = response.xpath(<span class="string">'//li[last()-1]/a'</span>)</span><br><span class="line"><span class="keyword">print</span> result[<span class="number">0</span>].text</span><br></pre></td></tr></table></figure></7></p><p>è¿è¡Œç»“æœï¼š</p><pre><code>fourth item</code></pre><p><8> è·å–classä¸ºboldçš„æ ‡ç­¾å<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result = response.xpath(<span class="string">'//*[@class="bold"]'</span>)</span><br><span class="line"><span class="keyword">print</span> result[<span class="number">0</span>].tag</span><br></pre></td></tr></table></figure></8></p><p>è¿è¡Œç»“æœï¼š</p><pre><code>span</code></pre><blockquote><p>é€šè¿‡ä»¥ä¸Šå®ä¾‹çš„ç»ƒä¹ ï¼Œèƒ½å¤Ÿå¯¹XPathçš„åŸºæœ¬ç”¨æ³•æœ‰äº†åŸºæœ¬çš„äº†è§£ï¼Œä¹Ÿå¯ä»¥é€šè¿‡text()æ–¹æ³•è·å–å…ƒç´ å†…å®¹ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;!--&gt;
XPathæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„è§£ææ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿä½œä¸ºçˆ¬è™«å­¦ä¹ çš„åŸºç¡€ï¼Œåœ¨åé¢çš„ selenium ä»¥åŠ scrapy æ¡†æ¶ä¸­éƒ½ä¼šæ¶‰åŠåˆ°è¿™éƒ¨åˆ†çŸ¥è¯†ï¼Œéœ€è¦æŠŠå®ƒçš„è¯­æ³•æŒæ¡æ¸…æ¥šï¼Œä¸ºåé¢çš„æ·±å…¥ç ”ç©¶åšå¥½é“ºå«ã€‚
    
    </summary>
    
      <category term="python" scheme="http://heany.github.io/categories/python/"/>
    
    
      <category term="pythonå­¦ä¹ ç¬”è®°" scheme="http://heany.github.io/tags/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>è´å¶æ–¯åˆ†ç±»å™¨å®ç°</title>
    <link href="http://heany.github.io/2017/10/14/%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8%E5%AE%9E%E7%8E%B0/"/>
    <id>http://heany.github.io/2017/10/14/è´å¶æ–¯åˆ†ç±»å™¨å®ç°/</id>
    <published>2017-10-14T11:03:31.000Z</published>
    <updated>2019-01-26T14:47:30.580Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€è´å¶æ–¯åˆ†ç±»å®ç°ï¼ˆé‡‡ç”¨python3-6-æ•°æ®é›†ä¸ºarffæ–‡ä»¶æ ¼å¼ï¼‰"><a href="#1ã€è´å¶æ–¯åˆ†ç±»å®ç°ï¼ˆé‡‡ç”¨python3-6-æ•°æ®é›†ä¸ºarffæ–‡ä»¶æ ¼å¼ï¼‰" class="headerlink" title="1ã€è´å¶æ–¯åˆ†ç±»å®ç°ï¼ˆé‡‡ç”¨python3.6 æ•°æ®é›†ä¸ºarffæ–‡ä»¶æ ¼å¼ï¼‰"></a>1ã€è´å¶æ–¯åˆ†ç±»å®ç°ï¼ˆé‡‡ç”¨python3.6 æ•°æ®é›†ä¸ºarffæ–‡ä»¶æ ¼å¼ï¼‰</h2><p>æ•°æ®æŒ–æ˜è¯¾è€å¸ˆç•™çš„ä¸€ä¸ªå®ç°è´å¶æ–¯åˆ†ç±»å™¨çš„ç»ƒä¹ ï¼Œæ•°æ®æºä¸ºarffæ ¼å¼çš„æ–‡ä»¶~ä¸‹é¢æ˜¯ä½¿ç”¨pythonè¯­è¨€ç¼–å†™çš„ä¸€ä¸ªç®€å•çš„å®ç°æ¡ˆä¾‹ã€‚<br><a id="more"></a></p><h2 id="1-1ã€-arffæ ¼å¼æ–‡ä»¶ä»‹ç»"><a href="#1-1ã€-arffæ ¼å¼æ–‡ä»¶ä»‹ç»" class="headerlink" title="1.1ã€ arffæ ¼å¼æ–‡ä»¶ä»‹ç»"></a>1.1ã€ arffæ ¼å¼æ–‡ä»¶ä»‹ç»</h2><p><a href="http://blog.sina.com.cn/s/blog_9d40b61301012xci.html" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p><blockquote><p>arffæ–‡ä»¶æ˜¯Wekaé»˜è®¤çš„å‚¨å­˜æ•°æ®é›†æ–‡ä»¶ã€‚æ¯ä¸ªarffæ–‡ä»¶å¯¹åº”ä¸€ä¸ªäºŒç»´è¡¨æ ¼ã€‚è¡¨æ ¼çš„å„è¡Œæ˜¯æ•°æ®é›†çš„å„å®ä¾‹ï¼Œå„åˆ—æ˜¯æ•°æ®é›†çš„å„ä¸ªå±æ€§ã€‚æ¨èä½¿ç”¨<code>UltraEdit</code>è¿™æ ·çš„å­—ç¬¦ç¼–è¾‘è½¯ä»¶æˆ–è€…<strong>Sublime Text</strong>è¿™æ ·çš„æ–‡æœ¬ç¼–è¯‘å™¨æŸ¥çœ‹arffæ–‡ä»¶çš„å†…å®¹ã€‚</p></blockquote><p>weather.arff æ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="http://static.zybuluo.com/Heany/x557l6ij8dord89b0lyjfsom/arff.png" alt="arff.png-25.6kB"></p><p>è¯†åˆ«ARFFæ–‡ä»¶çš„é‡è¦ä¾æ®æ˜¯åˆ†è¡Œï¼Œå› æ­¤ä¸èƒ½åœ¨è¿™ç§æ–‡ä»¶é‡Œéšæ„çš„æ–­è¡Œã€‚ç©ºè¡Œï¼ˆæˆ–å…¨æ˜¯ç©ºæ ¼çš„è¡Œï¼‰å°†è¢«å¿½ç•¥ã€‚<br>ä»¥â€œ%â€å¼€å§‹çš„è¡Œæ˜¯æ³¨é‡Šï¼ŒWEKAå°†å¿½ç•¥è¿™äº›è¡Œã€‚å¦‚æœä½ çœ‹åˆ°çš„â€œweather.arffâ€æ–‡ä»¶å¤šäº†æˆ–å°‘äº†äº›â€œ%â€å¼€å§‹çš„è¡Œï¼Œæ˜¯æ²¡æœ‰å½±å“çš„ã€‚<br>é™¤å»æ³¨é‡Šåï¼Œæ•´ä¸ªARFFæ–‡ä»¶å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚ç¬¬ä¸€éƒ¨åˆ†ç»™å‡ºäº†å¤´ä¿¡æ¯ï¼ˆHead informationï¼‰ï¼ŒåŒ…æ‹¬äº†å¯¹å…³ç³»çš„å£°æ˜å’Œå¯¹å±æ€§çš„å£°æ˜ã€‚ç¬¬äºŒéƒ¨åˆ†ç»™å‡ºäº†æ•°æ®ä¿¡æ¯ï¼ˆData informationï¼‰ï¼Œå³æ•°æ®é›†ä¸­ç»™å‡ºçš„æ•°æ®ã€‚ä»â€œ@dataâ€æ ‡è®°å¼€å§‹ï¼Œåé¢çš„å°±æ˜¯æ•°æ®ä¿¡æ¯äº†ã€‚<br>è™½ç„¶Wekaä¹Ÿæ”¯æŒå…¶ä»–ä¸€äº›æ ¼å¼çš„æ–‡ä»¶ï¼Œä½†æ˜¯ARFFæ ¼å¼æ˜¯æ”¯æŒçš„æœ€å¥½çš„ã€‚å› æ­¤æœ‰å¿…è¦åœ¨æ•°æ®å¤„ç†ä¹‹å‰æŠŠæ•°æ®é›†çš„æ ¼å¼è½¬æ¢æˆARFFã€‚</p><h2 id="1-2ã€-arffæ ¼å¼æ–‡ä»¶è¯»å–"><a href="#1-2ã€-arffæ ¼å¼æ–‡ä»¶è¯»å–" class="headerlink" title="1.2ã€ arffæ ¼å¼æ–‡ä»¶è¯»å–"></a>1.2ã€ arffæ ¼å¼æ–‡ä»¶è¯»å–</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re  </span><br><span class="line"><span class="keyword">import</span> sys  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">readArff</span><span class="params">(fileName)</span>:</span>  </span><br><span class="line">    arffFile = open(fileName,<span class="string">'r'</span>)  </span><br><span class="line">    data = []  </span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> arffFile.readlines():  </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> (line.startswith(<span class="string">'@'</span>)):  </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> (line.startswith(<span class="string">'%'</span>)):  </span><br><span class="line">                <span class="keyword">if</span> line !=<span class="string">'\n'</span>:  </span><br><span class="line">                    L=line.strip(<span class="string">'\n'</span>)  </span><br><span class="line">                    k=L.split(<span class="string">','</span>)  </span><br><span class="line">                    data.append(k)                      </span><br><span class="line">                    print(k)  </span><br><span class="line">    print(data)  </span><br><span class="line"><span class="keyword">if</span> __name__ ==<span class="string">'__main__'</span>:  </span><br><span class="line">    fileName=<span class="string">r'C:\Users\Administrator\Desktop\exepirenment\classifill\data\weather.arff'</span>  </span><br><span class="line">    readArff(fileName)</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">'sunny</span>', <span class="symbol">'85</span>', <span class="symbol">'85</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'no</span>']</span><br><span class="line">[<span class="symbol">'sunny</span>', <span class="symbol">'80</span>', <span class="symbol">'90</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'no</span>']</span><br><span class="line">[<span class="symbol">'overcast</span>', <span class="symbol">'83</span>', <span class="symbol">'86</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>']</span><br><span class="line">[<span class="symbol">'rainy</span>', <span class="symbol">'70</span>', <span class="symbol">'96</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>']</span><br><span class="line">[<span class="symbol">'rainy</span>', <span class="symbol">'68</span>', <span class="symbol">'80</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>']</span><br><span class="line">[<span class="symbol">'rainy</span>', <span class="symbol">'65</span>', <span class="symbol">'70</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'no</span>']</span><br><span class="line">[<span class="symbol">'overcast</span>', <span class="symbol">'64</span>', <span class="symbol">'65</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'yes</span>']</span><br><span class="line">[<span class="symbol">'sunny</span>', <span class="symbol">'72</span>', <span class="symbol">'95</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'no</span>']</span><br><span class="line">[<span class="symbol">'sunny</span>', <span class="symbol">'69</span>', <span class="symbol">'70</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>']</span><br><span class="line">[<span class="symbol">'rainy</span>', <span class="symbol">'75</span>', <span class="symbol">'80</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>']</span><br><span class="line">[<span class="symbol">'sunny</span>', <span class="symbol">'75</span>', <span class="symbol">'70</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'yes</span>']</span><br><span class="line">[<span class="symbol">'overcast</span>', <span class="symbol">'72</span>', <span class="symbol">'90</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'yes</span>']</span><br><span class="line">[<span class="symbol">'overcast</span>', <span class="symbol">'81</span>', <span class="symbol">'75</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>']</span><br><span class="line">[<span class="symbol">'rainy</span>', <span class="symbol">'71</span>', <span class="symbol">'91</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'no</span>']</span><br><span class="line">[[<span class="symbol">'sunny</span>', <span class="symbol">'85</span>', <span class="symbol">'85</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'no</span>'], [<span class="symbol">'sunny</span>', <span class="symbol">'80</span>', <span class="symbol">'90</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'no</span>'], [<span class="symbol">'overcast</span>', <span class="symbol">'83</span>', <span class="symbol">'86</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>'], [<span class="symbol">'rainy</span>', <span class="symbol">'70</span>', <span class="symbol">'96</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>'], [<span class="symbol">'rainy</span>', <span class="symbol">'68</span>', <span class="symbol">'80</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>'], [<span class="symbol">'rainy</span>', <span class="symbol">'65</span>', <span class="symbol">'70</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'no</span>'], [<span class="symbol">'overcast</span>', <span class="symbol">'64</span>', <span class="symbol">'65</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'yes</span>'], [<span class="symbol">'sunny</span>', <span class="symbol">'72</span>', <span class="symbol">'95</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'no</span>'], [<span class="symbol">'sunny</span>', <span class="symbol">'69</span>', <span class="symbol">'70</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>'], [<span class="symbol">'rainy</span>', <span class="symbol">'75</span>', <span class="symbol">'80</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>'], [<span class="symbol">'sunny</span>', <span class="symbol">'75</span>', <span class="symbol">'70</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'yes</span>'], [<span class="symbol">'overcast</span>', <span class="symbol">'72</span>', <span class="symbol">'90</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'yes</span>'], [<span class="symbol">'overcast</span>', <span class="symbol">'81</span>', <span class="symbol">'75</span>', <span class="symbol">'FALSE</span>', <span class="symbol">'yes</span>'], [<span class="symbol">'rainy</span>', <span class="symbol">'71</span>', <span class="symbol">'91</span>', <span class="symbol">'TRUE</span>', <span class="symbol">'no</span>']]</span><br></pre></td></tr></table></figure></p></blockquote><h2 id="1-3ã€-å®ç°è´å¶æ–¯åˆ†ç±»å™¨"><a href="#1-3ã€-å®ç°è´å¶æ–¯åˆ†ç±»å™¨" class="headerlink" title="1.3ã€ å®ç°è´å¶æ–¯åˆ†ç±»å™¨"></a>1.3ã€ å®ç°è´å¶æ–¯åˆ†ç±»å™¨</h2><p><a href="http://blog.csdn.net/ben_ben_niao/article/details/40951843" target="_blank" rel="noopener"><strong><em>å‚è€ƒé“¾æ¥</em></strong></a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re  </span><br><span class="line"><span class="keyword">import</span> sys  </span><br><span class="line"><span class="keyword">import</span> bisect  </span><br><span class="line">data =[]  <span class="comment">#å…¨å±€å˜é‡  </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">readArff</span><span class="params">(fileName)</span>:</span>  </span><br><span class="line">    arffFile = open(fileName,<span class="string">'r'</span>)  </span><br><span class="line">    <span class="keyword">global</span> data  </span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> arffFile.readlines():  </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> (line.startswith(<span class="string">'@'</span>)):  </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> (line.startswith(<span class="string">'%'</span>)):  </span><br><span class="line">                <span class="keyword">if</span> line !=<span class="string">'\n'</span>:  </span><br><span class="line">                    L=line.strip(<span class="string">'\n'</span>)  </span><br><span class="line">                    k=L.split(<span class="string">','</span>)  </span><br><span class="line">                    data.append(k)  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bayesion</span><span class="params">(testData)</span>:</span>  </span><br><span class="line">    class1=[]  </span><br><span class="line">    class2=[]  </span><br><span class="line">    <span class="keyword">global</span> data  </span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data:  </span><br><span class="line">        <span class="keyword">if</span> item[len(item)<span class="number">-1</span>] == <span class="string">'yes'</span>:  </span><br><span class="line">            class1.append(item)  </span><br><span class="line">        <span class="keyword">else</span>:  </span><br><span class="line">            class2.append(item)  </span><br><span class="line">    class1Probability = len(class1) /len(data)  </span><br><span class="line">    class2Probability = len(class2) /len(data)  </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(testData)):  </span><br><span class="line">        count = <span class="number">0</span>  </span><br><span class="line">        <span class="keyword">for</span> elem <span class="keyword">in</span> class1:  </span><br><span class="line">            <span class="keyword">if</span> testData[i]==elem[i]:  </span><br><span class="line">                count +=<span class="number">1</span>       <span class="comment">#ç»Ÿè®¡ä¸ªæ•°  </span></span><br><span class="line">        class1Probability *= count/len(class1) <span class="comment">#ç´¯è®¡ä¹˜æ³• æ±‚æ€»æ¦‚ç‡  </span></span><br><span class="line">        count = <span class="number">0</span>  </span><br><span class="line">        <span class="keyword">for</span> elem <span class="keyword">in</span> class2:  </span><br><span class="line">            <span class="keyword">if</span> testData[i]==elem[i]:  </span><br><span class="line">                count +=<span class="number">1</span>  </span><br><span class="line">        class2Probability *=count/len(class2)  </span><br><span class="line">    <span class="keyword">if</span> class1Probability &gt;class2Probability: <span class="comment">#æ¯”è¾ƒï¼Œè¿›è€Œåˆ†ç±»  </span></span><br><span class="line">        print(<span class="string">"The result is : Yes"</span>)  </span><br><span class="line">    <span class="keyword">else</span>:  </span><br><span class="line">        print(<span class="string">"The result if : No"</span>)  </span><br><span class="line"><span class="comment">#æ•°æ®é¢„å¤„ç†ï¼Œå°†dataæ•°æ®åˆ†ç®±ï¼Œdataæ•°æ®ä¸º list[list1,list2...]ç±»å‹  </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dataPreprocessing1</span><span class="params">(data)</span>:</span>  </span><br><span class="line">    breakpoint1 =[<span class="number">70</span>,<span class="number">80</span>]  </span><br><span class="line">    breakpoint2=[<span class="number">80</span>,<span class="number">90</span>]  </span><br><span class="line">    newValue1=<span class="string">'LMH'</span>  </span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data:  </span><br><span class="line">        i = bisect.bisect(breakpoint1,int(item[<span class="number">1</span>])) <span class="comment">#int(),str()ç­‰ç±»å‹éœ€è¦è½¬æ¢  </span></span><br><span class="line">        item[<span class="number">1</span>]=str(newValue1[i])  </span><br><span class="line">        j = bisect.bisect(breakpoint2,int(item[<span class="number">2</span>]))  </span><br><span class="line">        item[<span class="number">2</span>]=str(newValue1[j])  </span><br><span class="line"><span class="comment">#æ•°æ®é¢„å¤„ç†ï¼Œåˆ†ç®±ï¼Œé’ˆå¯¹å•ä¸ªlistæ•°æ®ï¼Œdataä¸ºlist['..','..']ç±»å‹  </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dataPreprocessing2</span><span class="params">(data)</span>:</span>  </span><br><span class="line">    breakpoint1 =[<span class="number">70</span>,<span class="number">80</span>]  </span><br><span class="line">    breakpoint2=[<span class="number">80</span>,<span class="number">90</span>]  </span><br><span class="line">    newValue1=<span class="string">'LMH'</span>  </span><br><span class="line">    i = bisect.bisect(breakpoint1,int(data[<span class="number">1</span>]))  </span><br><span class="line">    data[<span class="number">1</span>]=str(newValue1[i])  </span><br><span class="line">    j = bisect.bisect(breakpoint2,int(data[<span class="number">2</span>]))  </span><br><span class="line">    data[<span class="number">2</span>]=str(newValue1[j])  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> __name__ ==<span class="string">'__main__'</span>:  </span><br><span class="line">    fileName=<span class="string">r'C:\Users\Administrator\Desktop\exepirenment\classifill\data\weather.arff'</span>  </span><br><span class="line">    readArff(fileName)  </span><br><span class="line">    dataPreprocessing1(data)  </span><br><span class="line">  </span><br><span class="line">    testData =[<span class="string">'overcast'</span>,<span class="string">'72'</span>,<span class="string">'80'</span>,<span class="string">'TRUE'</span>]  </span><br><span class="line">    dataPreprocessing2(testData)  </span><br><span class="line">  </span><br><span class="line">    bayesion(testData)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€è´å¶æ–¯åˆ†ç±»å®ç°ï¼ˆé‡‡ç”¨python3-6-æ•°æ®é›†ä¸ºarffæ–‡ä»¶æ ¼å¼ï¼‰&quot;&gt;&lt;a href=&quot;#1ã€è´å¶æ–¯åˆ†ç±»å®ç°ï¼ˆé‡‡ç”¨python3-6-æ•°æ®é›†ä¸ºarffæ–‡ä»¶æ ¼å¼ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;1ã€è´å¶æ–¯åˆ†ç±»å®ç°ï¼ˆé‡‡ç”¨python3.6 æ•°æ®é›†ä¸ºarffæ–‡ä»¶æ ¼å¼ï¼‰&quot;&gt;&lt;/a&gt;1ã€è´å¶æ–¯åˆ†ç±»å®ç°ï¼ˆé‡‡ç”¨python3.6 æ•°æ®é›†ä¸ºarffæ–‡ä»¶æ ¼å¼ï¼‰&lt;/h2&gt;&lt;p&gt;æ•°æ®æŒ–æ˜è¯¾è€å¸ˆç•™çš„ä¸€ä¸ªå®ç°è´å¶æ–¯åˆ†ç±»å™¨çš„ç»ƒä¹ ï¼Œæ•°æ®æºä¸ºarffæ ¼å¼çš„æ–‡ä»¶~ä¸‹é¢æ˜¯ä½¿ç”¨pythonè¯­è¨€ç¼–å†™çš„ä¸€ä¸ªç®€å•çš„å®ç°æ¡ˆä¾‹ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Machine Learning" scheme="http://heany.github.io/categories/Machine-Learning/"/>
    
    
      <category term="æ•°æ®æŒ–æ˜" scheme="http://heany.github.io/tags/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/"/>
    
      <category term="python3" scheme="http://heany.github.io/tags/python3/"/>
    
      <category term="è´å¶æ–¯åˆ†ç±»å™¨" scheme="http://heany.github.io/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„åšå®¢æ­å»ºæµç¨‹</title>
    <link href="http://heany.github.io/2017/10/08/%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/"/>
    <id>http://heany.github.io/2017/10/08/æˆ‘çš„åšå®¢æ­å»ºæµç¨‹/</id>
    <published>2017-10-08T12:42:48.000Z</published>
    <updated>2019-01-26T14:47:30.579Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p><code>Hexo</code>éƒ¨ç½²åˆ°<code>GitHub</code>ä¸Šçš„æ–‡ä»¶ï¼Œæ˜¯<code>.md</code>ï¼ˆä½ çš„åšæ–‡ï¼‰è½¬åŒ–ä¹‹åçš„<code>.html</code>ï¼ˆé™æ€ç½‘é¡µï¼‰ã€‚å› æ­¤ï¼Œå½“ä½ é‡è£…ç”µè„‘æˆ–è€…æƒ³åœ¨ä¸åŒç”µè„‘ä¸Šä¿®æ”¹åšå®¢æ—¶ï¼Œå°±ä¸å¯èƒ½äº†ï¼ˆé™¤éä½ è‡ªå·±å†™<code>html</code>ï¼‰ã€‚<br><a id="more"></a><br>å…¶å®ï¼Œ<code>Hexo</code>ç”Ÿæˆçš„ç½‘ç«™æ–‡ä»¶ä¸­æœ‰<code>.gitignore</code>æ–‡ä»¶ï¼Œå› æ­¤å®ƒçš„æœ¬æ„ä¹Ÿæ˜¯æƒ³æˆ‘ä»¬å°†<code>Hexo</code>ç”Ÿæˆçš„ç½‘ç«™æ–‡ä»¶å­˜æ”¾åˆ°<code>GitHub</code>ä¸Šè¿›è¡Œç®¡ç†çš„ï¼ˆè€Œä¸æ˜¯ç”¨Uç›˜æˆ–è€…äº‘å¤‡ä»½å•¦ï¼‰ã€‚è¿™æ ·ï¼Œä¸ä»…è§£å†³äº†ä¸Šè¿°çš„é—®é¢˜ï¼Œè¿˜å¯ä»¥é€šè¿‡gitçš„ç‰ˆæœ¬æ§åˆ¶è¿½è¸ªä½ çš„åšæ–‡çš„ä¿®æ”¹è¿‡ç¨‹ï¼Œæ˜¯æèµçš„ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæ¯ä¸€ä¸ª<code>GitHub Pages</code>éƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªé¢å¤–çš„ä»“åº“æ¥å­˜æ”¾<code>Hexo</code>ç½‘ç«™æ–‡ä»¶ï¼Œæˆ‘æ„Ÿè§‰å¾ˆéº»çƒ¦ï¼ˆ10ä¸ªé¡¹ç›®éœ€è¦20ä¸ªä»“åº“â€¦ï¼‰ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘åˆ©ç”¨äº†åˆ†æ”¯ï¼ï¼ï¼</p><p>ç®€å•åœ°è¯´ï¼Œæ¯ä¸ªæƒ³å»ºç«‹<code>GitHub Pages</code>çš„ä»“åº“ï¼Œèµ·ç æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œä¸€ä¸ªç”¨æ¥å­˜æ”¾<code>Hexo</code>ç½‘ç«™çš„æ–‡ä»¶ï¼Œä¸€ä¸ªç”¨æ¥å‘å¸ƒç½‘ç«™ã€‚</p><p>ä¸‹é¢å°†æˆ‘çš„åšå®¢æ­å»ºæµç¨‹ç®€å•è®²ä¸€ä¸‹</p><h2 id="äºŒã€-æˆ‘çš„åšå®¢æ­å»ºæµç¨‹"><a href="#äºŒã€-æˆ‘çš„åšå®¢æ­å»ºæµç¨‹" class="headerlink" title="äºŒã€ æˆ‘çš„åšå®¢æ­å»ºæµç¨‹"></a>äºŒã€ æˆ‘çš„åšå®¢æ­å»ºæµç¨‹</h2><ol><li>åˆ›å»ºä»“åº“ï¼Œ<code>yourname.github.io</code>;</li><li>åˆ›å»ºä¸¤ä¸ªåˆ†æ”¯: <code>master</code>ï¼ˆè¿™ä¸ªåˆ†æ”¯ä¸»è¦ç”¨æ¥å±•ç¤ºé™æ€ç½‘é¡µï¼Œç»™ç”¨æˆ·çœ‹çš„User Pagesï¼‰å’Œ<code>hexo</code>ï¼ˆè¿™ä¸ªåˆ†æ”¯ä¸»è¦æ˜¯ç”¨æ¥å¤‡ä»½Projects Pagesï¼‰;</li><li>è®¾ç½®<code>hexo</code>ä¸ºé»˜è®¤åˆ†æ”¯;</li><li>ä½¿ç”¨<code>git clone git@github.com:yourname/yourname.github.io</code>æ‹·è´ä»“åº“ï¼Œæ‹·è´å®Œæˆåï¼Œæœ¬åœ°ä¼šæœ‰ä¸€ä¸ª<code>yourname.github.com</code>æ–‡ä»¶å¤¹;</li><li><p><strong>ç”±äº<code>hexo init dir</code>å‘½ä»¤ä¸èƒ½åœ¨éç©ºçš„dirä¸‹æ‰§è¡ŒæˆåŠŸ</strong>,æ‰€ä»¥å…ˆæ‰¾ä¸€ä¸ªæ–‡ä»¶å¤¹(ä¾‹å¦‚<code>blog</code>)å»ºç«‹ä¸€ä¸ªåšå®¢ï¼Œä¹Ÿå°±æ˜¯ä¾æ¬¡æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br><span class="line">npm install</span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li><li><p>å°†ä¸Šé¢<code>blog</code>æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å…¨éƒ¨æ‹·è´åˆ°åˆšåˆš<code>clone</code>ä¸‹æ¥çš„<code>yourname.github.io</code>æ–‡ä»¶å¤¹é‡Œé¢ã€‚</p></li><li><p>ä¿®æ”¹<code>yourname.github.io/_config.yml</code>ä¸­çš„deployå‚æ•°ï¼Œåˆ†æ”¯åº”è¯¥ä¸º<code>master</code>ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repo</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:yourname/yourname.github.io.git</span><br><span class="line">  <span class="attribute">branch</span>: master</span><br></pre></td></tr></table></figure></li><li><p>ä¾æ¬¡æ‰§è¡Œä¸‹é¢å‘½ä»¤,å°†ç½‘ç«™ç›¸å…³çš„æ–‡ä»¶å¤‡ä»½åˆ°githubä¸Šã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"your comments"</span></span><br><span class="line">git push origin hexo</span><br></pre></td></tr></table></figure></li><li><p>ç„¶åæ‰§è¡Œ<code>hexo</code>ç›¸å…³ï¼Œå‘½ä»¤ç”Ÿæˆç½‘ç«™ï¼Œå¹¶éƒ¨ç½²åˆ°<code>Github</code>ä¸Šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean #æ¸…æ¥šç¼“å­˜ï¼Œè‹¥æ˜¯ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥è¿™æ¡å‘½ä»¤</span><br><span class="line">hexo g  # ç”Ÿæˆ æ˜¯hexo generate</span><br><span class="line">hexo d  # éƒ¨ç½² æ˜¯hexo deploy</span><br></pre></td></tr></table></figure></li></ol><blockquote><p> å¦‚æ­¤æ“ä½œï¼Œåœ¨<code>Github</code>ä¸Šçš„<code>heany.github.io</code>ä»“åº“å°±æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œä¸€ä¸ª<code>hexo</code>åˆ†æ”¯ç”¨æ¥å­˜æ”¾ç½‘ç«™çš„åŸå§‹æ–‡ä»¶ï¼Œä¸€ä¸ª<code>master</code>åˆ†æ”¯ç”¨æ¥å­˜æ”¾ç”Ÿæˆçš„é™æ€ç½‘é¡µï½æ•ˆç‡è¶…é«˜ï¼Œä¸ç”¨å†æ–°å»ºä¸€ä¸ªrepositoryå»å¤‡ä»½ç½‘ç«™æ–‡ä»¶äº†ï¼æ˜¯ä¸æ˜¯å¾ˆå¥½ï½</p></blockquote><h2 id="ä¸‰ã€-åšå®¢æ—¥å¸¸ç®¡ç†æµç¨‹"><a href="#ä¸‰ã€-åšå®¢æ—¥å¸¸ç®¡ç†æµç¨‹" class="headerlink" title="ä¸‰ã€ åšå®¢æ—¥å¸¸ç®¡ç†æµç¨‹"></a>ä¸‰ã€ åšå®¢æ—¥å¸¸ç®¡ç†æµç¨‹</h2><h3 id="3-1ã€-æ—¥å¸¸ä¿®æ”¹"><a href="#3-1ã€-æ—¥å¸¸ä¿®æ”¹" class="headerlink" title="3.1ã€ æ—¥å¸¸ä¿®æ”¹"></a>3.1ã€ æ—¥å¸¸ä¿®æ”¹</h3><p>åœ¨æœ¬åœ°å¯¹åšå®¢è¿›è¡Œä¿®æ”¹ï¼ˆæ·»åŠ æ–°åšæ–‡ã€ä¿®æ”¹æ ·å¼ç­‰ç­‰ï¼‰åï¼Œé€šè¿‡ä¸‹é¢çš„æµç¨‹è¿›è¡Œç®¡ç†ï¼š</p><ol><li>ä¾æ¬¡æ‰§è¡Œ<code>git add .</code>ã€<code>git commit -m â€œâ€¦â€</code>ã€<code>git push origin hexo</code>æŒ‡ä»¤å°†æ”¹åŠ¨æ¨é€åˆ°<code>GitHub</code>ï¼ˆæ­¤æ—¶å½“å‰åˆ†æ”¯åº”ä¸º<code>hexo</code>ï¼‰ï¼›</li><li>ç„¶åæ‰æ‰§è¡Œ<code>hexo generate -d</code>å‘å¸ƒç½‘ç«™åˆ°<code>master</code>åˆ†æ”¯ä¸Šã€‚</li></ol><p>è™½ç„¶ä¸¤ä¸ªè¿‡ç¨‹é¡ºåºè°ƒè½¬ä¸€èˆ¬ä¸ä¼šæœ‰é—®é¢˜ï¼Œä¸è¿‡é€»è¾‘ä¸Šè¿™æ ·çš„é¡ºåºæ˜¯ç»å¯¹æ²¡é—®é¢˜çš„ï¼ˆä¾‹å¦‚çªç„¶æ­»æœºè¦é‡è£…äº†ï¼Œæ‚²å‚¬â€¦.çš„æƒ…å†µï¼Œè°ƒè½¬é¡ºåºå°±æœ‰é—®é¢˜äº†ï¼‰ã€‚</p><h3 id="3-2ã€-æœ¬åœ°èµ„æ–™ä¸¢å¤±"><a href="#3-2ã€-æœ¬åœ°èµ„æ–™ä¸¢å¤±" class="headerlink" title="3.2ã€ æœ¬åœ°èµ„æ–™ä¸¢å¤±"></a>3.2ã€ æœ¬åœ°èµ„æ–™ä¸¢å¤±</h3><p>å½“é‡è£…ç”µè„‘ä¹‹åï¼Œæˆ–è€…æƒ³åœ¨å…¶ä»–ç”µè„‘ä¸Šä¿®æ”¹åšå®¢ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ—æ­¥éª¤ï¼š</p><ol><li>ä½¿ç”¨<code>git clone git@github.com:yourname/yourname.github.io.git</code>æ‹·è´ä»“åº“ï¼ˆé»˜è®¤åˆ†æ”¯ä¸º<code>hexo</code>ï¼‰ï¼›</li><li>åœ¨æœ¬åœ°æ–°æ‹·è´çš„<code>yourname.github.io</code>æ–‡ä»¶å¤¹ä¸‹é€šè¿‡<code>Git bash</code>(windowsä¸‹ä½¿ç”¨ã€‚è‹¥æ˜¯linuxåˆ™åœ¨bashé‡Œé¢ç›´æ¥æ‰§è¡Œ)ä¾æ¬¡æ‰§è¡Œä¸‹åˆ—æŒ‡ä»¤ï¼š<code>npm install hexo</code>ã€<code>npm install</code>ã€<code>npm install hexo-deployer-git</code>ï¼ˆ<b style="color: red">è®°ä½ä¸éœ€è¦hexo initè¿™æ¡æŒ‡ä»¤</b>ï¼‰ã€‚</li></ol><h2 id="å››ã€-ç»“æŸè¯­"><a href="#å››ã€-ç»“æŸè¯­" class="headerlink" title="å››ã€ ç»“æŸè¯­"></a>å››ã€ ç»“æŸè¯­</h2><p><code>Github Pages</code>æ˜¯<strong>æ”¯æŒåŸŸåç»‘å®š</strong>çš„ï¼Œå¯ä»¥å»<code>Godday</code>ä¸Šä¹°ä¸€ä¸ªæ¯”è¾ƒä¾¿å®œçš„åŸŸåï¼Œç„¶ååœ¨å›½å†…çš„<code>DNSPod</code>ä¸Šå»è§£æä½ çš„åŸŸå,ã€‚å…·ä½“å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://zhuanlan.zhihu.com/p/26625249" target="_blank" rel="noopener">æ‘¸æˆ‘å‰å¾€</a>ã€‚</p><p>åˆ°è¿™é‡Œç»“æŸäº†ï¼Œå¥½ç´¯å•Šï½ï½ï½</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€å‰è¨€&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Hexo&lt;/code&gt;éƒ¨ç½²åˆ°&lt;code&gt;GitHub&lt;/code&gt;ä¸Šçš„æ–‡ä»¶ï¼Œæ˜¯&lt;code&gt;.md&lt;/code&gt;ï¼ˆä½ çš„åšæ–‡ï¼‰è½¬åŒ–ä¹‹åçš„&lt;code&gt;.html&lt;/code&gt;ï¼ˆé™æ€ç½‘é¡µï¼‰ã€‚å› æ­¤ï¼Œå½“ä½ é‡è£…ç”µè„‘æˆ–è€…æƒ³åœ¨ä¸åŒç”µè„‘ä¸Šä¿®æ”¹åšå®¢æ—¶ï¼Œå°±ä¸å¯èƒ½äº†ï¼ˆé™¤éä½ è‡ªå·±å†™&lt;code&gt;html&lt;/code&gt;ï¼‰ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="http://heany.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="hexo Github-Pages Blog" scheme="http://heany.github.io/tags/hexo-Github-Pages-Blog/"/>
    
  </entry>
  
</feed>
